{"version":3,"file":"logger.cjs","names":["MC","_interopRequireWildcard","require","MH","_settings","_text","_console","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","o","Symbol","iterator","constructor","prototype","_defineProperties","length","enumerable","configurable","writable","_toPropertyKey","key","_createClass","_classCallCheck","TypeError","_defineProperty","value","_toPrimitive","toPrimitive","String","Number","Logger","exports","_this","config","arguments","undefined","myConfig","merge","verbosityLevel","settings","remoteLoggerURL","remoteLoggerOnMobileOnly","debugID","randId","getBooleanURLParam","isMobile","name","myConsole","Console","remoteLoggerConnectTimeout","logPrefix","concat","debugPrefix","getName","getVerbosityLevel","setVerbosityLevel","l","debug1","_len","args","Array","_key","logDebugN","apply","debug2","_len2","_key2","debug3","_len3","_key3","debug4","_len4","_key4","debug5","_len5","_key5","debug6","_len6","_key6","debug7","_len7","_key7","debug8","_len8","_key8","debug9","_len9","_key9","debug10","_len10","_key10","debug","_len11","_key11","log","_len12","_key12","info","_len13","_key13","warn","_len14","_key14","error","_len15","_key15","logAtCreation","logger","level","_len16","_key16","isNumber","unshift","bugError","regex","test","USER_AGENT","getURLParameter","toLowerCase","hasDOM","loc","getDoc","location","URLSearchParams","urlParams","search","strReplace","RegExp","match","href","decodeURIComponent"],"sources":["../../../src/ts/debug/logger.ts"],"sourcesContent":["/**\n * @module Debugging\n *\n * @categoryDescription Logging\n * {@link Debugging.LocalConsole | LocalConsole} logs to the local browser\n * console. On iOS devices it uses `console.info` for all levels because of a\n * bug in WebKit whereby other log levels don't show in some remote debuggers.\n * Also, iOS console only supports a single argument, so it joins the given\n * arguments as a single string.\n *\n * {@link Debugging.RemoteConsole | RemoteConsole} connects to a remote\n * {@link https://socket.io/ | socket.io} server and logs messages to it.\n *\n * {@link Console} holds a {@link LocalConsole} and optionally a\n * {@link RemoteConsole} and logs to both.\n *\n * {@link Logger} holds a {@link Console} and implements debug at 10 different\n * levels. The maximum logged level is configurable. Also emits a prefix in\n * debug messages that identifies the instance.\n */\n\nimport * as MC from \"@lisn/globals/minification-constants\";\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { settings } from \"@lisn/globals/settings\";\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { randId } from \"@lisn/utils/text\";\n\nimport { LoggerInterface, LoggerConfig } from \"@lisn/debug/types\";\nimport { Console } from \"@lisn/debug/console\";\n\n/**\n * Holds a {@link Console} and implements debug at 10 different levels. The\n * maximum logged level is configurable. Also emits a prefix in debug messages\n * that identifies the instance.\n *\n * @category Logging\n */\nexport class Logger implements LoggerInterface {\n  readonly debug: LogFunction;\n  readonly log: LogFunction;\n  readonly info: LogFunction;\n  readonly warn: LogFunction;\n  readonly error: LogFunction;\n  readonly debug1: LogFunction;\n  readonly debug2: LogFunction;\n  readonly debug3: LogFunction;\n  readonly debug4: LogFunction;\n  readonly debug5: LogFunction;\n  readonly debug6: LogFunction;\n  readonly debug7: LogFunction;\n  readonly debug8: LogFunction;\n  readonly debug9: LogFunction;\n  readonly debug10: LogFunction;\n  readonly getName: () => string;\n  readonly getVerbosityLevel: () => number;\n  readonly setVerbosityLevel: (level: number) => void;\n\n  constructor(config: LoggerConfig = {}) {\n    const myConfig = MH.merge(\n      {\n        // set defaults\n        verbosityLevel: settings.verbosityLevel,\n        remoteLoggerURL: settings.remoteLoggerURL,\n        remoteLoggerOnMobileOnly: settings.remoteLoggerOnMobileOnly,\n        debugID: randId(),\n      },\n      config,\n    );\n\n    let remoteLoggerURL = \"\";\n    if (\n      !getBooleanURLParam(\"disableRemoteLog\") &&\n      (myConfig.remoteLoggerOnMobileOnly === false || isMobile())\n    ) {\n      remoteLoggerURL = myConfig.remoteLoggerURL || \"\";\n    }\n\n    const name = myConfig.name || \"\";\n    const myConsole = new Console(\n      remoteLoggerURL,\n      myConfig.remoteLoggerConnectTimeout,\n    );\n    // use setters bellow to validate value\n    let verbosityLevel = 0;\n    const logPrefix = `[LISN${name ? \": \" + name : \"\"}]`;\n    const debugID = myConfig.debugID;\n    const debugPrefix = `[LISN${(name ? \": \" + name : \"\") + (debugID ? \"-\" + debugID : \"\")}]`;\n\n    this.getName = () => name;\n\n    this.getVerbosityLevel = () => verbosityLevel;\n    this.setVerbosityLevel = (l) => {\n      verbosityLevel = l;\n    };\n\n    this.setVerbosityLevel(myConfig.verbosityLevel || 0);\n\n    this.debug1 = (...args) => logDebugN(this, 1, debugPrefix, ...args);\n    this.debug2 = (...args) => logDebugN(this, 2, debugPrefix, ...args);\n    this.debug3 = (...args) => logDebugN(this, 3, debugPrefix, ...args);\n    this.debug4 = (...args) => logDebugN(this, 4, debugPrefix, ...args);\n    this.debug5 = (...args) => logDebugN(this, 5, debugPrefix, ...args);\n    this.debug6 = (...args) => logDebugN(this, 6, debugPrefix, ...args);\n    this.debug7 = (...args) => logDebugN(this, 7, debugPrefix, ...args);\n    this.debug8 = (...args) => logDebugN(this, 8, debugPrefix, ...args);\n    this.debug9 = (...args) => logDebugN(this, 9, debugPrefix, ...args);\n    this.debug10 = (...args) => logDebugN(this, 10, debugPrefix, ...args);\n\n    this.debug = (...args) => myConsole.debug(debugPrefix, ...args);\n    this.log = (...args) => myConsole.log(logPrefix, ...args);\n    this.info = (...args) => myConsole.info(logPrefix, ...args);\n    this.warn = (...args) => myConsole.warn(logPrefix, ...args);\n    this.error = (...args) => {\n      myConsole.error(logPrefix, ...args);\n    };\n\n    // --------------------\n    if (\"logAtCreation\" in myConfig) {\n      this.debug6(\"New logger:\", myConfig.logAtCreation);\n    }\n  }\n}\n\nexport type ErrorMatchList = Array<\n  RegExp | string | { new (): Error } | symbol\n>;\n\n// ----------------------------------------\n\nconst logDebugN = (logger: Logger, level: number, ...args: unknown[]) => {\n  if (!MH.isNumber(level)) {\n    args.unshift(level);\n    level = 1;\n    logger.error(MH.bugError(\"Missing logger.debug level\"));\n  }\n\n  if (logger.getVerbosityLevel() < level) {\n    return;\n  }\n\n  logger.debug(`[DEBUG ${level}]`, ...args);\n};\n\nconst isMobile = () => {\n  const regex =\n    /Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n  return regex.test(MC.USER_AGENT);\n};\n\nconst getBooleanURLParam = (name: string) => {\n  const value = getURLParameter(name);\n  return value && (value === \"1\" || MH.toLowerCase(value) === \"true\");\n};\n\nconst getURLParameter = (name: string) => {\n  if (!MH.hasDOM()) {\n    return null;\n  }\n\n  const loc = MH.getDoc().location;\n  if (typeof URLSearchParams !== \"undefined\") {\n    const urlParams = new URLSearchParams(loc.search);\n    return urlParams.get(name);\n  }\n\n  name = MH.strReplace(name, /[[\\]]/g, \"\\\\$&\");\n  const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\n  const match = loc.href.match(regex);\n\n  if (!match) {\n    return null;\n  }\n\n  if (!match[2]) {\n    return \"\";\n  }\n  return decodeURIComponent(MH.strReplace(match[2], /\\+/g, \" \"));\n};\n"],"mappings":"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","ignoreList":[]}