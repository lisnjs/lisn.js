{"version":3,"file":"console.cjs","names":["_localConsole","require","_remoteConsole2","_typeof","o","Symbol","iterator","constructor","prototype","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","name","Array","from","test","isArray","length","e","n","_defineProperties","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","_classCallCheck","_defineProperty","value","i","_toPrimitive","toPrimitive","String","Number","Console","exports","remoteUrl","connectTimeout","remoteConsole","RemoteConsole","reuse","localConsole","LocalConsole","sendLog","level","args","apply","_remoteConsole","debug","_len","arguments","_key","log","_len2","_key2","info","_len3","_key3","warn","_len4","_key4","error","_len5","_key5"],"sources":["../../../src/ts/debug/console.ts"],"sourcesContent":["/**\n * @module Debugging\n */\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { LevelName, ConsoleInterface } from \"@lisn/debug/types\";\nimport { LocalConsole } from \"@lisn/debug/local-console\";\nimport { RemoteConsole } from \"@lisn/debug/remote-console\";\n\n/**\n * Holds a {@link LocalConsole} and optionally a {@link RemoteConsole} and logs\n * to both.\n */\nexport class Console implements ConsoleInterface {\n  readonly debug: LogFunction;\n  readonly log: LogFunction;\n  readonly info: LogFunction;\n  readonly warn: LogFunction;\n  readonly error: LogFunction;\n\n  /**\n   * @param {} remoteUrl         Attempt to use a remote logger at this URL.\n   * @param {} [connectTimeout]  The timeout in ms for a remote connection to\n   *                             be considered failed.\n   *                             See {@link RemoteConsole}.\n   */\n  constructor(remoteUrl?: string, connectTimeout?: number) {\n    let remoteConsole;\n    // RemoteConsole import may be replaced with null by rollup when bundling\n    // production, so check\n    if (remoteUrl) {\n      remoteConsole = RemoteConsole.reuse(remoteUrl, connectTimeout);\n    } else {\n      remoteConsole = null;\n    }\n\n    const localConsole = new LocalConsole();\n    const sendLog = (level: LevelName, args: unknown[]) => {\n      localConsole[level](...args);\n      if (remoteConsole) {\n        remoteConsole[level](...args);\n      }\n    };\n\n    this.debug = (...args) => sendLog(\"debug\", args);\n    this.log = (...args) => sendLog(\"log\", args);\n    this.info = (...args) => sendLog(\"info\", args);\n    this.warn = (...args) => sendLog(\"warn\", args);\n    this.error = (...args) => sendLog(\"error\", args);\n  }\n}\n"],"mappings":"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","ignoreList":[]}