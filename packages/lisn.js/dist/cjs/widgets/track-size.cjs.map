{"version":3,"file":"track-size.cjs","names":["MH","_interopRequireWildcard","require","_sizeWatcher","_widget","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TrackSize","Widget","element","instance","DUMMY_ID","isInstanceOf","register","registerWidget","WIDGET_NAME","constructor","id","SizeWatcher","reuse","trackSize","target","threshold","onDestroy","noTrackSize","exports"],"sources":["../../../src/ts/widgets/track-size.ts"],"sourcesContent":["/**\n * @module Widgets\n */\n\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { SizeWatcher } from \"@lisn/watchers/size-watcher\";\n\nimport { Widget, registerWidget } from \"@lisn/widgets/widget\";\n\n/**\n * This is a simple wrapper around the {@link SizeWatcher}. If you are using\n * the JavaScript API, you should use the {@link SizeWatcher} directly. The\n * purpose of this widget is to expose the watcher's ability to track size\n * and set relevant CSS properties via the HTML API. See\n * {@link SizeWatcher.trackSize}.\n *\n * -----\n *\n * To use with auto-widgets (HTML API) (see\n * {@link Settings.settings.autoWidgets | settings.autoWidgets}), the following\n * CSS classes or data attributes are recognized:\n * - `lisn-track-size` class or `data-lisn-track-size` attribute set on\n *   the element that constitutes the widget.\n *\n * This widget does not support configuration and uses the default\n * {@link SizeWatcher} configuration except for resize threshold equal to 0.\n *\n * @example\n * This will track the size of this element and set the relevant CSS\n * properties. It will use the default {@link SizeWatcher} options and resize\n * threshold of 0.\n *\n * ```html\n * <div class=\"lisn-track-size\"></div>\n * ```\n */\nexport class TrackSize extends Widget {\n  static get(element: Element): TrackSize | null {\n    const instance = super.get(element, DUMMY_ID);\n    if (MH.isInstanceOf(instance, TrackSize)) {\n      return instance;\n    }\n    return null;\n  }\n\n  static register() {\n    registerWidget(WIDGET_NAME, (element) => {\n      if (!TrackSize.get(element)) {\n        return new TrackSize(element);\n      }\n      return null;\n    });\n  }\n\n  constructor(element: Element) {\n    super(element, { id: DUMMY_ID });\n\n    SizeWatcher.reuse().trackSize(null, {\n      target: element,\n      threshold: 0,\n    });\n\n    this.onDestroy(() => SizeWatcher.reuse().noTrackSize(null, element));\n  }\n}\n\n// --------------------\n\nconst WIDGET_NAME = \"track-size\";\n// Only one TrackSize widget per element is allowed, but Widget requires a\n// non-blank ID.\nconst DUMMY_ID = WIDGET_NAME;\n"],"mappings":"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","ignoreList":[]}