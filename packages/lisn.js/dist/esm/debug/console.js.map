{"version":3,"file":"console.js","names":["LocalConsole","RemoteConsole","Console","constructor","remoteUrl","connectTimeout","_defineProperty","remoteConsole","reuse","localConsole","sendLog","level","args","debug","log","info","warn","error"],"sources":["../../../src/ts/debug/console.ts"],"sourcesContent":["/**\n * @module Debugging\n */\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { LevelName, ConsoleInterface } from \"@lisn/debug/types\";\nimport { LocalConsole } from \"@lisn/debug/local-console\";\nimport { RemoteConsole } from \"@lisn/debug/remote-console\";\n\n/**\n * Holds a {@link LocalConsole} and optionally a {@link RemoteConsole} and logs\n * to both.\n */\nexport class Console implements ConsoleInterface {\n  readonly debug: LogFunction;\n  readonly log: LogFunction;\n  readonly info: LogFunction;\n  readonly warn: LogFunction;\n  readonly error: LogFunction;\n\n  /**\n   * @param {} remoteUrl         Attempt to use a remote logger at this URL.\n   * @param {} [connectTimeout]  The timeout in ms for a remote connection to\n   *                             be considered failed.\n   *                             See {@link RemoteConsole}.\n   */\n  constructor(remoteUrl?: string, connectTimeout?: number) {\n    let remoteConsole;\n    // RemoteConsole import may be replaced with null by rollup when bundling\n    // production, so check\n    if (remoteUrl) {\n      remoteConsole = RemoteConsole.reuse(remoteUrl, connectTimeout);\n    } else {\n      remoteConsole = null;\n    }\n\n    const localConsole = new LocalConsole();\n    const sendLog = (level: LevelName, args: unknown[]) => {\n      localConsole[level](...args);\n      if (remoteConsole) {\n        remoteConsole[level](...args);\n      }\n    };\n\n    this.debug = (...args) => sendLog(\"debug\", args);\n    this.log = (...args) => sendLog(\"log\", args);\n    this.info = (...args) => sendLog(\"info\", args);\n    this.warn = (...args) => sendLog(\"warn\", args);\n    this.error = (...args) => sendLog(\"error\", args);\n  }\n}\n"],"mappings":";;;AAAA;AACA;AACA;;AAKA,SAASA,YAAY;AACrB,SAASC,aAAa;;AAEtB;AACA;AACA;AACA;AACA,OAAO,MAAMC,OAAO,CAA6B;EAO/C;AACF;AACA;AACA;AACA;AACA;EACEC,WAAWA,CAACC,SAAkB,EAAEC,cAAuB,EAAE;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACvD,IAAIC,aAAa;IACjB;IACA;IACA,IAAIH,SAAS,EAAE;MACbG,aAAa,GAAGN,aAAa,CAACO,KAAK,CAACJ,SAAS,EAAEC,cAAc,CAAC;IAChE,CAAC,MAAM;MACLE,aAAa,GAAG,IAAI;IACtB;IAEA,MAAME,YAAY,GAAG,IAAIT,YAAY,CAAC,CAAC;IACvC,MAAMU,OAAO,GAAGA,CAACC,KAAgB,EAAEC,IAAe,KAAK;MACrDH,YAAY,CAACE,KAAK,CAAC,CAAC,GAAGC,IAAI,CAAC;MAC5B,IAAIL,aAAa,EAAE;QACjBA,aAAa,CAACI,KAAK,CAAC,CAAC,GAAGC,IAAI,CAAC;MAC/B;IACF,CAAC;IAED,IAAI,CAACC,KAAK,GAAG,CAAC,GAAGD,IAAI,KAAKF,OAAO,CAAC,OAAO,EAAEE,IAAI,CAAC;IAChD,IAAI,CAACE,GAAG,GAAG,CAAC,GAAGF,IAAI,KAAKF,OAAO,CAAC,KAAK,EAAEE,IAAI,CAAC;IAC5C,IAAI,CAACG,IAAI,GAAG,CAAC,GAAGH,IAAI,KAAKF,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;IAC9C,IAAI,CAACI,IAAI,GAAG,CAAC,GAAGJ,IAAI,KAAKF,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;IAC9C,IAAI,CAACK,KAAK,GAAG,CAAC,GAAGL,IAAI,KAAKF,OAAO,CAAC,OAAO,EAAEE,IAAI,CAAC;EAClD;AACF","ignoreList":[]}