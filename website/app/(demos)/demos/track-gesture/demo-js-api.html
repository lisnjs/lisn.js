<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>LISN | Track scroll/zoom gesture: Parallax (JS API)</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <script src="assets/js/lisn.debug.js" charset="utf-8"></script>
    <link
      rel="stylesheet"
      href="assets/css/lisn.css"
      type="text/css"
      media="screen"
      charset="utf-8"
    />

    <link
      rel="stylesheet"
      href="assets/css/common.css"
      type="text/css"
      media="screen"
      charset="utf-8"
    />

    <script charset="utf-8">
      LISN.widgets.PageLoader.enableMain();
    </script>

    <script id="main-js" charset="utf-8">
      document.addEventListener("DOMContentLoaded", () => {
        const main = document.getElementById("demo");
        LISN.watchers.GestureWatcher.reuse().trackGesture(main, null, {
          minTotalDeltaY: 0,
          maxTotalDeltaY: 960,
          minTotalDeltaZ: 1,
          maxTotalDeltaZ: 2.4,
        });
      });
    </script>

    <style id="main-css" type="text/css" media="screen">
      #demo {
        --max-offset: 240px;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #demo .plane {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #demo .plane .spacer,
      #demo .plane .background {
        transition-duration: 0.25s;
        transition-timing-function: linear;
      }

      #demo .plane .background {
        pointer-events: none;
        width: 100%;
        height: calc(100% + var(--max-offset));
        object-fit: cover;
        overflow-clip-margin: unset;
        transition-property: transform;
        transform-origin: 50% 65%;
      }

      #demo .plane .spacer {
        transition-property: height;
        min-height: 0px;
      }

      /* Per-plane transforms */
      #demo .landscape-4 .background {
        margin-top: 0;
        transform: scale(calc(0.05 * var(--lisn-js--zoom-delta-z, 1) + 0.95));
      }

      #demo .landscape-3 .background {
        margin-top: calc(-1 * var(--max-offset) / 3);
        transform: scale(calc(0.2 * var(--lisn-js--zoom-delta-z, 1) + 0.8));
      }

      #demo .landscape-3 .spacer {
        height: calc(
          var(--max-offset) / 3 - 1px * var(--lisn-js--scroll-delta-y, 0) / 12
        );
        max-height: calc(var(--max-offset) / 3);
      }

      #demo .landscape-2 .background {
        margin-top: calc(-1 * var(--max-offset) / 2);
        transform: scale(calc(0.4 * var(--lisn-js--zoom-delta-z, 1) + 0.6));
      }

      #demo .landscape-2 .spacer {
        height: calc(
          var(--max-offset) / 2 - 1px * var(--lisn-js--scroll-delta-y, 0) / 8
        );
        max-height: calc(var(--max-offset) / 2);
      }

      #demo .landscape-1 .background {
        margin-top: calc(-1 * var(--max-offset));
        transform: scale(calc(0.6 * var(--lisn-js--zoom-delta-z, 1) + 0.4));
      }

      #demo .landscape-1 .spacer {
        height: calc(
          var(--max-offset) - 1px * var(--lisn-js--scroll-delta-y, 0) / 4
        );
        max-height: var(--max-offset);
      }

      /* Misc styles */
      #demo h1 {
        text-align: center;
        color: #03505c;
        z-index: 10;
        position: relative;
        font-weight: 400;
        margin-top: 25vh;
        margin-left: 4vw;
        mix-blend-mode: multiply;
      }

      #license {
        margin: 10px 20px;
        color: #6bb6c4;
        font-size: 14px;
      }
    </style>
  </head>
  <body class="dark-theme">
    <main id="main-html">
      <div id="demo">
        <h1>Scroll or zoom</h1>

        <div class="landscape-5 plane">
          <!-- static -->
          <img class="background" src="images/landscape-5.png" alt="" />
        </div>

        <div class="landscape-4 plane">
          <!-- static offset -->
          <img class="background" src="images/landscape-4.png" alt="" />
        </div>

        <div class="landscape-3 plane">
          <div class="spacer"></div>
          <img class="background" src="images/landscape-3.png" alt="" />
        </div>

        <div class="landscape-2 plane">
          <div class="spacer"></div>
          <img class="background" src="images/landscape-2.png" alt="" />
        </div>

        <div class="landscape-1 plane">
          <div class="spacer"></div>
          <img class="background" src="images/landscape-1.png" alt="" />
        </div>
      </div>
    </main>

    <footer>
      <div id="license">
        Image by
        <a href="http://www.freepik.com/" target="_blank">Freepik</a>
      </div>
    </footer>
  </body>
</html>
