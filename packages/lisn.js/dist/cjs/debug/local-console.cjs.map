{"version":3,"file":"local-console.cjs","names":["MC","_interopRequireWildcard","require","MH","_text","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_defineProperty","_toPropertyKey","value","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","LocalConsole","constructor","debug","isiOS","iOSlog","isJest","jestLog","consoleDebug","log","consoleLog","info","consoleInfo","warn","consoleWarn","error","consoleError","exports","includes","USER_AGENT","args","joinAsString"],"sources":["../../../src/ts/debug/local-console.ts"],"sourcesContent":["/**\n * @module Debugging\n */\n\nimport * as MC from \"@lisn/globals/minification-constants\";\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { joinAsString } from \"@lisn/utils/text\";\n\nimport { LevelName, ConsoleInterface } from \"@lisn/debug/types\";\n\n/**\n * Logs to the local browser console. On iOS devices it uses `console.info` for\n * all levels because of a bug in WebKit whereby other log levels don't show in\n * some remote debuggers. Also, iOS console only supports a single argument, so\n * it joins the given arguments as a single string.\n *\n * @category Logging\n */\nexport class LocalConsole implements ConsoleInterface {\n  readonly debug: LogFunction;\n  readonly log: LogFunction;\n  readonly info: LogFunction;\n  readonly warn: LogFunction;\n  readonly error: LogFunction;\n\n  constructor() {\n    this.debug = isiOS ? iOSlog : isJest ? jestLog.debug : MH.consoleDebug;\n    this.log = isiOS ? iOSlog : isJest ? jestLog.log : MH.consoleLog;\n    this.info = isiOS ? iOSlog : isJest ? jestLog.info : MH.consoleInfo;\n    this.warn = isiOS ? iOSlog : isJest ? jestLog.warn : MH.consoleWarn;\n    this.error = isiOS ? iOSlog : isJest ? jestLog.error : MH.consoleError;\n  }\n}\n\n// ------------------------------\n\nconst isiOS = MH.includes(MC.USER_AGENT, \"iPhone OS\") || false;\nconst iOSlog: LogFunction = (...args) =>\n  MH.consoleInfo(joinAsString(\" \", ...args));\n\nconst isJest = MH.includes(MC.USER_AGENT, \" jsdom/\") || false;\nconst jestLog: Record<LevelName, LogFunction> = {\n  debug: (...args) => MH.consoleDebug(joinAsString(\" \", ...args)),\n  log: (...args) => MH.consoleLog(joinAsString(\" \", ...args)),\n  info: (...args) => MH.consoleInfo(joinAsString(\" \", ...args)),\n  warn: (...args) => MH.consoleWarn(joinAsString(\" \", ...args)),\n  error: (...args) => MH.consoleError(joinAsString(\" \", ...args)),\n};\n"],"mappings":"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","ignoreList":[]}