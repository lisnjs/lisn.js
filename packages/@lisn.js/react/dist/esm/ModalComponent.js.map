{"version":3,"file":"ModalComponent.js","names":["createElement","useRef","useEffect","useImperativeHandle","Modal","ModalComponent","_ref","as","children","triggers","config","widgetRef","props","_objectWithoutProperties","_excluded","elementRef","widgetRefInternal","triggerElements","map","r","current","filter","e","HTMLElement","Object","assign","_widgetRefInternal$cu","destroy","getWidget","_objectSpread","ref"],"sources":["../../src/ModalComponent.tsx"],"sourcesContent":["import {\n  createElement,\n  useRef,\n  useEffect,\n  useImperativeHandle,\n  ComponentRef,\n  ElementType,\n  RefObject,\n} from \"react\";\n\nimport { Modal, ModalConfig } from \"lisn.js\";\nimport { WidgetComponentRef, WidgetComponentProps } from \"./types\";\n\nexport type ModalComponentRef = WidgetComponentRef<Modal>;\n\nexport type ModalComponentProps<T extends ElementType> = WidgetComponentProps<\n  T,\n  ModalComponentRef,\n  Omit<ModalConfig, \"triggers\">\n> & {\n  triggers?: RefObject<Element | null>[];\n};\n\nexport const ModalComponent = <T extends ElementType = \"div\">({\n  as,\n  children,\n  triggers,\n  config,\n  widgetRef,\n  ...props\n}: ModalComponentProps<T>) => {\n  const elementRef = useRef<ComponentRef<T>>(null);\n  const widgetRefInternal = useRef<Modal>(null);\n\n  useEffect(() => {\n    const triggerElements = triggers\n      ?.map((r) => r.current)\n      .filter((e) => e !== null);\n\n    if (elementRef.current instanceof HTMLElement) {\n      widgetRefInternal.current = new Modal(\n        elementRef.current,\n        Object.assign(\n          {\n            triggers: triggerElements,\n          },\n          config,\n        ),\n      );\n    }\n\n    return () => {\n      widgetRefInternal.current?.destroy();\n    };\n  }, [triggers, config]);\n\n  useImperativeHandle(widgetRef, () => {\n    return {\n      getWidget: () => widgetRefInternal.current,\n    };\n  });\n\n  return (\n    <>{createElement(as || \"div\", { ref: elementRef, ...props }, children)}</>\n  );\n};\n"],"mappings":";;;;;;;;AAAA,SACEA,aAAa,EACbC,MAAM,EACNC,SAAS,EACTC,mBAAmB,QAId,OAAO;AAEd,SAASC,KAAK,QAAqB,SAAS;AAa5C,OAAO,MAAMC,cAAc,GAAGC,IAAA,IAOA;EAAA,IAPgC;MAC5DC,EAAE;MACFC,QAAQ;MACRC,QAAQ;MACRC,MAAM;MACNC;IAEsB,CAAC,GAAAL,IAAA;IADpBM,KAAK,GAAAC,wBAAA,CAAAP,IAAA,EAAAQ,SAAA;EAER,MAAMC,UAAU,GAAGd,MAAM,CAAkB,IAAI,CAAC;EAChD,MAAMe,iBAAiB,GAAGf,MAAM,CAAQ,IAAI,CAAC;EAE7CC,SAAS,CAAC,MAAM;IACd,MAAMe,eAAe,GAAGR,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAC5BS,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,OAAO,CAAC,CACtBC,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAK,IAAI,CAAC;IAE5B,IAAIP,UAAU,CAACK,OAAO,YAAYG,WAAW,EAAE;MAC7CP,iBAAiB,CAACI,OAAO,GAAG,IAAIhB,KAAK,CACnCW,UAAU,CAACK,OAAO,EAClBI,MAAM,CAACC,MAAM,CACX;QACEhB,QAAQ,EAAEQ;MACZ,CAAC,EACDP,MACF,CACF,CAAC;IACH;IAEA,OAAO,MAAM;MAAA,IAAAgB,qBAAA;MACX,CAAAA,qBAAA,GAAAV,iBAAiB,CAACI,OAAO,cAAAM,qBAAA,eAAzBA,qBAAA,CAA2BC,OAAO,CAAC,CAAC;IACtC,CAAC;EACH,CAAC,EAAE,CAAClB,QAAQ,EAAEC,MAAM,CAAC,CAAC;EAEtBP,mBAAmB,CAACQ,SAAS,EAAE,MAAM;IACnC,OAAO;MACLiB,SAAS,EAAEA,CAAA,KAAMZ,iBAAiB,CAACI;IACrC,CAAC;EACH,CAAC,CAAC;EAEF,OACE,EAAE,CAACpB,aAAa,CAACO,EAAE,IAAI,KAAK,EAAAsB,aAAA;MAAIC,GAAG,EAAEf;IAAU,GAAKH,KAAK,GAAIJ,QAAQ,CAAC,CAAC,GAAG;AAE9E,CAAC","ignoreList":[]}