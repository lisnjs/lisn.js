/*!
 * LISN.js v1.0.2
 * (c) 2025 @AaylaSecura
 * Released under the MIT License.
 */
(i=>{let s="lisn",o="[LISN.js]",h=Object,c=Symbol,d=Array,v=String,f=Function,r=Math,p=Number,N=Promise,C=r.PI,D=Infinity,A="absolute",pt="fixed",rt="width",it="height",gt="top",wt="bottom",Z="up",K="down",nt="left",lt="right",M="at",P="above",I="below",R="in",B="out",W="none",$="ambiguous",L="added",F="removed",V="attribute",H="key",j="mouse",U="pointer",z="touch",Q="wheel",G="click",J="hover",tt="press",et="scroll",mt="zoom",yt="drag",bt="unknown",_t=et+"Top",kt=et+"Left",Et=et+"Width",xt=et+"Height",St="clientWidth",Nt="clientHeight",Tt=et+"TopFraction",Ot=et+"LeftFraction",Ct="horizontal",Dt="vertical",At="debounceWindow",g="toggle",Mt="cancel",Pt=H+K,It=j+Z,Rt=j+K,Bt=U+Z,Wt=U+K,$t=U+"enter",Lt=U+"leave",Ft=U+"move",Vt=U+Mt,Ht=z+"start",jt=z+"end",Ut=z+"move",zt=z+Mt,Gt="dragstart",Xt="dragend",Yt="dragenter",qt="dragover",Zt="selectstart",Kt="attributes",Qt="childList",Jt="reverse",te="draggable",ee="role",re="aria-",ie=re+"controls",ne=s+"-wrapper",le=ne+"-inline",ae=s+"-transition__disable",se=s+"-hide",oe=s+"-show",ue=s+"-display",he=s+"-undisplay",ce=s+"-place",de=s+"-orientation",ve=s+"-position",fe=s+"-ghost",pe=s+"-no-select",ge=s+"-no-touch-action",we=s+"-no-wrap",me=s+"-animate__",ye=me+"disable",be=me+"pause",_e=me+Jt,ke="undefined"==typeof navigator?"":navigator.userAgent,Ee=null!==ke.match(/Mobile|Android|Silk\/|Kindle|BlackBerry|Opera Mini|Opera Mobi/);class xe extends Error{}class Se extends xe{constructor(t=""){super(o+" Incorrect usage: "+t),this.name="LisnUsageError"}}class Ne extends xe{constructor(t=""){super(o+" Please report a bug: "+t),this.name="LisnBugError"}}let Te="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},Oe=t=>t.replace(/[A-Z][a-z]/g,t=>"-"+Me(t)).replace(/[A-Z]+/,t=>"-"+Me(t)),y=t=>s+"-"+t,Ce=t=>"--"+y(t),De=t=>Ce("js--"+t),Ae=t=>"data-"+Oe(t),Me=t=>t.toLowerCase(),Pe=Date.now.bind(Date),Ie=()=>"undefined"!=typeof document,Re=()=>window,x=()=>document,Be=()=>x().documentElement,We=()=>x().scrollingElement,b=()=>x().body,$e=()=>x().readyState,Le=t=>Je(t)?t.pointerType:Qe(t)?"mouse":null,Fe=Ie()?Te.requestAnimationFrame.bind(Te):()=>{},at=(t,e)=>x().createElement(t,e),Ve=(t="",e="button")=>{var r=at(e);return Jr(r),pr(r,ee,"button"),pr(r,re+"label",t),r},He=t=>null==t,je=t=>He(t)||""===t,Ue=t=>Xe(t)&&c.iterator in t,ze=t=>k(t,d),Ge=t=>k(t,h),Xe=t=>null!==t&&"object"===zr(t),Ye=t=>"number"===zr(t),qe=t=>"string"===zr(t)||k(t,v),Ze=t=>"string"===zr(t),Ke=t=>"function"===zr(t)||k(t,f),Qe=t=>k(t,MouseEvent),Je=t=>"undefined"!=typeof PointerEvent&&k(t,PointerEvent),tr=t=>Je(t)&&Le(t)===z,er=t=>"undefined"!=typeof TouchEvent&&k(t,TouchEvent),X=t=>k(t,Element),rr=t=>k(t,HTMLElement),ir=(t,e)=>0!=(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING),nr=(t,e,r)=>t.replace(e,r),lr=Te.setTimeout.bind(Te),ar=Te.clearTimeout.bind(Te),sr=t=>t.getBoundingClientRect(),or=t=>({x:t.x,left:t.left,right:t.right,[rt]:t[rt],y:t.y,top:t.top,bottom:t.bottom,[it]:t[it]}),ur=(t,e)=>t.querySelector(e),hr=(t,e)=>t.querySelectorAll(e),cr=t=>ur(x(),t),dr=t=>hr(x(),t),vr=t=>x().getElementById(t),fr=(t,e)=>t.getAttribute(e),pr=(t,e,r="true")=>t.setAttribute(e,r),gr=(t,e)=>t.setAttribute(e,"false"),wr=(t,e)=>t.removeAttribute(e),Y=(t,e,r)=>0<=t.indexOf(e,r),mr=(t,e)=>t.filter(e),yr=t=>{var e=t?mr(t,t=>!je(t)):void 0;return q(e)?e:void 0},br=t=>{var e;return null!=(e=null==t?void 0:t.size)?e:0},q=t=>{var e;return null!=(e=null==t?void 0:t.length)?e:0},_r=t=>t.tagName,kr=t=>t.preventDefault(),Er=d.from.bind(d),xr=t=>h.keys(t),Sr=h.defineProperty.bind(h),Nr=(...t)=>h.assign({},...t),w=t=>Nr(t),Tr=N.resolve.bind(N),Or=N.all.bind(N),Cr=h.assign.bind(h),Dr=(h.freeze.bind(h),(t,e)=>h.prototype.hasOwnProperty.call(t,e)),Ar=h.preventExtensions.bind(h),Mr=JSON.stringify.bind(JSON),Pr=r.floor.bind(r),Ir=r.ceil.bind(r),Rr=r.log2.bind(r),Br=r.sqrt.bind(r),Wr=r.max.bind(r),$r=r.min.bind(r),Lr=r.abs.bind(r),Fr=r.round.bind(r),Vr=r.pow.bind(r),Hr=p.parseFloat.bind(p),jr=p.isNaN.bind(p),k=(t,e)=>t instanceof e,Ur=t=>t.constructor,zr=t=>typeof t,Gr=t=>{var e;return Ge(t)?null==(e=Ur(t))?void 0:e.name:zr(t)},Xr=t=>(null==t?void 0:t.parentElement)||null,Yr=t=>(null==t?void 0:t.children)||[],qr=t=>null==t?void 0:t.target,Zr=t=>null==t?void 0:t.currentTarget,Kr=t=>null==t?void 0:t.classList,Qr="tabindex",Jr=(t,e="0")=>pr(t,Qr,e),_=t=>null==t?void 0:t.remove(),ti=(t,e)=>delete t[e],E=(t,e)=>null==t?void 0:t.delete(e),ei=(t,e,r="instant")=>t.scrollTo(Nr({behavior:r},e)),ri=t=>new Promise(t),S=t=>new Map(t),ii=t=>new WeakMap(t),ni=t=>new Set(t),li=t=>new WeakSet(t),ai=(t,e)=>new IntersectionObserver(t,e),si=t=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t),oi=t=>new MutationObserver(t),m=t=>new Se(t),ui=t=>new Ne(t),hi=t=>m(`Illegal constructor. Use ${t}.`),ci=console,di=ci.debug.bind(ci),vi=ci.log.bind(ci),fi=ci.info.bind(ci),pi=ci.warn.bind(ci),gi=ci.error.bind(ci),st=Ar({mainScrollableElementSelector:null,contentWrappingAllowed:!0,pageLoadTimeout:2e3,autoWidgets:!1,scrollbarHideNative:!0,scrollbarOnMobile:!1,scrollbarPositionH:"bottom",scrollbarPositionV:"right",scrollbarAutoHide:-1,scrollbarClickScroll:!0,scrollbarDragScroll:!0,scrollbarUseHandle:!1,sameHeightDiffTolerance:15,sameHeightResizeThreshold:5,sameHeightDebounceWindow:100,sameHeightMinGap:30,sameHeightMaxFreeR:.4,sameHeightMaxWidthR:1.7,deviceBreakpoints:{mobile:0,"mobile-wide":576,tablet:768,desktop:992},aspectRatioBreakpoints:{"very-tall":0,tall:9/16,square:.75,wide:4/3,"very-wide":16/9},lightThemeClassName:"light-theme",darkThemeClassName:"dark-theme",deltaLineHeight:40,deltaPageWidth:1600,deltaPageHeight:800,verbosityLevel:0,remoteLoggerURL:null,remoteLoggerOnMobileOnly:!1}),wi=(t,e=0)=>{var r=Vr(10,e);return Fr(t*r)/r},mi=t=>Ye(t)&&p.isFinite(t),yi=(t,e=0)=>{var r=Ze(t)?Hr(t):t;return mi(r)&&r==t?r:e},bi=(t,e=0)=>{var r=null===(r=yi(t,null))?r:Pr(r);return mi(r)&&r==t?r:e},_i=(t,e=0)=>{var r=yi(t,null);return null!==r&&0<=r?r:e},ki=(t,e=0)=>{var r=yi(t,null);return null!==r&&0<r?r:e},Ei=(t,e,r)=>{var i=void 0!==r,n=yi(t,null),l=null!=(l=null==e?void 0:e.min)?l:null,a=null!=(a=null==e?void 0:e.max)?a:null;return mi(n)?null!==l&&n<l?i?r:l:null!==a&&a<n?i?r:a:n:i?r:null!=(n=null!=l?l:a)?n:0},xi=(...t)=>Wr(...t.map(t=>Lr(t))),Si=(...t)=>q(t)?t.sort((t,e)=>Lr(e)-Lr(t))[0]:-D,Ni=(t,e)=>Ti(r.atan2(e,t)),Ti=t=>{for(;t<0||t>2*C;)t+=(t<0?1:-1)*C*2;return t>C?t-2*C:t},Oi=t=>t*C/180,Ci=(t,e,r=0)=>{var i=Ni(t[0],t[1]),n=Ni(e[0],e[1]);return r=$r(89.99,Lr(r)),Lr(Ti(i-n))<=Oi(r)},Di=(t,e,r=0)=>Ci(t,[-e[0],-e[1]],r),Ai=(t,e)=>Br(Vr(t[0]-e[0],2)+Vr(t[1]-e[1],2)),Mi=(t,e,r)=>{var i=Br(e*e-4*t*r);return[(-e+i)/(2*t),(-e-i)/(2*t)]},Pi=t=>t<.5?2*t*t:1-Vr(-2*t+2,2)/2,Ii=(r,t=!1)=>t?xr(r).sort((t,e)=>r[e]-r[t]):xr(r).sort((t,e)=>r[t]-r[e]),Ri=t=>Ii(t).slice(-1)[0],Bi=(t,e)=>e<t?Bi(e,t):-1>>>32-e-1+t<<t,Wi=(t,e)=>{for(var r in e)Dr(e,r)&&r in t&&(Xe(t[r])&&Xe(e[r])?Wi(t[r],e[r]):e[r]=t[r])},$i=(t,e)=>{let r={},i;for(i in t)i in e||(r[i]=t[i]);return r},Li=(t,e,r=3)=>{for(var i in t)if(Dr(t,i)){var n=t[i],i=e[i];if(Xe(n)&&Xe(i)){if(!Li(n,i))return!1}else if(Ye(n)&&Ye(i)){if(wi(n,r)!==wi(i,r))return!1}else if(n!==i)return!1}return!0},Fi=t=>ze(t)?t:He(t)?[]:[t],Vi=t=>!0===t||"true"===t||""===t||!He(t)&&!1!==t&&"false"!==t&&null,Hi=(t,e)=>{var r=Qi(t,!1);return!He(e)&&0<e&&q(r)>e?r.slice(0,Wr(0,e-3))+"...":r},ji=(t,...e)=>e.map(t=>Hi(t)).join(t),Ui=(r,i,e,t)=>{if(!r.trim())return[];t=null!=t?t:-1;let n=[];for(var l,a,s=t=>n.push(e?t.trim():t);t--;){let t=-1,e;if(e=Ze(i)?(t=r.indexOf(i),q(i)):(a=i.exec(r),t=null!=(l=null==a?void 0:a.index)?l:-1,a?q(a[0]):0),t<0)break;s(r.slice(0,t)),r=r.slice(t+e)}return s(r),n},zi=t=>t.replace(/-./g,t=>t.charAt(1).toUpperCase()),Gi=Oe,Xi=(t=8)=>{let e="";for(;q(e)<t;)e+=Pr(1e5+9e5*r.random()).toString(36);return e.slice(0,t)},Yi=(t,i)=>{var e,r=(t,e)=>{let r=Hr(t||"")||0;return t===r+"%"&&(r*=e%2?i[it]:i[rt]),r},n=Ui(t," ",!0);return[r(n[0],0),r(null!=(e=n[1])?e:n[0],1),r(null!=(e=n[2])?e:n[0],2),r(null!=(r=null!=(e=n[3])?e:n[1])?r:n[0],3)]},qi=t=>Mr(Zi(t)),Zi=e=>(ze(e)?e:xr(e).sort().map(t=>e[t])).map(t=>ze(t)||Xe(t)&&Ur(t)===h?Zi(t):t),Ki=(t,e)=>t?Qi(e,!0):e,Qi=(t,e)=>{var r;return X(t)?(r=Kr(t).toString().trim(),t.id?"#"+t.id:`<${_r(t)}${r?' class="'+r+'"':""}>`):k(t,Error)?"stack"in t&&qe(t.stack)?t.stack:"Error: "+t.message:ze(t)?"["+t.map(t=>qe(t)?Mr(t):Qi(t,!1)).join(",")+"]":Ue(t)?Gr(t)+"("+Qi(Er(t),!1)+")":Xe(t)?e?t:Mr(t,Ki):e?t:v(t)},Ji=(t,e,r=!0)=>{try{var i=u("",t,e);return r||!He(i)}catch(t){if(k(t,Se))return!1;throw t}},u=(e,t,r)=>{var i;return yr(null==(i=nn(t))?void 0:i.map(t=>sn(e,t,r,"a string or a string array")))},tn=(e,t)=>{var r;return yr(null==(r=nn(t))?void 0:r.map(t=>ln(e,t,"a number or a number array")))},n=(t,e)=>ln(t,e),t=(t,e)=>an(t,e),l=(t,e,r)=>sn(t,e,r),en=(t,e,r)=>{var i=sn(t,e,r);if(je(i))throw m(`'${t}' is required`);return i},rn=(t,e,r)=>{var i=t,n=e,l=r;if(!He(n)){var a=Vi(n);if(null!==a)return a;if(Ze(n))return sn(i,n,l);throw m(`'${i}' must be a boolean or string`)}},nn=t=>{var e;return(e=ze(t)?t:Ue(t)?Er(t):Ze(t)?Ui(t,","):He(t)?null:[t])?yr(e.map(t=>Ze(t)?t.trim():t)):void 0},ln=(t,e,r)=>{if(!He(e)){var i=yi(e,null);if(null===i)throw m(`'${t}' must be `+(null!=r?r:"a number"));return i}},an=(t,e,r)=>{if(!He(e)){var i=Vi(e);if(null===i)throw m(`'${t}' must be "true" or "false"`);return i}},sn=(t,e,r,i)=>{if(!He(e)){if(!Ze(e))throw m(`'${t}' must be `+(null!=i?i:"a string"));if(r&&!r(e))throw m(`Invalid value for '${t}'`);return e}};class on{constructor(){let e=cn();this.create=(...t)=>dn(e,t),Sr(this,"nBits",{get:()=>e.t}),Sr(this,"bitmask",{get:()=>e.i})}}let un=()=>new on,hn=(t,...e)=>t.create(...e),cn=()=>({t:0,i:0}),dn=(t,r)=>{let n=t.t,l=n+q(r)-1;if(31<=l)throw m("BitSpaces overflow");var e,i=Bi(n,l);let a={bit:{},start:n,end:l,bitmask:i,has:t=>qe(t)&&t in a.bit&&Ye(a.bit[t]),bitmaskFor:(t,e)=>{var r,i;return!je(t)&&!a.has(t)||!je(e)&&!a.has(e)?0:(r=je(t)?n:Rr(a.bit[t]),i=je(e)?l:Rr(a.bit[e]),Bi(r,i))},nameOf:t=>{var e;return null!=(e=r[Rr(t)-n])?e:null}};for(e of r)Sr(a.bit,e,{value:1<<t.t++,enumerable:!0});return t.i|=i,a},vn=t=>fn.has(t),fn=hn(un(),L,F,V);function pn(t,e,r){var i;(e="symbol"==typeof(i=(t=>{if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);e=e.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(e))?i:i+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}let gn=e=>{if("undefined"!=typeof scheduler)scheduler.postTask(e,{priority:"user-blocking"});else{let t=new MessageChannel;t.port1.onmessage=()=>{t.port1.close(),e()},t.port2.postMessage("")}},wn=(e,r)=>{if(!e)return r;let i=null,n;return(...t)=>{n=t,null===i&&(i=lr(async()=>{await r(...n),i=null},e))}},mn=e=>ri(t=>{lr(t,e)});class yn{constructor(){this.debug=bn?_n:kn?En.debug:di,this.log=bn?_n:kn?En.log:vi,this.info=bn?_n:kn?En.info:fi,this.warn=bn?_n:kn?En.warn:pi,this.error=bn?_n:kn?En.error:gi}}let bn=Y(ke,"iPhone OS")||!1,_n=(...t)=>fi(ji(" ",...t)),kn=Y(ke," jsdom/")||!1,En={debug:(...t)=>di(ji(" ",...t)),log:(...t)=>vi(ji(" ",...t)),info:(...t)=>fi(ji(" ",...t)),warn:(...t)=>pi(ji(" ",...t)),error:(...t)=>gi(ji(" ",...t))},xn=t=>new Cn(t),Sn=t=>()=>xn(t),Nn=t=>new Dn(t),Tn=t=>()=>Nn(t);class On{constructor(i,r){this.get=t=>i.get(t),this.set=(t,e)=>i.set(t,e),this.delete=t=>E(i,t),this.has=t=>i.has(t),this.sGet=t=>{let e=i.get(t);return void 0===e&&(e=r(t),i.set(t,e)),e},this.prune=(t,...e)=>{var r=i.get(t);r instanceof On&&q(e)&&r.prune(e[0],...e.slice(1)),(void 0===r||Ue(r)&&!("size"in r&&r.size||"length"in r&&r.length))&&E(i,t)}}}class Cn extends On{constructor(t){let e=S();super(e,t),Sr(this,"size",{get:()=>e.size}),this.clear=()=>e.clear(),this.entries=()=>e.entries(),this.keys=()=>e.keys(),this.values=()=>e.values(),this[c.iterator]=()=>e[c.iterator]()}}pn(Cn,"newXMapGetter",Sn);class Dn extends On{constructor(t){super(ii(),t)}}pn(Dn,"newXWeakMapGetter",Tn);class An{constructor(n,l=Pn){let a=!1,s=!1,o=[],u=(t,e)=>{o.push([t,e])},h=()=>{},c=(this.hasFailed=()=>a,this.debug=(...t)=>u("debug",t),this.log=(...t)=>u("log",t),this.info=(...t)=>u("info",t),this.warn=(...t)=>u("warn",t),this.error=(...t)=>u("error",t),this.destroy=()=>h(),()=>{var t;a=!0,u=(t,e)=>{},o=[],(null==(t=Mn.get(n))?void 0:t.get(l))===this&&(E(Mn.get(n),l),Mn.prune(n))});(async()=>{let t;try{t=await Promise.resolve().then(function(){return Op})}catch(t){return!c()}let r=t.io(n),e=lr(()=>{a=!0},l),i;for(r.on("disconnect",()=>{ar(e),s||(e=lr(()=>{a=!0},l))}),r.on("connect",()=>{ar(e),a=!1}),u=(t,e)=>{a||r.emit("console."+t,ji(" ",...e))},h=()=>{s=!0,r.disconnect(),c()};i=o.shift();)u(i[0],i[1])})()}static reuse(t,e=Pn){let r,i=null==(r=Mn.get(t))?void 0:r.get(e);return i||(i=new An(t,e),Mn.sGet(t).set(e,i)),i}}let Mn=xn(()=>S()),Pn=1500;class In{constructor(t,e){let r,i=(r=t?An.reuse(t,e):null,new yn),n=(t,e)=>{i[t](...e),r&&r[t](...e)};this.debug=(...t)=>n("debug",t),this.log=(...t)=>n("log",t),this.info=(...t)=>n("info",t),this.warn=(...t)=>n("warn",t),this.error=(...t)=>n("error",t)}}class Rn{constructor(t={}){let e=Nr({verbosityLevel:st.verbosityLevel,remoteLoggerURL:st.remoteLoggerURL,remoteLoggerOnMobileOnly:st.remoteLoggerOnMobileOnly,debugID:Xi()},t),r="",i=($n("disableRemoteLog")||!1!==e.remoteLoggerOnMobileOnly&&!Wn()||(r=e.remoteLoggerURL||""),e.name||""),n=new In(r,e.remoteLoggerConnectTimeout),l=0,a=`[LISN${i?": "+i:""}]`,s=e.debugID,o=`[LISN${(i?": "+i:"")+(s?"-"+s:"")}]`;this.getName=()=>i,this.getVerbosityLevel=()=>l,this.setVerbosityLevel=t=>{l=t},this.setVerbosityLevel(e.verbosityLevel||0),this.debug1=(...t)=>Bn(this,1,o,...t),this.debug2=(...t)=>Bn(this,2,o,...t),this.debug3=(...t)=>Bn(this,3,o,...t),this.debug4=(...t)=>Bn(this,4,o,...t),this.debug5=(...t)=>Bn(this,5,o,...t),this.debug6=(...t)=>Bn(this,6,o,...t),this.debug7=(...t)=>Bn(this,7,o,...t),this.debug8=(...t)=>Bn(this,8,o,...t),this.debug9=(...t)=>Bn(this,9,o,...t),this.debug10=(...t)=>Bn(this,10,o,...t),this.debug=(...t)=>n.debug(o,...t),this.log=(...t)=>n.log(a,...t),this.info=(...t)=>n.info(a,...t),this.warn=(...t)=>n.warn(a,...t),this.error=(...t)=>{n.error(a,...t)},"logAtCreation"in e&&this.debug6("New logger:",e.logAtCreation)}}let Bn=(t,e,...r)=>{Ye(e)||(r.unshift(e),e=1,t.error(ui("Missing logger.debug level"))),t.getVerbosityLevel()<e||t.debug(`[DEBUG ${e}]`,...r)},Wn=()=>/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ke),$n=t=>{var e=Ln(t);return e&&("1"===e||"true"===Me(e))},Ln=t=>{if(!Ie())return null;var e=x().location;if("undefined"!=typeof URLSearchParams)return new URLSearchParams(e.search).get(t);t=nr(t,/[[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),e=e.href.match(r);return e?e[2]?decodeURIComponent(nr(e[2],/\+/g," ")):"":null};var ot={Logger:Rn};let T=(e,t=0)=>{let r=Ke(e),i=()=>!1;if(r){var n=Vn.get(e);if(n)return T(n)}else i=e.isRemoved;let l=r?e:(...t)=>e.invoke(...t),a=new Fn(wn(t,(...t)=>{if(!i())return l(...t)}));return r||e.onRemove(a.remove),a};class Fn{constructor(n){let l=ot?new ot.Logger({name:"Callback",logAtCreation:n}):null,a=!1,s=c(),e=ni();this.isRemoved=()=>a,this.remove=()=>{if(null!=l&&l.debug8("Removing"),!a){a=!0;for(var t of e)t();Hn.l(s)}},this.onRemove=t=>e.add(t),this.invoke=(...i)=>ri((e,r)=>{null!=l&&l.debug8("Calling with",i),a?r(m("Callback has been removed")):Hn.o(s,async()=>{let t;try{t=await n(...i)}catch(t){r(t)}t===Fn.REMOVE&&this.remove(),e()},r)}),Vn.set(this.invoke,this)}}pn(Fn,"KEEP",c("KEEP")),pn(Fn,"REMOVE",c("REMOVE")),pn(Fn,"wrap",T);let Vn=ii(),Hn=(()=>{let n=S();return{l:t=>{var e,r=n.get(t);if(r){for(;e=r.shift();)e.u||e.h(Fn.REMOVE);E(n,t)}},o:(t,e,r)=>{let i=n.get(t);i||(i=[],n.set(t,i)),i.push({v:e,h:r,u:!1}),1===q(i)&&(async t=>{for(await 0;q(t);)t[0].u=!0,await t[0].v(),t.shift()})(i)}}})(),jn=(...t)=>{zn(t)||pi(o,...t)},O=(...t)=>{(1<q(t)||t[0]!==Fn.REMOVE)&&!zn(t)&&gi(o,...t)},Un=ni(),zn=t=>{var e=ji(" ",...t),r=Un.has(e);return Un.add(e),r},ut=()=>ri(t=>{Kn(qn,t)}),ht=()=>ri(t=>{Kn(Yn,t)}),Gn=()=>ut().then(ht).then(ut),Xn=()=>ht().then(ut).then(ht),Yn=[],qn=[],Zn=!1,Kn=(t,e)=>{t.push(e),Zn||(Zn=!0,Fe(Qn))},Qn=async()=>{for(;q(qn);)await!Jn(qn);gn(async()=>{for(;q(Yn);)await!Jn(Yn);q(qn)?Fe(Qn):Zn=!1})},Jn=t=>{for(var e;e=t.shift();)try{e()}catch(t){O(t)}},tl=t=>mr([...Yr(t)],t=>el(_r(t))),el=t=>!Y(["script","style"],Me(t)),rl=t=>nl.has(t.toLowerCase()),il=t=>rr(t)||k(t,SVGElement)||"undefined"!=typeof MathMLElement&&k(t,MathMLElement),nl=ni(["a","abbr","acronym","b","bdi","bdo","big","button","cite","code","data","dfn","em","i","img","input","kbd","label","mark","map","object","output","q","rp","rt","ruby","s","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","u","var"]),ll=(t,e,r)=>{Zl(t,e,r);let i=!1;return yl(t,e)&&(i=!0,bl(t,e)),yl(t,r)||(ct(t,r),i=!0),i},al=async(t,e,r,i=0)=>{var n,l=Kl(t,r);return i&&await mn(i),await ut(),!l.p()&&(n=ll(t,e,r),l.g(),!!n)&&((l=await Hl(t))&&await mn(l),!0)},sl=t=>ll(t,he,ue),ol=(t,e=0)=>al(t,he,ue,e),ul=t=>ll(t,ue,he),hl=(t,e=0)=>al(t,ue,he,e),cl=t=>ll(t,se,oe),dl=(t,e=0)=>al(t,se,oe,e),vl=t=>ll(t,oe,se),fl=(t,e=0)=>al(t,oe,se,e),pl=(t,e=0)=>(ml(t)?ol:hl)(t,e),gl=(t,e=0)=>(wl(t)?dl:fl)(t,e),wl=t=>yl(t,se),ml=t=>yl(t,he),yl=(t,e)=>Kr(t).contains(e),ct=(t,...e)=>Kr(t).add(...e),dt=(t,...e)=>ut().then(()=>ct(t,...e)),bl=(t,...e)=>Kr(t).remove(...e),_l=(t,...e)=>ut().then(()=>bl(t,...e)),kl=(t,e,r)=>Kr(t).toggle(e,r),El=(t,e,r)=>ut().then(()=>kl(t,e,r)),xl=(t,e)=>fr(t,Ae(e)),Sl=(t,e)=>{var r=xl(t,e);return null!==r&&"false"!==r},Nl=(t,e,r)=>pr(t,Ae(e),r),Tl=(t,e,r)=>ut().then(()=>Nl(t,e,r)),Ol=(t,e,r=!0)=>pr(t,Ae(e),r+""),Cl=(t,e,r=!0)=>ut().then(()=>Ol(t,e,r)),Dl=(t,e)=>gr(t,Ae(e)),Al=(t,e)=>ut().then(()=>Dl(t,e)),Ml=(t,e)=>wr(t,Ae(e)),Pl=(t,e)=>ut().then(()=>Ml(t,e)),Il=(t,e)=>getComputedStyle(t).getPropertyValue(e),Rl=(t,e)=>ht().then(()=>Il(t,e)),Bl=(t,e)=>{var r;return null==(r=t.style)?void 0:r.getPropertyValue(e)},Wl=(t,e)=>ht().then(()=>Bl(t,e)),$l=(t,e,r)=>{var i;return null==(i=t.style)?void 0:i.setProperty(e,r)},Ll=(t,e,r)=>ut().then(()=>$l(t,e,r)),Fl=(t,e)=>{var r;return null==(r=t.style)?void 0:r.removeProperty(e)},Vl=(t,e)=>ut().then(()=>Fl(t,e)),Hl=async t=>{var e=await Rl(t,"transition-duration");return Wr(...Ui(e,",",!0).map(t=>{let e=Hr(t)||0;return t===e+"s"&&(e*=1e3),e}))},jl=async(t,e=0)=>{await dt(t,ae),e&&await mn(e),await Gn(),bl(t,ae)},Ul=()=>Cl(b(),Yl),zl=()=>Pl(b(),Yl),Gl=async(t,e,r)=>{if(il(t)&&il(e)){await ht();var i={};if(r)for(var n of r)i[n]=Il(t,n);var l,a,s=t.style;for(l in s){var o=s.getPropertyValue(l);o&&(i[l]=o)}for(a in i)Ll(e,a,i[a]);dt(e,...Kr(t))}},Xl=async(l,a,s={})=>{if(il(l)){var o,u=s._transformFn,h=De((null==s?void 0:s.m)||"");for(o in a){let t,e,r,i=""+h+Gi(o),n;null===(n=mi(a[o])?(n=a[o],e=null!=(t=null==s?void 0:s._)?t:0<n&&n<1?2:0,u&&(r=Hr(await Wl(l,i)),n=u(o,r||0,n)),wi(n,e)):null)?Vl(l,i):Ll(l,i,n+((null==s?void 0:s.k)||""))}}},Yl=y("has-modal"),ql=ii(),Zl=(t,...e)=>{var r=ql.get(t);if(r)for(var i of e){i=r[i];i&&i.S()}},Kl=(t,e)=>{let r=ql.get(t),i=(r||(r={},ql.set(t,r)),!1);return r[e]={S:()=>{i=!0,ti(r,e)},g:()=>{ti(r,e)},p:()=>i},r[e]},Ql=(t,e)=>{var r=ba(t,null==e?void 0:e.wrapper);return!0===(null==e?void 0:e.ignoreMove)&&(fa(t,{from:Xr(t),to:r}),fa(r,{to:Xr(t)})),t.replaceWith(r),r.append(t),r},Jl=async(t,e)=>ut().then(()=>Ql(t,e)),ta=(t,e)=>{var r=ba(t,null==e?void 0:e.wrapper);return la(t,r,{ignoreMove:!0}),aa(r,{to:t,ignoreMove:!0}),r},ea=async(t,e)=>ut().then(()=>ta(t,e)),ra=(t,e,r)=>{!0===(null==r?void 0:r.ignoreMove)&&(fa(t,{from:Xr(t)}),fa(e,{from:Xr(e),to:Xr(t)})),t.replaceWith(e)},ia=(t,e,r)=>{var i=at("div");ra(t,i,r),ra(e,t,r),ra(i,e,r)},na=async(t,e,r)=>ut().then(()=>ia(t,e,r)),la=(t,e,r)=>{if(!0===(null==r?void 0:r.ignoreMove))for(var i of Yr(t))fa(i,{from:t,to:e});e.append(...Yr(t))},aa=(t,e)=>{let r=(null==e?void 0:e.to)||null,i=(null==e?void 0:e.position)||"append";"before"!==i&&"after"!==i||(r=Xr(null==e?void 0:e.to)),!0===(null==e?void 0:e.ignoreMove)&&fa(t,{from:Xr(t),to:r}),null!=e&&e.to?e.to[i](t):_(t)},sa=async(t,e)=>ut().then(()=>aa(t,e)),oa=async(t,e=0,r)=>{await fl(t,e),aa(t,r)},ua=(t,e="")=>{let r=t.id;return r||(r=e+"-"+Xi(),t.id=r),r},ha=async t=>{await ut();let e,r=Yr(t)[0];return 1===q(Yr(t))&&rr(r)&&yl(r,ma)?e=r:(e=ta(t,{}),ct(e,ma)),e},ca=t=>{var e=t.cloneNode(!0);return Cl(e,y("clone")),e},da=(t,e=null)=>{var r=ca(t),i=(r.id="",ct(r,fe,ae,ye),Ql(r));return ct(i,ne),aa(i,{to:e||t,position:"before",ignoreMove:!0}),{N:i,T:r}},va=(t,e=null)=>ut().then(()=>da(t,e)),fa=(t,e)=>ya.set(t,{from:e.from||null,to:e.to||null}),pa=t=>ya.get(t)||null,ga=t=>{lr(()=>{E(ya,t)},100)},wa=(t,e,r="append",i="span")=>{var n=at(i);return ct(n,y("arrow")),Nl(n,y("direction"),e),sa(n,{to:t,position:r,ignoreMove:!0}),n},ma=y("content-wrapper"),ya=S(),ba=(t,e)=>{var r;return X(e)?e:(r=e||(rl(_r(t))?"span":"div"),at(r))},_a=(i,n)=>ri(e=>{let t=()=>{var t=i();return!He(t)&&(e(t),!0)};if(t())return;He(n)||lr(()=>{e(null),r.disconnect()},n);let r=oi(()=>{t()&&r.disconnect()});r.observe(Be(),{childList:!0,subtree:!0})}),ka=t=>ri(e=>{let r=!1;_a(()=>r||t()).then(t=>{r||e(t)}),Ea().then(()=>{r=!0,e(null)})}),Ea=()=>ri(t=>{var e=$e();e===Ta||e===Na?t():x().addEventListener("DOMContentLoaded",()=>t())}),xa=()=>ri(t=>{$e()===Na?t():x().addEventListener("readystatechange",()=>{$e()===Na&&t()})}),Sa=()=>ri(r=>{if(!Oa)return Ea().then(()=>{let t=null,e=()=>{Oa=!0,t&&(ar(t),t=null),r()};0<st.pageLoadTimeout&&(t=lr(()=>{e()},st.pageLoadTimeout)),xa().then(e)});r()}),Na="complete",Ta="interactive",Oa=!1;Ie()?Sa():Oa=!0;class Ca{static create(t={}){return new Ca(Ma(t),Da)}static reuse(t={}){let e,r=Ma(t),i=qi($i(r,{O:null})),n=r.O===b()?null:r.O,l=null==(e=Aa.get(n))?void 0:e.get(i);return l||(l=new Ca(r,Da),Aa.sGet(n).set(i,l)),l}constructor(c,t){if(t!==Da)throw hi("DOMWatcher.create");let d=ot?new ot.Logger({name:"DOMWatcher",logAtCreation:c}):null,v=xn(t=>({C:t,D:0,A:ni(),M:null,P:null})),f=S(),a=null,p=t=>{null!=d&&d.debug9(`Got ${t.length} new records`,t);for(var e of t){var r=qr(e),i=e.type;if(X(r))if(i===Qt){for(var n of e.addedNodes)X(n)&&((n=v.sGet(n)).M=r,n.D|=Ia);for(var l of e.removedNodes)X(l)&&((l=v.sGet(l)).P=r,l.D|=Ra)}else i===Kt&&e.attributeName&&((i=v.sGet(r)).A.add(e.attributeName),i.D|=Ba)}!a&&br(v)&&(a=lr(()=>{null!=d&&d.debug9(`Processing ${v.size} operations`);for(var t of v.values())y(t)?null!=d&&d.debug10("Skipping operation",t):s(t);v.clear(),a=null},0))},g={childList:{I:oi(p),R:!1},attributes:{I:oi(p),R:!1}},s=t=>{null!=d&&d.debug10("Processing operation",t);for(var e of f.values()){var r=e.B.D,i=e.B.C,n=e.B.W;if(t.D&r){var l=[];if(i){if(!t.C.contains(i)){null!=d&&d.debug10("Target does not match",i);continue}l.push(i)}if(n){i=[...hr(t.C,n)];if(t.C.matches(n)&&i.push(t.C),!q(i)){null!=d&&d.debug10("Selector does not match: "+n);continue}l.push(...i)}La(e.$,t,l)}else null!=d&&d.debug10("Category does not match: "+r)}},w=(t,e)=>{g[e].R||(null!=d&&d.debug3(`Activating mutation observer for '${e}'`),g[e].I.observe(t,{[e]:!0,subtree:c.L}),g[e].R=!0)},m=t=>{g[t].R&&(null!=d&&d.debug3(`Disconnecting mutation observer for '${t}'`),g[t].I.disconnect(),g[t].R=!1)},y=t=>{var e,r,i,n,l=t.C,a=pa(l);return!(!a||(e=t.P,r=Xr(l),i=a.from,a=a.to,n=c.O||b(),e!==i&&n.contains(i))||r!==a||(ga(l),0))};this.ignoreMove=fa,this.onMutation=async(t,e)=>{var r,i,n=Wa(e||{}),l=(r=t,o=n,_(null==(i=f.get(r))?void 0:i.$),null!=d&&d.debug5("Adding/updating handler",o),(i=T(r)).onRemove(()=>(t=>{E(f,t);let e=0;for(var r of f.values())e|=r.B.D;e&(Ia|Ra)||m(Qt),e&Ba||m(Kt)})(r)),f.set(r,{$:i,B:o}),i);let a=c.O||b();if(a?await 0:a=await _a(b),!l.isRemoved()&&(n.D&(Ia|Ra)&&w(a,Qt),n.D&Ba&&w(a,Kt),null==e||!e.skipInitial)&&n.W&&n.D&Ia){var s,o=g[Qt].I.takeRecords();p(o);for(s of[...hr(a,n.W),...a.matches(n.W)?[a]:[]]){var u={C:s,D:Ia,A:ni(),M:Xr(s),P:null},h=v.get(s),u=$a(u,h);u&&(y(u)?null!=d&&d.debug10("Skipping operation",u):(null!=d&&d.debug5("Calling initially with",u),await La(l,u)))}}},this.offMutation=t=>{var e;null!=d&&d.debug5("Removing handler"),_(null==(e=f.get(t))?void 0:e.$)}}}let Da=c(),Aa=xn(()=>S()),Ma=t=>{var e;return{O:t.root||null,L:null==(e=t.subtree)||e}},Pa=fn.bit,Ia=Pa[L],Ra=Pa[F],Ba=Pa[V],Wa=t=>{let e=0,r=u("categories",t.categories,fn.has);if(r)for(var i of r)e|=Pa[i];else e=fn.bitmask;var n=t.selector||"";if(qe(n))return{D:e,C:t.target||null,W:t.selector||""};throw m("'selector' must be a string")},$a=(t,e)=>{if(!e||t.C!==e.C)return t;var r,i=ni();for(r of t.A)e.A.has(r)||i.add(r);var n=t.D^e.D,l=t.M===e.M?null:t.M,a=t.P===e.P?null:t.P;return br(i)||n||l||a?{C:t.C,D:n,A:i,M:l,P:a}:null},La=(t,e,r=[])=>{for(var i of r=q(r)?r:[e.C])t.invoke({target:e.C,currentTarget:i,attributes:e.A,addedTo:e.M,removedFrom:e.P}).catch(O)},Fa=(t,e)=>Lr(t)||Lr(e)?Lr(t)===Lr(e)?$:Lr(t)>Lr(e)?t<0?nt:lt:e<0?Z:K:W,Va=(t,e=0)=>(e=$r(44.99,Lr(e)),xi(...t)?Ci(t,[1,0],e)?lt:Ci(t,[0,1],e)?K:Ci(t,[-1,0],e)?nt:Ci(t,[0,-1],e)?Z:$:W),Ha=t=>{if(t in Za)return Za[t];throw m("Invalid 'direction'")},ja=t=>{var e=u("directions",t,Ua);if(!e)throw m("'directions' is required");var r,i=[];for(r of e){var n=Ha(r);n&&Ua(n)&&!Y(e,n)&&i.push(n)}if(!q(i))for(var l of Ga)Y(e,l)||i.push(l);return i},Ua=t=>Y(Ga,t),za=t=>Y(qa,t),Ga=[Z,K,nt,lt],Xa=[R,B],Ya=[...Ga,W,$],qa=[...Ga,...Xa,W,$],Za={[Z]:K,[K]:Z,[nt]:lt,[lt]:nt,in:B,out:R,[W]:null,[$]:null},Ka=(t,e)=>{(Ke(t)?t:t.handleEvent).call(e.currentTarget||self,e)},vt=(e,r,i,n={})=>{if(r=ss(r),ns(e,r,i,n))return!1;let t=n,l=i,a,s=ts();return Xe(n)&&(s.F||(t=null!=(a=n.capture)&&a),n.once)&&!s.B.once&&(l=t=>{ft(e,r,i,n),Ka(i,t)}),as(e,r,i,n,{V:l,H:t}),e.addEventListener(r,l,t),!0},ft=(t,e,r,i={})=>{e=ss(e);var n=ns(t,e,r,i);return!!n&&(t.removeEventListener(e,n.V,n.H),ls(t,e,r,i),!0)},Qa=t=>{vt(t,Zt,kr),X(t)&&dt(t,pe)},Ja=t=>{ft(t,Zt,kr),X(t)&&_l(t,pe)},ts=()=>{if(es)return es;let e={j:!1,F:!1,B:{capture:!1,passive:!1,once:!1,signal:!1}},r={},i;for(i in e.B){let t=i;Sr(r,t,{get:()=>(e.B[t]=!0,"signal"===t&&(new AbortController).signal)})}var t=()=>{},n=at("div");try{n.addEventListener("testOptionSupport",t,r),n.removeEventListener("testOptionSupport",t,r),e.F=!0}catch(t){}return e.j="onpointerup"in n,es=e},es,rs=Nn(Sn(Sn(()=>S()))),is=t=>{var e={capture:!1,passive:!1,once:!1};return!1===t||!0===t?e.capture=t:Ge(t)&&Wi(t,e),Mr(e)},ns=(t,e,r,i)=>{var n,l=is(i);return null==(n=rs.get(t))||null==(n=n.get(e))||null==(n=n.get(r))?void 0:n.get(l)},ls=(t,e,r,i)=>{var n,l=is(i);E(null==(n=rs.get(t))||null==(n=n.get(e))?void 0:n.get(r),l),rs.prune(t,e,r)},as=(t,e,r,i,n)=>{var l=is(i);rs.sGet(t).sGet(e).sGet(r).set(l,n)},ss=t=>{var e=ts();return t.startsWith(U)&&!e.j?nr(t,U,j):t},os=t=>Y(cs,t),us=t=>Y(ds,t),hs=(t,e)=>Wr(vs,t*e),cs=[H,U,z,Q],ds=[et,mt,yt,bt],vs=.1,fs=(t,e)=>{Ue(t)||(t=[t]);var r,i,n,l,a,s,o=st.deltaLineHeight,u=st.deltaPageHeight,h=null!=(r=null==e?void 0:e.scrollHeight)?r:u,c=t=>[0,-t,1],d=t=>[0,t,1],v=t=>[-t,0,1],f=t=>[t,0,1],p=[0,0,1.15],g=[0,0,1/1.15];let w=W,m=null,y=0,b=0,_=1;for(i of t)s=i,k(s,KeyboardEvent)&&i.type===Pt&&(s={Up:c(o),ArrowUp:c(o),PageUp:c(u),Home:c(h),Down:d(o),ArrowDown:d(o),PageDown:d(u),End:d(h),Left:v(o),ArrowLeft:v(o),Right:f(o),ArrowRight:f(o)," ":(i.shiftKey?c:d)(u),"+":p,"=":i.ctrlKey?p:null,"-":g}[i.key]||null)&&([s,n,l]=s,a=1!==l?mt:et,y+=s,b+=n,_=hs(_,l),m?m!==a&&(m=bt):m=a);return!!m&&(w=m===bt?$:m===mt?1<_?R:_<1?B:W:Va([y,b],null==e?void 0:e.angleDiffThreshold))!==W&&{device:H,direction:w,intent:m,deltaX:y,deltaY:b,deltaZ:_}},ps=(t,e)=>{Ue(t)||(t=[t]);let r=!1,i=ts(),n=i.j?PointerEvent:MouseEvent,l=i.j?Bt:It;var a,s=mr(t,t=>{var e=t.type;return r=r||e===Vt,!(e===G||!k(t,n)||(r=r||e===l&&0!==t.buttons||e!==l&&1!==t.buttons,tr(t)))}),o=q(s);return!(o<2)&&(r||(a=s[0],s=s[o-1],Le(a)!==Le(s))?null:(o=s.clientX-a.clientX,s=s.clientY-a.clientY,(a=Va([o,s],null==e?void 0:e.angleDiffThreshold))!==W&&{device:U,direction:a,intent:yt,deltaX:o,deltaY:s,deltaZ:1}))},gs=(t,e)=>{var r,i;Ue(t)||(t=[t]);let n=ws(t,null==e?void 0:e.deltaThreshold);if(!n)return null;let l=q(n),a,s,o,u,h=(w=(r=t).findIndex(t=>t.type===Ht),i=r.findIndex(t=>t.type===Ut),(w<0||i<1?0:r[i].timeStamp-r[w].timeStamp)>=(null!=(i=null==e?void 0:e.dragHoldTime)?i:500)&&l===(null!=(r=null==e?void 0:e.dragNumFingers)?r:1)),c=null==e?void 0:e.angleDiffThreshold,d=Si(...n.map(t=>t.deltaX)),v=Si(...n.map(t=>t.deltaY)),f=1,p=(2<l&&(n=mr(n,t=>t.isSignificant),l=q(n)),W),g=bt;2===l&&(a=[n[0].deltaX,n[0].deltaY],s=[n[1].deltaX,n[1].deltaY],Si(...a)&&Si(...s)&&!Di(a,s,c)||(o=Ai([n[0].startX,n[0].startY],[n[1].startX,n[1].startY]),u=Ai([n[0].endX,n[0].endY],[n[1].endX,n[1].endY]),p=o<u?R:B,f=u/o,d=v=0,g=mt));var w,m=h||null!=e&&e.reverseScroll?1:-1;if(d=m*d+0,v=m*v+0,p===W){let t=!0;for(var y of n){g=h?yt:et;y=Va([m*y.deltaX,m*y.deltaY],c);if(y!==W){if(t)p=y;else if(p!==y){p=$;break}t=!1}}}return p===W?(w=t.filter(er).slice(-1)[0],!q(null==w?void 0:w.touches)&&null):{device:z,direction:p,intent:g,deltaX:d,deltaY:v,deltaZ:f}},ws=(t,e=0)=>{var r,i=xn(()=>[]);for(r of t)if(er(r)){if(r.type===zt)return null;for(var n of r.touches)i.sGet(n.identifier).push(n)}var l,a=[];for(l of i.values()){var s,o,u,h,c,d,v=q(l);v<2||(s=(o=l[0]).clientX,h=(u=(v=l[v-1]).clientX)-s,c=(v=v.clientY)-(o=o.clientY),d=xi(h,c)>=e,a.push({startX:s,startY:o,endX:u,endY:v,deltaX:h,deltaY:c,isSignificant:d}))}return a},ms=(t,e)=>{Ue(t)||(t=[t]);let r=W,a=null,s=0,o=0,u=1;for(var h of t)if(i=h,k(i,WheelEvent)&&h.type===Q){let t=(t=>{let e=0,r=0,i=t.deltaX,n=t.deltaY,l=st.deltaLineHeight;return void 0!==t.detail&&(r=t.detail),void 0!==t.wheelDelta&&(r=-t.wheelDelta/120),void 0!==t.wheelDeltaY&&(r=-t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(e=-t.wheelDeltaX/120),(i||n)&&t.deltaMode&&(1===t.deltaMode?(i*=l,n*=l):(i*=st.deltaPageWidth,n*=st.deltaPageHeight)),i&&!e&&(e=i<1?-1:1),n&&!r&&(r=n<1?-1:1),{spinX:e,spinY:r,pixelX:i,pixelY:n}})(h),e=et,r=t.pixelX,i=t.pixelY,n=1,l=Si(r,i);if(h.ctrlKey&&!r){let t=-l;50<=Lr(t)&&(t/=10),n=1+t/100,r=i=0,e=mt}else h.shiftKey&&!r&&(r=i,i=0);s+=r,o+=i,u=hs(u,n),e&&(a?a!==e&&(a=bt):a=e)}var i;return!!a&&(r=a===bt?$:a===mt?1<u?R:u<1?B:W:Va([s,o],null==e?void 0:e.angleDiffThreshold))!==W&&{device:Q,direction:r,intent:a,deltaX:s,deltaY:o,deltaZ:u}};class ys{static create(t={}){return new ys(ks(t),bs)}static reuse(t={}){let e=ks(t),r=qi(e),i=_s.get(r);return i||(i=new ys(e,bs),_s.set(r,i)),i}constructor(l,t){if(t!==bs)throw hi("GestureWatcher.create");let f=ot?new ot.Logger({name:"GestureWatcher",logAtCreation:l}):null,s=Nn(()=>S()),o=Nn(()=>S()),a=(t,e,r)=>{_(null==(i=s.get(t))||null==(i=i.get(e))?void 0:i.$),null!=f&&f.debug5("Adding/updating handler for",r);var{$:i,N:n}=Ts(e,r,f);return i.onRemove(()=>u(t,e,r)),s.sGet(t).set(e,{$:i,N:n,B:r}),i},n=async(r,t,e)=>{var i,n=Ns(l,e||{});a(r,t,n);for(i of n.U||cs){let t,e=null==(t=o.get(r))?void 0:t.get(i);e?null!=f&&f.debug4("Listeners already added for "+i,r,n):(null!=f&&f.debug4("Adding listeners for "+i,r,n),e=h(r,i,n),o.sGet(r).set(i,e)),e.G++,n.X&&e.Y++}},u=(t,e,r)=>{E(s.get(t),e),s.prune(t);for(var i of r.U||cs){var n=null==(n=o.get(t))?void 0:n.get(i);n&&(n.G--,r.X&&n.Y--,n.G||(null!=f&&f.debug4(`No more callbacks for target and device ${i}; removing listeners`,t),E(o.get(t),i),n.q()))}},p=(t,e,r)=>{var i,n,l=0<((null==(n=o.get(t))||null==(n=n.get(e))?void 0:n.Y)||0);let a=!1;for({N:i}of(null==(n=s.get(t))?void 0:n.values())||[])a=i(t,e,r,l)||a;return a},h=(l,e,t)=>{let r,i=t.Z,n=!1,a=!1,s=(e===H&&X(l)&&(r=l,!fr(r,Qr))?(n=!0,Jr(l)):X(l)&&e===z&&(t.X&&dt(l,ge),i&&!Y(i,yt)||(a=!0,Qa(l))),(t,e,r)=>{var i,n="add"===t?vt:ft;for(i of r)null!=f&&f.debug8(t+" listener for "+i,l),n(l,i,e,{passive:!1,capture:!0})}),o=()=>s("add",d,Es[e]),u=()=>s("remove",d,Es[e]),h=()=>s("add",v,xs[e]),c=()=>s("remove",v,xs[e]),d=t=>{v(t),u(),h()},v=t=>{p(l,e,t)&&(c(),o())};return o(),{G:0,Y:0,q:()=>{var t;X(l)&&(n&&(t=l,wr(t,Qr)),_l(l,ge),a)&&Ja(l),c(),u()}}};this.trackGesture=(t,e,r)=>{if(!e){e=Ds;for(var i of ds)Ds(t,{intent:i,totalDeltaX:0,totalDeltaY:0,totalDeltaZ:1})}return n(t,e,r)},this.noTrackGesture=(t,e)=>{if(!e){e=Ds;for(var r of ds)Ds(t,{intent:r})}this.offGesture(t,e)},this.onGesture=n,this.offGesture=(t,e)=>{var r;null!=f&&f.debug5("Removing handler"),_(null==(r=s.get(t))||null==(r=r.get(e))?void 0:r.$)}}}let bs=c(),_s=S(),ks=t=>{var e;return{X:null==(e=t.preventDefault)||e,K:_i(t[At],150),J:_i(t.deltaThreshold,5),tt:ki(t.angleDiffThreshold,35),et:null==(e=t.naturalTouchScroll)||e,rt:null!=(e=t.touchDragHoldTime)?e:500,it:null!=(e=t.touchDragNumFingers)?e:1}},Es={key:[Pt],pointer:[Wt,G],touch:[Ht],wheel:[Q]},xs={key:[Pt],pointer:[Wt,Bt,Ft,Vt,G],touch:[Ht,jt,Ut,zt],wheel:[Q]},Ss={key:fs,[U]:ps,[z]:gs,wheel:ms},Ns=(t,e)=>{var r,i=_i(e[At],t.K),n=_i(e.deltaThreshold,t.J);return{U:u("devices",e.devices,os)||null,nt:u("directions",e.directions,za)||null,Z:u("intents",e.intents,us)||null,lt:null!=(r=e.minTotalDeltaX)?r:null,st:null!=(r=e.maxTotalDeltaX)?r:null,ot:null!=(r=e.minTotalDeltaY)?r:null,ut:null!=(r=e.maxTotalDeltaY)?r:null,ht:null!=(r=e.minTotalDeltaZ)?r:null,ct:null!=(r=e.maxTotalDeltaZ)?r:null,X:null!=(r=e.preventDefault)?r:t.X,K:i,J:n,tt:_i(e.angleDiffThreshold,t.tt),et:null!=(r=e.naturalTouchScroll)?r:t.et,rt:null!=(i=e.touchDragHoldTime)?i:t.rt,it:null!=(n=e.touchDragNumFingers)?n:t.it}},Ts=(t,e,h)=>{let c=0,d=0,v=1,l=!1,f=e.nt,p=e.Z,g=e.lt,w=e.st,m=e.ot,y=e.ut,b=e.ht,_=e.ct,k=e.J,a=e.tt,s=!e.et,o=e.rt,u=e.it,E=[],x=Xi(),S=T(t),N=wn(e.K,(t,e,r)=>{var i,n,l,a,s,o,u;S.isRemoved()||(u=e.deltaX,i=e.deltaY,n=e.deltaZ,l=e.device,Fr(xi(u,i,100*(1-n)))<k?null!=h&&h.debug7(`[${x}] Delta threshold not exceeded for callback`):(null!=h&&h.debug9(`[${x}] Done summing events for `+l),Os(l,E),s=Ei(c+u,{min:g,max:w}),o=Ei(d+i,{min:m,max:y}),a=Ei(hs(v,n),{min:b,max:_}),s===c&&o===d&&a===v||(c=s,d=o,v=a,u={device:l,direction:s=e.direction,intent:o=e.intent,deltaX:u,deltaY:i,deltaZ:n,time:(null==(a=r[q(r)-1])?void 0:a.timeStamp)-(null==(l=r[0])?void 0:l.timeStamp)||0,totalDeltaX:c,totalDeltaY:d,totalDeltaZ:v},s===W||f&&!Y(f,s)||p&&!Y(p,o)?null!=h&&h.debug7(`[${x}] Directions or intents not matching for callback`):S.invoke(t,u,r).catch(O))))});return{$:S,N:(t,e,r,i)=>{E.push(r);var n=Ss[e](E,{angleDiffThreshold:a,deltaThreshold:k,reverseScroll:s,dragHoldTime:o,dragNumFingers:u});if(null!=h&&h.debug8(`[${x}] Got fragment for ${e} (${r.type})`,n,[...E].map(t=>t.type)),i&&Cs(r,!!n||r.type===G&&l),!1===n)null!=h&&h.debug9(`[${x}] Not enough events for gesture `+e);else{if(null===n)return Os(e,E),null!=h&&h.debug9(`[${x}] Gesture for ${e} terminated`),!0;e===U&&(l=!0,lr(()=>{l=!1},10)),N(t,n,[...E])}return!1}}},Os=(t,e)=>{var r=t===U||t===z;e.splice(0,q(e)-(r?1:0))},Cs=(t,e)=>{var r=t.currentTarget,i=t.type,n=i===Wt||i===Rt;(i===Ut||i===Q||(i===G||i===Pt)&&e||n&&1===t.buttons)&&(kr(t),n)&&rr(r)&&r.focus({preventScroll:!0})},Ds=(t,e)=>{var r,i=e.intent;X(t)&&i&&i!==bt&&(r=i+"-",i===mt?Xl(t,{deltaZ:e.totalDeltaZ},{m:r,_:2}):Xl(t,{deltaX:e.totalDeltaX,deltaY:e.totalDeltaY},{m:r}))},As=t=>Xs(Hs,t,Ls),Ms=t=>Xs(js,t,Fs),Ps=t=>Gs(Hs,t,Ls),Is=t=>Gs(js,t,Fs),Rs=t=>Ys(Hs,null==t?void 0:t.devices,Ls)|Ys(js,null==t?void 0:t.aspectRatios,Fs)||Ls.bitmask|Fs.bitmask,Bs=Ii(st.deviceBreakpoints),Ws=Ii(st.aspectRatioBreakpoints),$s=un(),Ls=hn($s,...Bs),Fs=hn($s,...Ws),Vs=q(Bs)+q(Ws),Hs="devices",js="aspectRatios",Us=RegExp("^ *(?:([a-z-]+) +to +([a-z-]+)|min +([a-z-]+)|max +([a-z-]+)) *$"),zs=(t,e,r)=>{var i=[];for(let l=r.start;l<=r.end;l++){var n=1<<l;e&n&&(n=r.nameOf(n))&&i.push(n)}return i},Gs=(t,e,r)=>{var i=Ys(t,e,r);return i?(i=r.bitmask&~i,zs(t,i,r)):[]},Xs=(t,e,r)=>{try{return 0!==Ys(t,e,r)}catch(t){if(k(t,Se))return!1;throw t}},Ys=(t,e,r)=>{if(je(e))return 0;var i=t.slice(0,-1);if(qe(e)){var n=e.match(Us);if(n){var l=n[1]||n[3],n=n[2]||n[4];if(void 0!==l&&!r.has(l))throw m(`Unknown ${i} '${l}'`);if(void 0===n||r.has(n))return r.bitmaskFor(l,n);throw m(`Unknown ${i} '${n}'`)}}let a=0,s=u(t,e,r.has);if(s)for(var o of s)a|=r.bit[o];return a},qs=(t,e)=>{let{axis:r,active:i,noCache:n}=e||{};if(!r)return qs(t,{axis:"y",active:i,noCache:n})||qs(t,{axis:"x",active:i,noCache:n});if(!n){var l=null==(l=co.get(t))?void 0:l.get(r);if(!He(l))return l}let a,s,o="x"===r?"Left":"Top",u=!1,h=!n;return t["scroll"+o]?u=!0:i?(ei(t,{[Me(o)]:1}),a=0<t["scroll"+o],ei(t,{[Me(o)]:0}),u=a):(s="x"===r?"Width":"Height",u=t["scroll"+s]>t["client"+s],h=!1),h&&(co.sGet(t).set(r,u),lr(()=>{E(co.get(t),r),co.prune(t)},ho)),u},Zs=(t,e)=>{let r=t;for(;r=Xr(r);)if(qs(r,e))return r;return null},Ks=t=>{t=mo(t);var e=fo.get(t);return e?w(e):null},Qs=(t,e)=>{var r=t,i=e,n=mo(null==i?void 0:i.scrollable),r=yo(n,r),l=null!=i&&i.altTarget?yo(n,null==i?void 0:i.altTarget):null,n={C:r,dt:(null==i?void 0:i.offset)||null,vt:l,ft:(null==i?void 0:i.altOffset)||null,gt:n,wt:(null==i?void 0:i.duration)||0,yt:null!=(r=null==i?void 0:i.weCanInterrupt)&&r,bt:null!=(l=null==i?void 0:i.userCanInterrupt)&&l};let a=n.gt,s=fo.get(a);if(s&&!s.cancel())return null;let o=!1,u=n.yt?()=>o=!0:()=>!1,h=["touchmove","wheel"],c=null;if(n.bt)for(var d of h)vt(a,d,()=>{o=!0},{once:!0});else{c=kr;for(var v of h)vt(a,v,c,{passive:!1})}let f=(async(t,r)=>{let i=await(async t=>{await ht();let e=(t,e)=>{t.top+=(null==e?void 0:e.top)||0,t.left+=(null==e?void 0:e.left)||0},r=t.gt,i={top:r[_t],left:r[kt]},n=bo(r,i,t.C);return e(n,t.dt),!go(i,n)&&t.vt&&e(n=bo(r,i,t.vt),t.ft),{start:i,end:n}})(t),n=t.wt,l=t.gt,a,s,o=i.start,u=async()=>{await ut(),await ht();var t=Pe();if(r())throw o;if(!a){if(0===n||!go(o,i.end))return ei(l,i.end),i.end;a=t}if(a!==t&&s!==t){var e=t-a,e=Pi($r(1,e/n));if(o={top:i.start.top+(i.end.top-i.start.top)*e,left:i.start.left+(i.end.left-i.start.left)*e},ei(l,o),1===e)return o}return s=t,u()};return u()})(n,()=>o),p={waitFor:()=>f,cancel:u},g=()=>{if(fo.get(a)===p&&E(fo,a),c)for(var t of h)ft(a,t,c,{passive:!1})};return p.waitFor().then(g).catch(g),fo.set(a,p),p},Js=t=>Y(Ya,t),to=(t,e)=>vo.set(t,e),eo=t=>E(vo,t),ro=t=>_o(t)?t.offsetWidth-ko(t,nt)-ko(t,lt):t[St],io=t=>_o(t)?t.offsetHeight-ko(t,gt)-ko(t,wt):t[Nt],no=()=>null!=Eo?Eo:null,lo=async()=>(await No(),Eo),ao=()=>null!=xo?xo:null,so=async()=>(await No(),xo),oo=()=>{var t=b();return!qs(t)&&We()||t},uo=async t=>wo(t,so),ho=1e3,co=xn(()=>S()),vo=S(),fo=S(),po=5,go=(t,e)=>xi(t.top-e.top,t.left-e.left)>=po,wo=(t,e)=>{if(X(t))return vo.get(t)||t;if(t&&t!==Re()&&t!==x())throw m("Unsupported scroll target");return e()},mo=t=>null!=t?t:oo(),yo=(t,e)=>{let r=We();if(X(e)){if(t!==e&&t.contains(e))return{top:()=>t[_t]+sr(e).top-(t===r?0:sr(t).top),left:()=>t[kt]+sr(e).left-(t===r?0:sr(t).left)};throw m("Target must be a descendant of the scrollable one")}if(qe(e)){var i=cr(e);if(i)return yo(t,i);throw m(`No match for '${e}'`)}if(Ge(e)&&("top"in e||"left"in e))return e;throw m("Invalid coordinates")},bo=(t,e,r)=>{var i=w(e),n=(He(null==r?void 0:r.top)||(Ke(r.top)?i.top=r.top(t):i.top=r.top),He(null==r?void 0:r.left)||(Ke(r.left)?i.left=r.left(t):i.left=r.left),t[xt]),l=t[Et],a=io(t),s=ro(t);return i.top=$r(n-a,i.top),i.top=Wr(0,i.top),i.left=$r(l-s,i.left),i.left=Wr(0,i.left),i},_o=t=>t===b()&&null===We(),ko=(t,e)=>Ir(Hr(Il(t,"border-"+e))),Eo,xo,So=null,No=()=>So=So||(async()=>{let t=st.mainScrollableElementSelector,e=await ka(()=>t?cr(t):b());xo=oo(),Eo=b(),e?rr(e)?e!==Eo&&(xo=Eo=e):jn("mainScrollableElementSelector should point to an HTMLElement"):O(m(`No match for '${t}'. `+"Scroll tracking/capturing may not work as intended."))})(),To=(Ie()&&Ea().then(No),async t=>{var e=await Co(t),r=!e._t;if(r){var i=null==(i=Oo.get(e.kt))?void 0:i.get(e.Et);if(i)return Xr(i)||await ut(),i}let n=Po(e),l=(r?Oo.sGet(e.kt).set(e.Et,n):n.id=e._t,Y((e.xt.left||"")+(e.xt.right||""),"%")),a=Y((e.xt.top||"")+(e.xt.bottom||""),"%"),s=e.kt;return(l||a)&&(l&&qs(s,{axis:"x"})||a&&qs(s,{axis:"y"}))&&(st.contentWrappingAllowed?s=await ha(s):jn("Percentage offset view trigger with scrolling root requires contentWrappingAllowed")),e.xt.position===A&&dt(s,y("overlay-container")),await sa(n,{to:s}),n}),Oo=Nn(()=>S()),Co=async t=>{var e,r=Ao(null==t?void 0:t.style),i=null!=(i=null==t?void 0:t.data)?i:{};return{kt:await Mo(null==t?void 0:t.parent,r.position),_t:null!=(e=null==t?void 0:t.id)?e:"",xt:r,St:i,Et:Do(r,i)}},Do=(t,e)=>qi(t)+"|"+qi(e),Ao=t=>{var e=Nr({position:A},t);return e.position!==A&&e.position!==pt||(je(e.top)&&je(e.bottom)&&(e.top="0px"),je(e.left)&&je(e.right)&&(e.left="0px")),e},Mo=async(t,e)=>null!=t?t:e===pt?await _a(b):await lo(),Po=t=>{var e,r=at("div"),i=(ct(r,y("overlay")),t.St);for(e of xr(i))Nl(r,Gi(e),i[e]);var n,l=t.xt;for(n of xr(l))$l(r,n,l[n]);return r},Io=t=>{var e=t.contentBoxSize;return e?zo(e):(e=t.contentRect,{[rt]:e[rt],[it]:e[it]})},Ro=(t,e=!1)=>{var r=t.borderBoxSize;return r?zo(r):e?Io(t):{[rt]:NaN,[it]:NaN}},Bo=t=>Y(jo,t),Wo=t=>Y(Uo,t),$o=()=>null!=Go?Go:null,Lo=async()=>(await Yo(),Go),Fo=async(t=!1)=>{t||await ht();var e=Ie()?null!=(e=We())?e:b():null;return{[rt]:(null==e?void 0:e.clientWidth)||0,[it]:(null==e?void 0:e.clientHeight)||0}},Vo="inlineSize",Ho="blockSize",jo=["content","border"],Uo=[rt,it],zo=t=>Ue(t)?{[rt]:t[0][Vo],[it]:t[0][Ho]}:{[rt]:t[Vo],[it]:t[Ho]},Go,Xo=null,Yo=()=>Xo=Xo||(async()=>{Go=await To({id:y("vp-ovrl"),style:{position:"fixed",[rt]:"100vw",[it]:"100vh"}})})();class qo{constructor(n,l){let a=ot?new ot.Logger({name:"XResizeObserver"}):null,s=S(),o=ii(),r=li(),u=(l=l||0,null),t=t=>{for(var e of t){var r=qr(e),i=o.get(r);void 0!==i?2===i?o.set(r,1):(1!==i&&O(ui("# targetsToSkip is "+i)),E(o,r)):s.set(r,e)}null!=a&&a.debug9(`Got ${t.length} new entries. `+`Have ${s.size} unique-target entries`,t),!u&&br(s)&&(u=lr(()=>{br(s)&&(n(Er(s.values()),this),s.clear()),u=null},l))},i=si(t),h=si(t),c=(i&&h||jn("This browser does not support ResizeObserver. Some features won't work."),t=>{r.add(t),null!=i&&i.observe(t,{box:"border-box"}),null!=h&&h.observe(t)});this.observe=(...t)=>{null!=a&&a.debug10("Observing targets",t);for(var e of t)c(e)},this.observeLater=(...t)=>{null!=a&&a.debug10("Observing targets (later)",t);for(var e of t)r.has(e)||(o.set(e,2),c(e))},this.unobserve=(...t)=>{null!=a&&a.debug10("Unobserving targets",t);for(var e of t)E(r,e),null!=i&&i.unobserve(e),null!=h&&h.unobserve(e)},this.disconnect=()=>{null!=a&&a.debug10("Disconnecting"),r=li(),null!=i&&i.disconnect(),null!=h&&h.disconnect()}}}class Zo{static create(t={}){return new Zo(Jo(t),Ko)}static reuse(t={}){let e=Jo(t),r=qi(e),i=Qo.get(r);return i||(i=new Zo(e,Ko),Qo.set(r,i)),i}constructor(i,t){if(t!==Ko)throw hi("SizeWatcher.create");let a=ot?new ot.Logger({name:"SizeWatcher",logAtCreation:i}):null,s=ii(),n=Nn(()=>S()),o=new qo(t=>{for(var e of t)v(e)}),u=async t=>{let e=await iu(t),r=s.get(e);return r?w(r):ri(r=>{let i=si(t=>{var e=eu(t[0]);null!=i&&i.disconnect(),r(e)});i?i.observe(e):r({border:{[rt]:0,[it]:0},content:{[rt]:0,[it]:0}})})},h=async t=>{var e=null!=(e=t.box)?e:null;if(e&&!Bo(e))throw m(`Unknown box type: '${e}'`);var r=null!=(r=t.dimension)?r:null;if(r&&!Wo(r))throw m(`Unknown dimension: '${r}'`);return{Nt:await iu(qr(t)),Tt:e,Ot:r,Ct:_i(t.threshold,i.Dt)||1,K:null!=(e=t[At])?e:i.K}},c=(t,e)=>{var r=e.Nt,i=(_(null==(i=n.get(r))||null==(i=i.get(t))?void 0:i.$),null!=a&&a.debug5("Adding/updating handler",e),T(t,e.K)),i=(i.onRemove(()=>{d(t,e)}),{$:i,B:e});return n.sGet(r).set(t,i),i},r=async(t,e)=>{var r=await h(e||{}),i=r.Nt,r=c(t,r),n=r.$,l=await u(i);n.isRemoved()||(r.St=l,s.set(i,l),o.observeLater(i),null!=e&&e.skipInitial)||(null!=a&&a.debug5("Calling initially with",i,l),await nu(T(t),i,l))},l=async(t,e)=>{var r=(await h({target:e})).Nt,i=null==(i=n.get(r))?void 0:i.get(t);i&&(_(i.$),t===ru)&&ru(r,null)},d=(t,e)=>{var r=e.Nt;E(n.get(r),t),n.prune(r),n.has(r)||(null!=a&&a.debug4("No more callbacks for target; unobserving",r),o.unobserve(r),E(s,r))},v=t=>{var e,r=qr(t),i=eu(t);s.set(r,i),null!=a&&a.debug9("New size data",r,i);for(let t of(null==(e=n.get(r))?void 0:e.values())||[])tu(t.B,i,t.St)?(t.St=i,nu(t.$,r,i)):null!=a&&a.debug9("Threshold not exceeded")};this.fetchCurrentSize=u,this.trackSize=async(t,e)=>(t=t||ru,r(t,e)),this.noTrackSize=(t,e)=>{t=t||ru,l(t,e)},this.onResize=r,this.offResize=(t,e)=>{l(t,e)}}}let Ko=c(),Qo=S(),Jo=t=>({K:_i(t[At],75),Dt:_i(t.resizeThreshold,50)||1}),tu=(r,i,n)=>{if(n){let t,e;for(t in i)if(!r.Tt||r.Tt===t)for(e in i[t])if((!r.Ot||r.Ot===e)&&Lr(i[t][e]-n[t][e])>=r.Ct)return!0}return!1},eu=t=>({border:Ro(t,!0),content:Io(t)}),ru=(t,e)=>{let r="";t===$o()&&(t=Be(),r="window-");var i={borderWidth:null==e?void 0:e.border[rt],borderHeight:null==e?void 0:e.border[it],contentWidth:null==e?void 0:e.content[rt],contentHeight:null==e?void 0:e.content[it]};Xl(t,i,{m:r})},iu=async t=>{if(X(t))return t;if(!t||t===Re())return Lo();if(t===x())return Be();throw m("Unsupported resize target")},nu=(t,e,r)=>t.invoke(e,w(r)).catch(O);class lu{static create(t={}){return new lu(cu(t),au)}static reuse(t={}){let e,r=cu(t),i=qi($i(r,{O:null})),n=null==(e=su.get(r.O))?void 0:e.get(i);return n||(n=new lu(r,au),su.sGet(r.O).set(i,n)),n}constructor(t,e){if(e!==au)throw hi("LayoutWatcher.create");let u=ot?new ot.Logger({name:"LayoutWatcher",logAtCreation:t}):null,h=0,c={device:null,aspectRatio:null},d=S(),a=async()=>(await r,w(c)),r=(async()=>{let{root:i,overlays:n}=await du(t.O,t.At,t.Mt);return ri(s=>{let o=!1;var t,e={root:i,rootMargin:"5px 0% 5px -100%"},r=ai(t=>{var e,r=q(t);null!=u&&u.debug9(`Got ${r} new entries`,t),o||r<Vs&&jn(ui(`Got IntersectionObserver ${r}, `+"expected >= "+Vs));for(e of t)h=fu(h,e);var t=!o,r=Pr(Rr(h&Ls.bitmask)),i=Pr(Rr(h&Fs.bitmask)),n={device:null,aspectRatio:null};if(r!==-D&&(n.device=Ls.nameOf(1<<r)),i!==-D&&(n.aspectRatio=Fs.nameOf(1<<i)),null!=u&&u.debug8("New layout",n),!t)for(var l of d.values()){var a=l.Pt;vu(a,n,c)?pu(l.$,n):null!=u&&u.debug9("Layout change does not match bitmask "+a)}c=n,o=!0,s()},e);for(t of n)r.observe(t)})})();this.fetchCurrentLayout=a,this.onLayout=async(t,e)=>{var r,i,n=Rs(e),l=(r=t,l=n,_(null==(i=d.get(r))?void 0:i.$),null!=u&&u.debug5("Adding/updating handler",l),(i=T(r)).onRemove(()=>{var t;t=r,E(d,t)}),d.set(r,{$:i,Pt:l}),i);null!=e&&e.skipInitial||(i=await a(),!l.isRemoved()&&vu(n,i,null)&&(null!=u&&u.debug5("Calling initially with",i),await pu(l,i)))},this.offLayout=t=>{var e;null!=u&&u.debug5("Removing handler"),_(null==(e=d.get(t))?void 0:e.$)}}}let au=c(),su=xn(()=>S()),ou=De("border-height"),uu=y("device"),hu=y("aspect-ratio"),cu=t=>{var e=w(st.deviceBreakpoints),r=(null!=t&&t.deviceBreakpoints&&Wi(t.deviceBreakpoints,e),w(st.aspectRatioBreakpoints));return null!=t&&t.aspectRatioBreakpoints&&Wi(t.aspectRatioBreakpoints,r),{O:(null==t?void 0:t.root)||null,At:e,Mt:r}},du=async(t,e,r)=>{let i=[],n=t||await To({style:{position:"fixed",[rt]:"100vw"}}),l;for(l in e)i.push(To({parent:n,style:{position:"absolute",[rt]:e[l]+"px"},data:{[uu]:l}}));var a=t?`var(${ou}, 0) * 1px`:"100vh";t&&Zo.reuse().trackSize(null,{target:t});let s;for(s in r)i.push(To({parent:n,style:{position:"absolute",[rt]:`calc(${r[s]} `+`* ${a})`},data:{[hu]:s}}));return{root:n,overlays:await Or(i)}},vu=(t,e,r)=>!((null==r?void 0:r.device)===e.device||e.device&&!(Ls.bit[e.device]&t))||!((null==r?void 0:r.aspectRatio)===e.aspectRatio||e.aspectRatio&&!(Fs.bit[e.aspectRatio]&t)),fu=(e,r)=>{var i=qr(r);if(rr(i)){var n=i,n=(n=xl(n,uu)||xl(n,hu))&&(Ls.has(n)||Fs.has(n))?n:(O(ui("No device or aspectRatio data attribute")),null);let t=0;n&&(Ls.has(n)?t=Ls.bit[n]:Fs.has(n)?t=Fs.bit[n]:O(ui("Unknown device or aspectRatio data attribute: "+n))),r.isIntersecting?e&=~t:e|=t}else O(ui(`IntersectionObserver called us with '${Gr(i)}'`));return e},pu=(t,e)=>t.invoke(w(e)).catch(O),gu=t=>Y(wu,t),wu=[G,J,tt];class mu{static create(t={}){return new mu(_u(t),yu)}static reuse(t={}){let e=_u(t),r=qi(e),i=bu.get(r);return i||(i=new mu(e,yu),bu.set(r,i)),i}constructor(o,t){if(t!==yu)throw hi("PointerWatcher.create");let n=Nn(()=>S()),u=(t,e)=>{_(null==(r=n.get(t))?void 0:r.get(e));var r=T(e);return r.onRemove(()=>{E(n.get(t),e)}),n.sGet(t).set(e,r),r};this.onPointer=async(t,e,r,i)=>{var n,l=ku(o,i),a=u(t,e),s=r&&r!==e?u(t,r):a;for(n of l.It)xu[n](t,a,s,l)},this.offPointer=(t,e,r)=>{var i=n.get(t);_(null==i?void 0:i.get(e)),r&&_(null==i?void 0:i.get(r))}}}let yu=c(),bu=S(),_u=t=>{var e;return{X:null!=(e=null==t?void 0:t.preventDefault)&&e,Rt:null==(e=null==t?void 0:t.preventSelect)||e}},ku=(t,e)=>{var r;return{It:u("actions",null==e?void 0:e.actions,gu)||wu,X:null!=(r=null==e?void 0:e.preventDefault)?r:t.X,Rt:null!=(r=null==e?void 0:e.preventSelect)?r:t.Rt}},Eu=(i,n,e,r,l)=>{let a=i===J?"enter":"down",t=i===J?"leave":"up",s=U+a,o=U+t,u=(t,e)=>{l.X&&kr(t);var r={action:i,state:nr(t.type,/pointer|mouse/,"")===a?"ON":"OFF"};Su(e,n,r,t)},h=t=>u(t,e),c=t=>u(t,r);vt(n,s,h),vt(n,o,c),l.Rt&&Qa(n),e.onRemove(()=>{Ja(n),ft(n,s,h)}),r.onRemove(()=>{Ja(n),ft(n,o,c)})},xu={click:(r,i,n,l)=>{let a=!1,t=t=>{l.X&&kr(t),a=!a;var e={action:G,state:a?"ON":"OFF"};Su(a?i:n,r,e,t)};vt(r,G,t);var e=()=>ft(r,G,t);i.onRemove(e),n.onRemove(e)},hover:(...t)=>Eu(J,...t),press:(...t)=>Eu(tt,...t)},Su=(t,e,r,i)=>t.invoke(e,w(r),i).catch(O);class Nu{static fetchMainContentElement(){return lo()}static fetchMainScrollableElement(){return so()}static create(t={}){return new Nu(Cu(t),Tu)}static reuse(t={}){let e=Cu(t),r=qi(e),i=Ou.get(r);return i||(i=new Nu(e,Tu),Ou.set(r,i)),i}constructor(h,t){if(t!==Tu)throw hi("ScrollWatcher.create");let d=ot?new ot.Logger({name:"ScrollWatcher",logAtCreation:h}):null,c=ii(),v=ii(),a=Nn(()=>S()),f=async(t,e=!1,r=!1)=>{var i=c.get(t),n=await Ru(t,i,e);return!r&&i&&(n.direction=i.direction),n},p=(t,e,r)=>{var i=e.Nt,n=(_(null==(n=a.get(i))||null==(n=n.get(t))?void 0:n.$),null!=d&&d.debug5("Adding/updating handler",e),T(t,e.K)),n=(n.onRemove(()=>{l(t,e)}),{$:n,Bt:r,B:e});return a.sGet(i).set(t,n),n},r=async(e,r,i)=>{var n=await Mu(h,r||{}),l=n.Nt,a=p(e,n,i),s=a.$,o=n.Wt,u=await f(l,0===n.K);if(!s.isRemoved()){a.St=u,c.set(l,u),i===Au&&await g(a);let t=v.get(o);t||(null!=d&&d.debug4("Adding scroll listener",o),t={$t:0},v.set(o,t),vt(o,et,w)),0===n.K&&t.$t++;a=n.nt;s.isRemoved()||null!=r&&r.skipInitial||!Pu(a,u.direction)||(null!=d&&d.debug5("Calling initially with",l,u),await $u(T(e),l,u))}},i=async(t,e,r)=>{var i=(await Mu(h,{scrollable:e})).Nt,n=null==(n=a.get(i))?void 0:n.get(t);(null==n?void 0:n.Bt)===r&&(_(n.$),t===Bu)&&Bu(i,null)},l=(t,e)=>{var r=e.Nt,i=e.Wt,n=(E(a.get(r),t),a.prune(r),v.get(i));n&&0===e.K&&n.$t--,a.has(r)||(null!=d&&d.debug4("No more callbacks for scrollable; removing listener",r),E(c,r),ft(i,et,w),E(v,i))},g=async e=>{let r=e.B,l=r.Nt,i=e.$,t=(null!=d&&d.debug8("Setting up size tracking",l),x()),a=We(),s=T(async()=>{var t=await f(l);Iu(r,t,e.St)?i.isRemoved()||await $u(i,l,t):null!=d&&d.debug9("Threshold not exceeded",r,t,e.St)}),n=(i.onRemove(s.remove),Zo.reuse()),o=t=>n.onResize(s,{target:t,debounceWindow:r.K,threshold:r.Ct});if(l===a)o(),o(t);else{let r=ni([l]),i=(o(l),!0===st.contentWrappingAllowed&&l!==a&&null===xl(l,we)),n;if(i)n=await ha(l),o(n),r.add(n);else for(var u of Yr(l))o(u),r.add(u);var h=Ca.create({root:l,subtree:!1}),c=T(t=>{var e=Zr(t);e!==n&&(i?sa(e,{to:n,ignoreMove:!0}):(o(e),r.add(e)))});h.onMutation(c,{categories:[L]}),s.onRemove(c.remove)}},w=async t=>{var e=qr(t);if(e&&(X(e)||e===x())){var r,i=await uo(e),e=0<((null==(e=v.get(e))?void 0:e.$t)||0),n=await f(i,e,!0);c.set(i,n),null!=d&&d.debug9("Scroll event",i,n);for(r of(null==(e=a.get(i))?void 0:e.values())||[]){var l=r.B;Iu(l,n,r.St)?(r.St=n,Pu(l.nt,n.direction)?$u(r.$,i,n):null!=d&&d.debug9("Direction does not match",l,n)):null!=d&&d.debug9("Threshold not exceeded",l,n,r.St)}}};this.fetchCurrentScroll=(t,e)=>uo(t).then(t=>f(t,e)),this.scroll=(t,e={})=>{if(!Js(t))throw m(`Unknown scroll direction: '${t}'`);let r=t===Z||t===K,i=t===Z||t===nt?-1:1,n,l=null!=(s=e.amount)?s:100,a=e.asFractionOf;if("visible"===a)n=r?t=>t[_t]+i*l*io(t)/100:t=>t[kt]+i*l*ro(t)/100;else if("content"===a)n=r?t=>t[_t]+i*l*t[xt]/100:t=>t[kt]+i*l*t[Et]/100;else{if(void 0!==a&&"pixel"!==a)throw m(`Unknown 'asFractionOf' keyword: '${a}'`);n=r?t=>t[_t]+i*l:t=>t[kt]+i*l}var s=r?{top:n}:{left:n};return this.scrollTo(s,e)},this.scrollTo=async(t,e={})=>Qs(t,Nr({duration:h.Lt},e,{scrollable:await uo(e.scrollable)})),this.fetchCurrentScrollAction=t=>uo(t).then(t=>Ks(t)),this.stopUserScrolling=async(t={})=>{let e=await uo(t.scrollable),r=()=>ei(e,{top:e[_t],left:e[kt]});t.immediate?r():ht().then(r)},this.trackScroll=(t,e)=>(t=t||Bu,r(t,e,Au)),this.noTrackScroll=(t,e)=>{t=t||Bu,i(t,e,Au)},this.onScroll=(t,e)=>r(t,e,Du),this.offScroll=(t,e)=>{i(t,e,Du)}}}let Tu=c(),Ou=S(),Cu=t=>({K:_i(t[At],75),Ft:_i(t.scrollThreshold,50)||1,Lt:_i(t.scrollDuration,1e3)}),Du=1,Au=2,Mu=async(t,e)=>{var r=u("directions",e.directions,Js)||null,i=await uo(e.scrollable);return{Nt:i,Wt:Wu(i),nt:r,Ct:_i(e.threshold,t.Ft)||1,K:null!=(i=e[At])?i:t.K}},Pu=(t,e)=>!t||Y(t,e),Iu=(t,e,r)=>{var i=t.nt,n=t.Ct;if(!r)return!1;let l=xi(e[_t]-r[_t],e[xt]-r[xt],e[Nt]-r[Nt]),a=xi(e[kt]-r[kt],e[Et]-r[Et],e[St]-r[St]),s=!1,o=!1;return!i||Y(i,W)||Y(i,$)?s=o=!0:((Y(i,Z)||Y(i,K))&&(s=!0),(Y(i,nt)||Y(i,lt))&&(o=!0)),s&&n<=l||o&&n<=a},Ru=async(t,e,r)=>{r||await ht();var i=Ir(t[_t]),n=Ir(t[kt]),l=t[Et],a=t[xt],s=ro(t),o=io(t),u=Fr(i)/(a-o||D),h=Fr(n)/(l-s||D),c=(null==e?void 0:e.scrollTop)||0,d=(null==e?void 0:e.scrollLeft)||0;return{direction:Fa(n-d,i-c),[_t]:i,scrollTopFraction:u,[kt]:n,scrollLeftFraction:h,[Et]:l,[xt]:a,[St]:s,[Nt]:o}},Bu=(t,e)=>{let r="";t===ao()&&(t=Be(),r="page-"),e=e||{};var i={[_t]:e[_t],scrollTopFraction:e[Tt],[kt]:e[kt],scrollLeftFraction:e[Ot],[Et]:e[Et],[xt]:e[xt]};Xl(t,i,{m:r})},Wu=t=>t===We()?x():t,$u=(t,e,r)=>t.invoke(e,w(r)).catch(O),Lu=t=>null!==t.match(Gu),Fu=t=>Y(Uu,t),Vu=t=>{if(!t)throw m("'views' cannot be empty");let e=Hu(t),r=zu.bitmask&~e;e!==zu.bit.at&&(e&zu.bit.above||(r&=~zu.bit.below),e&zu.bit.below||(r&=~zu.bit.above),e&zu.bit.left||(r&=~zu.bit.right),e&zu.bit.right||(r&=~zu.bit.left));var i=r,n=[];for(let a=zu.start;a<=zu.end;a++){var l=1<<a;i&l&&(l=zu.nameOf(l))&&n.push(l)}return n},Hu=t=>{let e=0,r=u("views",t,Fu);if(r)for(var i of r){if(!Fu(i))throw m(`Unknown view '${i}'`);e|=zu.bit[i]}else e=zu.bitmask;return e},ju=t=>{var e=t.match(Gu);if(!e)throw m(`Invalid offset: '${t}'`);var r=e[1],e=e[2];if(r&&e)return{reference:r,value:e};throw ui("Offset regex: blank capture groups")},Uu=[M,P,I,nt,lt],zu=hn(un(),...Uu),Gu=RegExp("(top|bottom|left|right): *([^ ].+)");class Xu{constructor(i,t){let r=li(),n=li(),l=ai(t=>{var e,r=[];for(e of t)n.has(qr(e))?E(n,qr(e)):r.push(e);q(r)&&i(r,this)},t);Sr(this,"root",{get:()=>l.root}),Sr(this,"rootMargin",{get:()=>l.rootMargin}),Sr(this,"thresholds",{get:()=>l.thresholds}),this.observe=(...t)=>{for(var e of t)r.add(e),l.observe(e)},this.observeLater=(...t)=>{for(var e of t)r.has(e)||(n.add(e),this.observe(e))},this.unobserve=(...t)=>{for(var e of t)E(r,e),l.unobserve(e)},this.disconnect=()=>{r=li(),l.disconnect()},this.takeRecords=()=>l.takeRecords()}}class Yu{static create(t={}){return new Yu(Ku(t),qu)}static reuse(t={}){let e,r=Ku(t),i=qi($i(r,{O:null})),n=null==(e=Zu.get(r.O))?void 0:e.get(i);return n||(n=new Yu(r,qu),Zu.sGet(r.O).set(i,n)),n}constructor(p,t){if(t!==qu)throw hi("ViewWatcher.create");let g=ot?new ot.Logger({name:"ViewWatcher",logAtCreation:p}):null,w=ii(),l=Nn(()=>S()),e={root:p.O,threshold:p.Ct,rootMargin:p.Vt},o=new Xu(t=>{null!=g&&g.debug9(`Got ${t.length} new entries`,t);for(var e of t)n(e)},e),m=(t,r=!1)=>{let n=async t=>{var e=await nh(p,t,r);return ah(e,r)};return r?n(t):ri(r=>{let i=ai(t=>{var e=n(t[0]);i.disconnect(),e.then(r)},e);i.observe(t)})},y=(t,e,r)=>{var i=e.Nt,n=(_(null==(n=l.get(i))||null==(n=n.get(t))?void 0:n.$),null!=g&&g.debug5("Adding/updating handler",e),T(t));return n.onRemove(()=>{a(t,e)}),l.sGet(i).set(t,{$:n,Bt:r,B:e}),n},i=async(t,e,r,i)=>{var n=await th(p.O,t,r),l=n.Nt,a=y(e,n,i);await Ea();let s=await m(l);0===s.rootBounds[rt]&&0===s.rootBounds[it]&&(null!=g&&g.debug5("Got zero root size, deferring for a bit",p.O),await Xn(),s=await m(l)),i===Ju&&await u(n,a,s),a.isRemoved()||(o.observeLater(l),null!=r&&r.skipInitial)||(null!=g&&g.debug5("Calling initially with",l,s),ih(s.views)&n.Ht&&await ch(a,l,s))},r=async(t,e,r)=>{var i=(await th(p.O,t,{})).Nt,n=null==(n=l.get(i))?void 0:n.get(e);(null==n?void 0:n.Bt)===r&&(_(n.$),e===oh)&&oh(i,null)},a=(t,e)=>{var r=e.Nt;E(l.get(r),t),l.prune(r),l.has(r)||(null!=g&&g.debug4("No more callbacks for target; unobserving",r),o.unobserve(r),E(w,r))},n=async t=>{var e=qr(t),r=await nh(p,t),i=await ah(r),n=(null!=g&&g.debug9("Got ViewData",e,i),ih(i.views));for(let t of(null==(r=l.get(e))?void 0:r.values())||[])n&t.B.Ht&&ch(t.$,e,i)},u=async(l,a,t)=>{let s=l.Nt,o=(null!=g&&g.debug8("Setting up size, scroll and attribute tracking",s),Zo.reuse()),u=Nu.reuse(),h=0===l.K,c=Ca.create({root:s,subtree:!1}),d=!1,v=null,f=await eh(s,h),e;a.isRemoved()||(e=y((t,e)=>{if(e.views[0]===M){if(!d){d=!0;var r,i,n=T(async()=>{var t=w.get(s),e=await m(s,h);null!=g&&g.debug9("Got ViewData",s,e),rh(e,t)?(w.set(s,e),d&&!a.isRemoved()&&await ch(a,s,e)):null!=g&&g.debug9("ViewData same as last")});a.onRemove(n.remove),v=n.remove,c.onMutation(n,{categories:[V],skipInitial:!0}),o.onResize(n,{target:s,debounceWindow:l.K,threshold:l.Dt,skipInitial:!0}),o.onResize(n,{target:null!=(r=p.O)?r:Re(),debounceWindow:l.K,threshold:l.Dt,skipInitial:!0});for(i of f)u.onScroll(n,{scrollable:i,debounceWindow:l.K,threshold:l.Ft,skipInitial:!0})}}else v&&(d=!1,v(),v=null)},Cr(l,{Ht:zu.bitmask}),Qu),a.onRemove(e.remove),w.set(s,t),e.isRemoved())||ch(e,s,t)};this.fetchCurrentView=(t,e=!1)=>uh(p.O,t).then(t=>m(t,e)),this.trackView=(t,e,r)=>(e=e||oh,i(t,e,r,Ju)),this.noTrackView=(t,e)=>{e=e||oh,r(t,e,Ju)},this.onView=(t,e,r)=>i(t,e,r,Qu),this.offView=(t,e)=>r(t,e,Qu)}}let qu=c(),Zu=xn(()=>S()),Ku=t=>{var e;return{O:(null==t?void 0:t.root)||null,Vt:null!=(e=null==t?void 0:t.rootMargin)?e:"0px 0px 0px 0px",Ct:(null==t?void 0:t.threshold)||0}},Qu=1,Ju=2,th=async(t,e,r)=>({Nt:await uh(t,e),Ht:Hu(null==r?void 0:r.views),K:null==r?void 0:r.debounceWindow,Dt:null==r?void 0:r.resizeThreshold,Ft:null==r?void 0:r.scrollThreshold}),eh=async(t,e)=>{e||await ht();let r=[],i=t;for(;i=Zs(i,{active:!0});)r.push(i);return r},rh=(t,e)=>!(e&&ih(e.views)===ih(t.views)&&Li(or(e.targetBounds),or(t.targetBounds))&&Li(e.rootBounds,t.rootBounds)&&Li(e.relative,t.relative)),ih=t=>zu.bit[t[0]]|(t[1]?zu.bit[t[1]]:0),nh=async(t,e,r=!1)=>{let i=t.O,n=await Fo(r),l=Yi(t.Vt,n),a,s,o=null,u=null,h=null;return k(e,IntersectionObserverEntry)?(a=e.target,s=e.boundingClientRect,o=e.rootBounds,u=e.isIntersecting,h=!e.rootBounds):(a=e,s=await lh(a,r)),o=o||await lh(i,r,l),{C:a,jt:s,O:i,Ut:l,zt:o,Gt:u,Xt:h}},lh=async(t,e,r)=>{var i,n=t?(e||await ht(),or(sr(t))):({width:n,height:i}=await Fo(e),{x:0,left:0,right:n,width:n,y:0,top:0,bottom:i,height:i});return r&&(n.x=n[nt]-=r[3],n[lt]+=r[1],n[rt]+=r[1]+r[3],n.y=n[gt]-=r[0],n[wt]+=r[2],n[it]+=r[0]+r[2]),n},ah=async(t,e=!1)=>{var r=await Fo(e),i=r[it],r=r[rt],n=await sh(t,e),l=Nr({hMiddle:NaN,vMiddle:NaN},or(t.jt));return l.y/=i,l[gt]/=i,l[wt]/=i,l[it]/=i,l.x/=r,l[nt]/=r,l[lt]/=r,l[rt]/=r,l.hMiddle=(l[nt]+l[lt])/2,l.vMiddle=(l[gt]+l[wt])/2,{isIntersecting:null!=(i=t.Gt)?i:n[0]===M,targetBounds:t.jt,rootBounds:t.zt,views:n,relative:l}},sh=async(o,u,h)=>{if(!o.Gt){let t=h?await lh(h,u,o.Ut):o.zt,e=o.jt,r=t[nt]-e[nt],i=e[lt]-t[lt],n=t[gt]-e[gt],l=e[wt]-t[wt],a=null,s=null;if(0<r&&0<i?a=i<r?lt:nt:0<r?a=lt:0<i&&(a=nt),0<n&&0<l?s=l<n?I:P:0<n?s=I:0<l&&(s=P),a&&s)return[a,s];if(a)return[a];if(s)return[s];if(!o.Xt){var c=Zs(null!=h?h:o.C);if(c)return sh(o,u,c)}}return[M]},oh=(t,e)=>{var r=(null==e?void 0:e.relative)||{},r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,[rt]:r[rt],[it]:r[it],hMiddle:r.hMiddle,vMiddle:r.vMiddle};Xl(t,r,{m:"r-",_:4})},uh=async(t,e)=>{if(X(e))return e;var r;if(qe(e))return r=hh(t,e),To(r);throw m("'target' must be an offset string or an HTMLElement | SVGElement | MathMLElement")},hh=(t,e)=>{let{reference:r,value:i}=ju(e),n;if(r===gt||r===wt)n=rt;else{if(r!==nt&&r!==lt)throw m(`Invalid offset reference: '${r}'`);n=it}return{parent:rr(t)?t:void 0,style:{[r]:i,[n]:"100%"}}},ch=(t,e,r)=>t.invoke(e,w(r)).catch(O),dh=Object.freeze({__proto__:null,DOMWatcher:Ca,GestureWatcher:ys,LayoutWatcher:lu,PointerWatcher:mu,ScrollWatcher:Nu,SizeWatcher:Zo,ViewWatcher:Yu});st.autoWidgets=!0;class vh{static get(t,e){var r;return(null==(r=yh.get(t))?void 0:r.get(e))||null}constructor(r,t){let i=ot?new ot.Logger({name:this.constructor.name+"-"+Hi(r),logAtCreation:this}):null,n=null==t?void 0:t.id;var e;n&&(null!=(e=yh.get(r))&&null!=(e=e.get(n))&&e.destroy(),yh.sGet(r).set(n,this));let l=!1,a=!1,s,o=ni(),u=ni(),h=ni();this.disable=async()=>{if(!l){null!=i&&i.debug8("Disabling"),l=!0;for(var t of u)await t.invoke(this)}},this.enable=async()=>{if(!a&&l){null!=i&&i.debug8("Enabling"),l=!1;for(var t of o)await t.invoke(this)}},this.toggleEnable=async()=>{a||await(l?this.enable:this.disable)()},this.onDisable=t=>u.add(T(t)),this.onEnable=t=>o.add(T(t)),this.isDisabled=()=>l,this.destroy=()=>s=s||(async()=>{null!=i&&i.debug8("Destroying"),a=!0,await this.disable();for(var t of h)await t.invoke(this);var e;o.clear(),u.clear(),h.clear(),n&&(null==(e=yh.get(r))?void 0:e.get(n))===this&&(E(e,n),yh.prune(r))})(),this.onDestroy=t=>h.add(T(t)),this.isDestroyed=()=>a,this.getElement=()=>r}}let fh=async(e,h,c,d)=>{var r;if(!bh.has(e)){bh.add(e),await Ea();let u=y(e),t=null!=(r=null==d?void 0:d.selector)?r:wh(u);if(st.autoWidgets){let o=Ca.reuse();o.onMutation(async t=>{let e=Zr(t),r=Ke(c)?await c(e):c,i=[];var n,l=[],a=xl(e,u);null!=d&&d.supportsMultiple?(yl(e,u)&&l.push(""),null!==a&&l.push(...a?Ui(a,";",!0):[""])):l.push(null!=a?a:"");for(n of l){var s=r?await gh(n,r):void 0,s=await h(e,s);s&&i.push(...Fi(s))}q(i)&&o.onMutation(()=>{for(var t of i)t.destroy()},{target:e,categories:[F]})},{selector:t,categories:[L]})}}},ph=(t,e,r="|")=>{var i,n={};for(i in t instanceof Object||(t=_h(t,r)),e)n[i]=e[i](i,t[i]);return n},gh=async(t,e,r="|")=>{var i,n={},l=ph(t,e,r);for(i in l)n[i]=await l[i];return n},wh=t=>`.${t},[data-${t}]`,mh=async(t,e,r)=>{let i=r.get(e);return i||(await mn(0),i=r.get(e))?i:(jn(`No ${t} widget for element `+Hi(e)),null)},yh=Nn(()=>S()),bh=ni(),_h=(t,e)=>{var r,i={};for(r of mr(Ui(null!=t?t:"",e,!0),t=>!je(t))){var[n,l]=Ui(r,/\s*=\s*/,!0,1);i[zi(n)]=null!=l?l:""}return i},e=(t,l,a)=>{Eh.has(t)||Eh.set(t,async(t,e)=>{var r,i=Ke(a)?await a(t):a,n=[],i=i?await gh(e,i,","):void 0;for(r of Ui(e,",",!0))r&&!Y(r,"=")&&n.push(r);return l(t,n,i)})},kh=async(t,e,r)=>{var i=Eh.get(e);if(i)return i(t,r||"");throw m(`Unknown action '${e}'`)},Eh=S();class xh{static register(){e("add-class",(t,e)=>new xh(t,...e))}constructor(t,...e){var{Yt:r,q:i,qt:n}=Nh(t,e);i(),this.do=r,this.undo=i,this[g]=n}}class Sh{static register(){e("remove-class",(t,e)=>new Sh(t,...e))}constructor(t,...e){var{Yt:r,q:i,qt:n}=Nh(t,e);r(),this.do=i,this.undo=r,this[g]=n}}let Nh=(e,r)=>({Yt:()=>dt(e,...r),q:()=>_l(e,...r),qt:async()=>{for(var t of r)await El(e,t)}}),Th=async(t,e,r,i=!1)=>{if("getAnimations"in t&&null===xl(t,y("test-legacy"))){i||await ht();for(var n of t.getAnimations())e(n)}else i||await ut(),r(t)},Oh=t=>{ct(t,ye),t[St],bl(t,ye)};class Ch{static register(){e("animate",t=>new Ch(t))}constructor(e){let r=ot?new ot.Logger({name:"Animate-"+Hi(e)}):null,i=(Ph(e,Dh,r,!0),!0);this.do=()=>Ph(e,Dh,r),this.undo=()=>Ph(e,Ah,r),this[g]=()=>{var t=Ph(e,i?Dh:Mh,r);return i=!1,t}}}let Dh=0,Ah=1,Mh=2,Ph=(t,e,r,i=!1)=>(null!=r&&r.debug8("Animating element"),Th(t,t=>Ih(t,e,r,i),t=>Bh(t,e,r,i),i)),Ih=(e,r,i,n)=>{var t=!Oa,l=-1===e.playbackRate;if(null!=i&&i.debug9("Setting up animation",e,{direction:r,isBackward:l}),r===Mh||r===Dh&&l||r===Ah&&!l?(null!=i&&i.debug9("Reversing animation",e.playState),e.reverse()):"paused"===e.playState?(null!=i&&i.debug9("Playing animation",e.playState),e.play()):null!=i&&i.debug9("Animation has played or is playing already",e.playState),(n||t)&&(null!=i&&i.debug9("Pausing animation",e.playState),e.pause(),n||Sa().then(()=>{null!=i&&i.debug9("Restarting animation",e.playState),e.play()})),k(e,CSSAnimation)){let t=t=>Rh(t,e,r,i,n);e.addEventListener(Mt,t),e.addEventListener("finish",()=>e.removeEventListener(Mt,t))}},Rh=(t,e,r,i,n)=>{null!=i&&i.debug9("Animation cancelled, re-setting up new one");var l=qr(t);if(k(l,Animation)){var l=l.effect;if(k(l,KeyframeEffect))for(var a of(null==(l=qr(l))?void 0:l.getAnimations())||[])if(k(a,CSSAnimation)&&a.animationName===e.animationName){Ih(a,r,i,n);break}}},Bh=(t,e,r,i)=>{var n=yl(t,_e),l=yl(t,be),a=!Oa,s=e===Ah||e===Mh&&!n,o=i||a;null!=r&&r.debug9("Setting up legacy animations",t,{direction:e,isBackward:n,isPaused:l,goBackwards:s,doPause:o}),s===n&&o===l?null!=r&&r.debug9("No need to reset or pause animation"):(Oh(t),bl(t,be,_e),ct(t,...s?[_e]:[],...o?[be]:[]),!i&&a&&Sa().then(()=>_l(t,be)))};class Wh{static register(){e("animate-play",t=>new Wh(t))}constructor(t){var{Zt:e,Kt:r,qt:i}=Fh(t);Vh(t,Lh,!0),this.do=e,this.undo=r,this[g]=i}}class $h{static register(){e("animate-pause",t=>new $h(t))}constructor(t){var{Zt:e,Kt:r,qt:i}=Fh(t);e(),this.do=r,this.undo=e,this[g]=i}}let Lh=1,Fh=t=>({Zt:()=>Vh(t,0),Kt:()=>Vh(t,Lh),qt:()=>Vh(t,2)}),Vh=(t,r,i=!1)=>Th(t,t=>{var e="paused"===t.playState;0===r||e&&2===r?t.play():t.pause()},t=>{i&&Oh(t);var e=yl(t,be);(0===r||e&&2===r?bl:ct)(t,be)},i);class Hh{static register(){e("display",t=>new Hh(t))}constructor(t){ul(t);var{Qt:e,Jt:r,qt:i}=Uh(t);this.do=e,this.undo=r,this[g]=i}}class jh{static register(){e("undisplay",t=>new jh(t))}constructor(t){sl(t);var{Qt:e,Jt:r,qt:i}=Uh(t);this.do=r,this.undo=e,this[g]=i}}let Uh=t=>({Qt:async()=>{await ol(t)},Jt:async()=>{await hl(t)},qt:async()=>{await pl(t)}}),zh=(e,t)=>{if(!e)return t;if("#"===e[0]){let t=vr(e.slice(1));return t||null}var r=["next","prev","this","first","last"].find(t=>e.startsWith(t+".")||e.startsWith(t+"-")||e===t);if(!r)throw m(`Invalid search specification '${e}'`);let i=e.slice(q(r)),n=i.slice(0,1),l=i.slice(1),a;if("."===n)a=n+l;else{if(!(l=l||xl(t,Xh)||""))throw m(`No reference name in '${e}'`);a=`[${Yh}="${l}"]`}let s;if("first"===r)s=Zh(a);else if("last"===r)s=Kh(a);else if("this"===r)s=Qh(a,t);else if("next"===r)s=Jh(a,t);else{if("prev"!==r)return O(ui("Unhandled relation case "+r)),null;s=tc(a,t)}return s||null},Gh=(t,e,r=200)=>_a(()=>zh(t,e),r),Xh=y("ref"),Yh=Ae(Xh),qh=t=>dr(t),Zh=t=>cr(t),Kh=t=>{var e=qh(t);return e&&e[q(e)-1]||null},Qh=(t,e)=>e.closest(t),Jh=(t,e)=>ec(t,e,!1),tc=(t,e)=>ec(t,e,!0),ec=(t,e,r)=>{if(e=Qh(t,e)||e,!x().contains(e))return null;var i=qh(t);if(!i)return null;let n=q(i),l=r?n-1:-1;for(let s=0;s<n;s++){var a=ir(e,i[s]);if(i[s]===e||a){l=s+(r?-1:a?0:1);break}}return i[l]||null};class rc extends vh{static get(t,e){var r=super.get(t,e);return k(r,rc)?r:null}static register(){ic("run",(t,e,r,i)=>new rc(t,r,i),{})}constructor(t,l,e){var r;super(t,e);let a=ot?new ot.Logger({name:"Trigger-"+Hi(t),logAtCreation:{actions:l,config:e}}):null,s=null!=(r=null==e?void 0:e.once)&&r,i=null!=(r=null==e?void 0:e.oneWay)&&r,n=(null==e?void 0:e.delay)||0,o=null!=(r=null==e?void 0:e.doDelay)?r:n,u=null!=(r=null==e?void 0:e.undoDelay)?r:n,h,c=!1,d=async(t,e,r)=>{if(!this.isDisabled()){var i=Xi();if(h=i,null!=a&&a.debug10(`callActions [${i}] (new toggle state ${r})`,e),t&&(await mn(t),h!==i))null!=a&&a.debug10(`callActions [${i}]: overriden by `+h);else{for(var n of l)null!=a&&a.debug10(`callActions [${i}]`,n),e(n);(c=r)&&s&&(_(v),_(f),_(p))}}},v=T(()=>{d(o,t=>{t.do()},!0)}),f=T(()=>{i||d(u,t=>{t.undo()},!1)}),p=T(()=>{d(c?u:o,t=>{t[g]()},!c)});this.run=v.invoke,this.reverse=f.invoke,this[g]=(i?v:p).invoke,this.getActions=()=>[...l],this.getConfig=()=>w(e||{})}}let ic=(p,g,w)=>{let m=y("on-"+p);fh(p,async t=>{var e,r,i,n=[],l=oc(t),a=Ke(w)?await w(t):w,s=Ui(null!=(e=xl(t,y("on-"+p)))?e:"",nc,!0);for(r of Kr(t))r.startsWith(m+"--")&&s.push(r.slice(q(m)+2));for(i of s){var o,u,[h,c]=Ui(i,lc,!0,1),[h,d]=Ui(h,ac,!0,1),h=yr(Ui(h,",",!0))||[],c=await gh(c,Cr(l,a),lc),v=null!=(o=c.actOn)?o:t,f=[];for(u of Ui(d||"",ac,!0)){let[t,e]=Ui(u,sc,!0,1);try{f.push(await kh(v,t,e||""))}catch(t){if(!k(t,Se))throw t}}n.push(await g(t,h,f,c))}return n},null,{selector:`[class^="${m}--"],[class*=" ${m}--"],[data-${m}]`})},nc=";",lc="+",ac="@",sc=":",oc=i=>({id:l,once:t,oneWay:t,delay:n,doDelay:n,undoDelay:n,actOn:(t,e)=>{var r;return null!=(r=Ze(e)?Gh(e,i):null)?r:void 0}});class uc{static register(){e("enable",(t,e)=>new uc(t,...e))}constructor(t,...e){var{te:r,ee:i,re:n}=dc(t,e);i(),this.do=r,this.undo=i,this[g]=n}}class hc{static register(){e("disable",(t,e)=>new hc(t,...e))}constructor(t,...e){var{te:r,ee:i,re:n}=dc(t,e);r(),this.do=i,this.undo=r,this[g]=n}}class cc{static register(){e("run",(t,e)=>new cc(t,...e))}constructor(t,...e){var{ie:r,ne:i,qt:n}=dc(t,e);this.do=r,this.undo=i,this[g]=n}}let dc=(t,e)=>{let r=vc(t,e),i=async t=>{var e;for(e of await r)e[t]()};return{te:()=>i("enable"),ee:()=>i("disable"),re:()=>i("toggleEnable"),ie:()=>i("run"),ne:()=>i("reverse"),qt:()=>i(g)}},vc=async(e,t)=>{var r=[];if(q(t))for(var i of t){let t=rc.get(e,i);t||(await mn(0),t=rc.get(e,i))?r.push(t):jn(`No trigger with ID ${i} for element `+Hi(e))}else jn("At least 1 ID is required for enable action");return r};class fc{static register(){e("scroll-to",(t,e,r)=>{var i=r?{left:r.offsetX,top:r.offsetY}:void 0;return new fc(t,{scrollable:null==r?void 0:r.scrollable,offset:i})},pc)}constructor(l,t){let a=null==t?void 0:t.offset,e=null==t?void 0:t.scrollable,s=Nu.reuse(),o=-1,u=-1;this.do=async()=>{var t=await s.fetchCurrentScroll(),t=(o=t[_t],u=t[kt],await s.scrollTo(l,{offset:a,scrollable:e}));await(null==t?void 0:t.waitFor())},this.undo=async()=>{var t;-1!==o&&await(null==(t=await s.scrollTo({top:o,left:u}))?void 0:t.waitFor())},this[g]=async()=>{let t=await s.fetchCurrentScroll(),e=-1!==o,r=!1,i={top:()=>(r=!0,o),left:u},n=await s.scrollTo(l,e?{altTarget:i,offset:a}:{offset:a});await(null==n?void 0:n.waitFor()),r||(o=t[_t],u=t[kt])}}}let pc=i=>({offsetX:(t,e)=>{var r;return null!=(r=n(t,e))?r:0},offsetY:(t,e)=>{var r;return null!=(r=n(t,e))?r:0},scrollable:(t,e)=>{var r;return null!=(r=Ze(e)?Gh(e,i):null)?r:void 0}});class gc{static register(){e("set-attribute",(t,e,r)=>new gc(t,{[e[0]]:r||{}}),wc)}constructor(i,n){if(!n)throw m("Attributes are required");let l=!1,t=async t=>{for(var e in l=t,await ut(),n){var r=n[e][t?"on":"off"],e=Gi(e);He(r)?wr(i,e):pr(i,e,r)}};this.do=()=>t(!0),this.undo=()=>t(!1),this[g]=()=>t(!l),this.undo()}}let wc={on:l,off:l};class mc{static register(){e("show",t=>new mc(t))}constructor(t){jl(t),fl(t);var{le:e,ae:r,qt:i}=bc(t);this.do=e,this.undo=r,this[g]=i}}class yc{static register(){e("hide",t=>new yc(t))}constructor(t){jl(t),dl(t);var{le:e,ae:r,qt:i}=bc(t);this.do=r,this.undo=e,this[g]=i}}let bc=t=>({le:async()=>{await dl(t)},ae:async()=>{await fl(t)},qt:async()=>{await gl(t)}}),_c=t=>Y(Ec,t),kc=t=>null!==t.match(Sc),Ec=[gt,wt,nt,lt],xc="("+Ec.join("|")+")",Sc=RegExp(`^${xc}-${xc}$`),Nc=(t,r,e)=>{fh(t,(t,e)=>{if(rr(t)){if(!Tc.get(t))return r(t,e)}else O(m("Openable widget supports only HTMLElement"));return null},e)};class Tc extends vh{static get(t){return Mc.get(t)||null}constructor(t,e){super(t);let{isModal:r,isOffcanvas:i}=e,n=ni(),l=ni(),a=!1,s=async()=>{if(!this.isDisabled()&&!a){a=!0;for(var t of n)await t.invoke(this);r&&Ul(),await Cl(h,$c)}},o=async()=>{if(!this.isDisabled()&&a){a=!1;for(var t of l)await t.invoke(this);r&&zl(),i&&u(),await Al(h,$c)}},u=async()=>{await mn(1e3),await ht(),ei(v,{top:0,left:0})},{root:h,container:c,triggers:d,outerWrapper:v}=(this.open=s,this.close=o,this[g]=()=>(a?o:s)(),this.onOpen=t=>n.add(T(t)),this.onClose=t=>l.add(T(t)),this.isOpen=()=>a,this.getRoot=()=>h,this.getContainer=()=>c,this.getTriggers=()=>[...d.keys()],this.getTriggerConfigs=()=>S([...d.entries()]),this.onDestroy(()=>{n.clear(),l.clear()}),od(this,t,e))}}class Oc extends Tc{static register(){Nc(Pc,(t,e)=>new Oc(t,e),id)}constructor(e,r){let t,i,n=null==r?void 0:r.horizontal,l=n?Ct:Dt,a=(super(e,{name:Pc,id:null==r?void 0:r.id,className:null==r?void 0:r.className,autoClose:null!=(t=null==r?void 0:r.autoClose)&&t,isModal:!1,isOffcanvas:!1,closeButton:!1,triggers:null==r?void 0:r.triggers,wrapTriggers:!0,onSetup:()=>{for(var[t,e]of this.getTriggerConfigs().entries())hd(t,e,this,r),Nl(t,de,l)}}),this.getRoot()),s=Yr(a)[0],o=(Tl(a,de,l),Cl(a,Lc,null!=(i=null==r?void 0:r.reverse)&&i),jl(e,100),jl(a,100),jl(s,100),null),u=async()=>{await _l(a,ae),await _l(s,ae),o&&ar(o);var t=await Hl(a);o=lr(()=>{this.isOpen()&&(dt(a,ae),dt(s,ae),o=null)},t)},h=(this.onOpen(u),this.onClose(u),null==r?void 0:r.peek);if(h&&(async()=>{var t=qe(h)?h:await Wl(e,qc);dt(a,Fc),t&&Ll(a,qc,t)})(),n){let t=async()=>{var t=await Rl(a,rt);await Ll(e,Zc,t)};lr(t),this.onClose(t),this.onOpen(async()=>{await t(),mn(2e3).then(()=>{this.isOpen()&&Vl(e,Zc)})})}}}class Cc extends Tc{static register(){Nc(Ic,(t,e)=>new Cc(t,e),nd)}constructor(r,t){var e;super(r,{name:Ic,id:null==t?void 0:t.id,className:null==t?void 0:t.className,autoClose:null==(e=null==t?void 0:t.autoClose)||e,isModal:!1,isOffcanvas:!1,closeButton:null!=(e=null==t?void 0:t.closeButton)&&e,triggers:null==t?void 0:t.triggers});let i=this.getRoot(),n=this.getContainer(),l=null!=(e=null==t?void 0:t.position)?e:Gc;l!==Gc&&Tl(i,ce,l),n&&l===Gc&&this.onOpen(async()=>{var[t,e]=await Or([Zo.reuse().fetchCurrentSize(r),Yu.reuse().fetchCurrentView(n)]),t=await cd(t,e);t&&await Tl(i,ce,t)})}}class Dc extends Tc{static register(){Nc(Rc,(t,e)=>new Dc(t,e),ld)}constructor(t,e){var r;super(t,{name:Rc,id:null==e?void 0:e.id,className:null==e?void 0:e.className,autoClose:null==(r=null==e?void 0:e.autoClose)||r,isModal:!0,isOffcanvas:!0,closeButton:null==(r=null==e?void 0:e.closeButton)||r,triggers:null==e?void 0:e.triggers})}}class Ac extends Tc{static register(){Nc(Bc,(t,e)=>new Ac(t,e),ad)}constructor(t,e){super(t,{name:Bc,id:null==e?void 0:e.id,className:null==e?void 0:e.className,autoClose:null==(r=null==e?void 0:e.autoClose)||r,isModal:!1,isOffcanvas:!0,closeButton:null==(r=null==e?void 0:e.closeButton)||r,triggers:null==e?void 0:e.triggers});var r=(null==e?void 0:e.position)||lt;Tl(this.getRoot(),ce,r)}}let Mc=ii(),Pc="collapsible",Ic="popup",Rc="modal",Bc="offcanvas",Wc=y("close-button"),$c=y("is-open"),Lc=y(Jt),Fc=y("peek"),Vc=y("opens-on-hover"),Hc=y("line"),jc=y("icon-position"),Uc=y("trigger-icon"),zc=y("icon-wrapper"),Gc="auto",Xc=re+"expanded",Yc=re+"modal",qc=Ce("peek-size"),Zc=De("collapsible-width"),Kc=["arrow-"+Z,"arrow-"+K,"arrow-"+nt,"arrow-"+lt],Qc=["plus",...Kc],Jc=["minus","x",...Kc],td=t=>Y(Qc,t),ed=t=>Y(Jc,t),rd={id:l,className:(t,e)=>u(t,Fi(e)),autoClose:t,icon:(t,e)=>(!e||!1!==Vi(e))&&l(t,e,_c),iconClosed:(t,e)=>l(t,e,td),iconOpen:(t,e)=>l(t,e,ed),hover:t},id={id:l,className:(t,e)=>u(t,Fi(e)),horizontal:t,reverse:t,peek:rn,autoClose:t,icon:(t,e)=>!1!==Vi(e)&&l(t,e,_c),iconClosed:(t,e)=>l(t,e,td),iconOpen:(t,e)=>l(t,e,ed)},nd={id:l,className:(t,e)=>u(t,Fi(e)),closeButton:t,position:(t,e)=>l(t,e,t=>t===Gc||_c(t)||kc(t)),autoClose:t},ld={id:l,className:(t,e)=>u(t,Fi(e)),closeButton:t,autoClose:t},ad={id:l,className:(t,e)=>u(t,Fi(e)),closeButton:t,position:(t,e)=>l(t,e,_c),autoClose:t},sd=(t,e)=>{let r=Mc.get(t),i=(null==r?void 0:r.getRoot())||t,n=(i=Xr(i)?i:t).closest("."+e);return n||Xr(i)},od=(i,n,r)=>{let t,l=(h=r.name,{O:(h=y(h))+"__root",se:h+"__overlay",oe:h+"__inner-wrapper",ue:h+"__outer-wrapper",he:h+"__content",ce:h+"__container",de:h+"__trigger",ve:h+"-container",fe:h+"-trigger",pe:h+"-content-id"});let a=sd(n,l.ve),s=null!=(t=r.wrapTriggers)&&t,o=((t,e,i,r)=>{let n=S();e=e||((e,r)=>{let t=sd(e,r.ve),i=t=>`.${r.fe}${t},`+`[data-${r.fe}]`+t,n=xl(e,r.pe),l=[];return n?l=[...dr(i(`[data-${r.pe}="${n}"]`))]:t&&(l=[...Er(hr(t,i(`:not([data-${r.pe}])`))).filter(t=>!e.contains(t))]),l})(t,r);var l=(t,e)=>{var r;i&&(r=at(rl(_r(t))?"span":"div"),Jl(t,{wrapper:r,ignoreMove:!0}),t=r),n.set(t,e)};if(ze(e))for(var a of e)l(a,ph(xl(a,r.fe),rd));else if(k(e,Map))for(var[s,o]of e.entries())l(s,ph(o,rd));return n})(n,r.triggers,s,l),u=at("div");dt(u,l.oe);var e,h=Ql(u);let c,d,v=(r.isOffcanvas?(dt(h,l.ue),c=Ql(h),d=at("div"),g=at("div"),dt(g,l.se),sa(g,{to:c})):c=d=h,r.id&&(c.id=r.id),r.className&&ct(c,...Fi(r.className)),Al(c,$c),ua(c,r.name));r.isModal&&(pr(c,ee,"dialog"),pr(c,Yc)),dt(c,l.O),jl(c),r.closeButton&&(g=Ve("Close"),dt(g,Wc),vt(g,G,()=>{i.close()}),sa(g,{to:r.isOffcanvas?c:u}));for(e of[st.lightThemeClassName,st.darkThemeClassName])yl(n,e)&&dt(c,e);let f={content:n,root:c,container:a,outerWrapper:h,triggers:o};i.onClose(async()=>{for(var t of o.keys())Pl(t,Vc),gr(t,Xc),await Al(t,$c)}),i.onDestroy(async()=>{await ut(),ra(d,n,{ignoreMove:!0}),aa(c),bl(n,l.he),a&&bl(a,l.ce);for(var[t,e]of o.entries())wr(t,ie),wr(t,Xc),Ml(t,Vc),Ml(t,$c),bl(t,l.de,...(null==e?void 0:e.className)||[]),t.id===(null==e?void 0:e.id)&&(t.id=""),s&&ra(t,Yr(t)[0],{ignoreMove:!0});o.clear();for(var r of[n,...o.keys()])Mc.get(r)===i&&E(Mc,r)});var p,g=Mc.get(n);for(p of[n,...o.keys()])Mc.set(p,i);return Ea().then(null==g?void 0:g.destroy).then(ut).then(()=>{if(!i.isDestroyed()){ct(n,l.he),a&&ct(a,l.ce),r.isOffcanvas&&aa(c,{to:b(),ignoreMove:!0}),aa(d,{to:n,position:"before",ignoreMove:!0}),aa(n,{to:u,ignoreMove:!0});for(var[t,e]of o.entries())pr(t,ie,v),gr(t,Xc),Ol(t,Vc,e[J]),Dl(t,$c),ct(t,l.de,...(null==e?void 0:e.className)||[]),null!=e&&e.id&&(t.id=e.id);ud(i,f,r,l),r.onSetup&&r.onSetup()}}),f},ud=(n,t,r,e)=>{let{content:i,root:l,triggers:a}=t,s=x(),o=0,u=!1,h=null,c=t=>Y(Er(a.keys()),t.closest(wh(e.de))),d=t=>{var e;return null==(e=null==(e=a.get(t))?void 0:e.preventDefault)||e},v=t=>{var e;return null==(e=a.get(t))?void 0:e.hover},f=t=>{var e;return null!=(e=t?null==(e=a.get(t))?void 0:e.autoClose:null)?e:r.autoClose},p=(t,e)=>{var r,i=Zr(t);X(i)&&(d(i)&&kr(t),!1!==e&&n.isOpen()&&(r=o,Pe()-r<1e3)||((null!=e?e:!n.isOpen())?(h=i,pr(i,Xc),Cl(i,$c),n.open(),f(i)&&v(i)&&(vt(l,$t,g),vt(l,Lt,y))):n.close()))},g=()=>{u=!0},w=t=>{u=u&&tr(t)},m=t=>{g(),n.isOpen()||(o=Pe(),p(t,!0))},y=t=>{w(t);var e=Zr(t);X(e)&&f(e)&&lr(()=>{u||n.close()},r.isOffcanvas?300:50)},b=t=>{"Escape"===t.key&&n.close()},_=t=>{var e=qr(t);e!==s&&(!X(e)||i.contains(e)||c(e))||n.close()},k=(e,r)=>{if(f(e)){let t=r?ft:vt;t(s,"keyup",b),lr(()=>t(s,G,_),100),e&&v(e)&&t(e,Lt,y)}},E=t=>{var e,r,i=t?ft:vt;for([e,r]of a.entries())i(e,G,p),r[J]&&i(e,$t,m)};E(!1),n.onOpen(()=>{k(h,!1)}),n.onClose(()=>{o=0,u=!1,ft(l,$t,g),ft(l,Lt,y),k(h,!0),h=null}),n.onDestroy(()=>{E(!0)})},hd=(r,t,i,e)=>{let n,l,a,s,o,u=null!=(n=t.icon)?n:null==e?void 0:e.icon,h=null!=(l=null!=(a=t.iconClosed)?a:null==e?void 0:e.iconClosed)?l:"plus",c=null!=(s=null!=(o=t.iconOpen)?o:null==e?void 0:e.iconOpen)?s:"minus";if(u){dt(r,zc),Tl(r,jc,u);let t=at("span");Nl(t,Uc,h);for(let e=0;e<2;e++){var d=at("span");ct(d,Hc),aa(d,{to:t})}sa(t,{to:r,ignoreMove:!0}),i.onOpen(()=>{Sl(r,$c)&&Tl(t,Uc,c)}),i.onClose(()=>{Tl(t,Uc,h)})}},cd=async(t,e)=>{var r=e.relative,i=r[gt],n=r[wt],l=r[nt],a=r[lt],s=r.hMiddle,o=r.vMiddle,r=await Fo(),u=t.border[rt]/r[rt],h=t.border[it]/r[it],r={top:i-h,bottom:1-(n+h),left:l-u,right:1-(a+u)},r=Ri(r);if(void 0!==r){let t=r,e;switch(r){case gt:case wt:e={left:1-(l+u),right:a-u,middle:$r(s-u/2,1-(s+u/2))};break;case nt:case lt:e={top:1-(i+h),bottom:n-h,middle:$r(o-h/2,1-(o+h/2))};break;default:return}r=Ri(e);return"middle"!==r&&(t+="-"+r),t}};class dd{static register(){e("open",t=>new dd(t))}constructor(t){let e=t=>null==t?void 0:t.open(),r=t=>null==t?void 0:t.close(),i=t=>null==t?void 0:t.toggle(),n=mh("openable",t,Tc);this.do=()=>n.then(e),this.undo=()=>n.then(r),this[g]=()=>n.then(i)}}class vd extends vh{static get(t){var e=super.get(t,jd);return k(e,vd)?e:null}static register(){fh(_d,(t,e)=>vd.get(t)?null:new vd(t,e),Ud)}constructor(t,e){var r=null==(r=vd.get(t))?void 0:r.destroy();super(t,{id:jd});let i=(null==e?void 0:e.pages)||[],n=(null==e?void 0:e.toggles)||[],l=(null==e?void 0:e.switches)||[],a={ge:(null==e?void 0:e.nextSwitch)||null,we:(null==e?void 0:e.prevSwitch)||null},s=wh(Nd),o=wh(Td),u=wh(Od);var h,c=wh(Cd),d=wh(Dd);if(q(i)||(i.push(...hr(t,s)),q(i))||i.push(...tl(t).filter(t=>!t.matches(u))),q(n)||n.push(...hr(t,o)),q(l)||l.push(...hr(t,u)),a.ge||(a.ge=ur(t,c)),a.we||(a.we=ur(t,d)),q(i)<2)throw m("Pager must have more than 1 page");for(h of i)if(!t.contains(h)||h===t)throw m("Pager's pages must be its descendants");let v={me:i,ye:n,be:l,_e:a},f=qd(this,v,t,e);(r||Tr()).then(()=>{this.isDestroyed()||Yd(this,t,v,e,f)}),this.nextPage=()=>f.ke(),this.prevPage=()=>f.Ee(),this.goToPage=t=>f.xe(t),this.disablePage=f.Se,this.enablePage=f.Ne,this.togglePage=f.Te,this.isPageDisabled=f.Oe,this.getCurrentPage=f.Ce,this.getPreviousPage=f.De,this.getCurrentPageNum=f.Ae,this.getPreviousPageNum=f.Me,this.onTransition=f.Pe,this.getPages=()=>[...i],this.getSwitches=()=>[...l],this.getToggles=()=>[...n]}}let fd="current",pd=re+fd,gd="covered",wd="next",md="total-pages",yd="current-page",bd="page-number",_d="pager",kd=y(_d),Ed=kd+"__root",xd=kd+"__page-container",Sd=kd+"__page",Nd=kd+"-page",Td=kd+"-toggle",Od=kd+"-switch",Cd=kd+"-next-switch",Dd=kd+"-prev-switch",Ad=y("is-fullscreen"),Md=y("use-parallax"),Pd=y(md),Id=y(yd),Rd=Id+"-is-last",Bd=Id+"-is-first-enabled",Wd=Rd+"-enabled",$d=y("page-state"),Ld=y(bd),Fd=De(md),Vd=De(yd),Hd=De(bd),jd=kd,Ud={initialPage:n,fullscreen:t,parallax:t,horizontal:t,useGestures:(t,e)=>{var r;if(!He(e))return null!==(r=Vi(e))?r:u("useGestures",l(t,e),os)||!0},alignGestureDirection:t,preventDefault:t},zd=e=>ht().then(()=>{var t;return null!=(t=Zs(e,{active:!0}))?t:void 0}),Gd=(t,e,r,i)=>{let n=!0,l=!0;for(let a=1;a<=r;a++)i(a)||(a<e?n=!1:a>e&&(l=!1));return Ll(t,Vd,e+""),Tl(t,Id,e+""),Cl(t,Rd,r==r),Cl(t,Bd,n),Cl(t,Wd,l)},Xd=async(t,e,r)=>{for(var i of[t.me[e-1],t.ye[e-1],t.be[e-1]])i&&await Tl(i,$d,r)},Yd=(t,i,e,r,n)=>{let l,a,s,o,u,h,c,d,v=e.me,f=e.ye,p=e.be,g=e._e.ge,w=e._e.we,m=null==(l=v[0])?void 0:l.parentElement,y=bi(null!=(a=null==r?void 0:r.initialPage)?a:1),b=null!=(s=null==r?void 0:r.fullscreen)&&s,B=null!=(o=null==r?void 0:r.parallax)&&o,_=null!=(u=null==r?void 0:r.horizontal)&&u,W=_?Ct:Dt,k=null==(h=null==r?void 0:r.useGestures)||h,$=null!=(c=null==r?void 0:r.alignGestureDirection)&&c,L=null==(d=null==r?void 0:r.preventDefault)||d,F=Nu.reuse(),E=null,x=null,S=(b&&(x=Yu.reuse({rootMargin:"0px",threshold:.3})),k&&(E=ys.reuse()),async()=>{F.scrollTo(i,{scrollable:await zd(i)})}),N=(t,e)=>{var r=e.intent===yt;(Y([nt,Z],e.direction)?r?n.ke:n.Ee:r?n.Ee:n.ke)(e)},T=()=>{var t,e;null!=(t=E)&&t.onGesture(i,N,(t=$?_?[nt,lt]:[Z,K]:void 0,{devices:(e=k,"boolean"===zr(e)?void 0:k),intents:[yt,et],directions:t,deltaThreshold:25,preventDefault:L})),null!=(e=x)&&e.onView(i,S,{views:"at"})},O=t=>{var e=Zr(t);return X(e)?bi(xl(e,Ld)):0},C=t=>{var e=O(t);n.Te(e)},V=t=>{var e=O(t);n.xe(e)},H=()=>n.ke(),j=()=>n.Ee();t.onDisable(()=>{var t;null!=(t=E)&&t.offGesture(i,N),null!=(t=x)&&t.offView(i,S)}),t.onEnable(T),t.onDestroy(async()=>{await ut(),Ml(i,de),Ml(i,Ad),Ml(i,Md),Ml(i,Id),Ml(i,Rd),Ml(i,Bd),Ml(i,Wd),Ml(i,Pd),Fl(i,Vd),Fl(i,Fd);for(let r=0;r<q(v);r++){bl(v[r],Sd);for(var[t,e]of[[v[r],null],[f[r],C],[p[r],V]])t&&(Ml(t,$d),Ml(t,Ld),Fl(t,Hd),e)&&ft(t,G,e);wr(v[r],pd)}g&&ft(g,G,H),w&&ft(w,G,j),bl(i,Ed),m&&bl(m,xd)}),T(),dt(i,Ed),m&&dt(m,xd);var D,A=q(v);Tl(i,de,W),Cl(i,Ad,b),Cl(i,Md,B),Tl(i,Pd,A+""),Ll(i,Fd,(A||1)+"");for(D of v)jl(D),dt(D,Sd);for(let R=0;R<A;R++){{var M=void 0,P=e,I=R+1;let t=Tr();for(M of[P.me[I-1],P.ye[I-1],P.be[I-1]])M&&(Tl(M,Ld,I+""),t=Ll(M,Hd,I+""));t}Xd(e,R+1,wd);for(var[U,z]of[[f[R],C],[p[R],V]])U&&vt(U,G,z)}g&&vt(g,G,H),w&&vt(w,G,j),(y<1||y>A)&&(y=1),n.xe(y)},qd=(n,l,a,t)=>{let s=l.me,o=Nu.reuse(),u=null==t?void 0:t.fullscreen,e={},h=ni(),c=async()=>({scrollable:await zd(a),asFractionOf:"visible",weCanInterrupt:!0}),d=-1,v=-1,r=0,f=t=>{var e;return!n.isDisabled()&&((null==t?void 0:t.device)!==Q||1e3<(e=Pe())-r&&(r=e,!0))},i=async(e,t)=>{if((e=bi(e,-1))!==d&&f(t)){var r=q(s);if(1===d&&0===e||d===r&&e===r+1)u&&o.scroll(e?(null==t?void 0:t.direction)===lt?lt:K:(null==t?void 0:t.direction)===nt?nt:Z,await c());else if(!(w(e)||e<1||r<e)){v=0<d?d:e,d=e;for(var i of h)await i.invoke(n);wr(s[v-1],pd);for(let t=v;t!==d;d<v?t--:t++)w(t)||Xd(l,t,d<v?wd:gd);Gd(a,d,r,w),pr(s[d-1],pd),await Xd(l,d,fd)}}},p=async t=>{let e=d+1;for(;w(e);)e++;return i(e,t)},g=async t=>{let e=d-1;for(;w(e);)e--;return i(e,t)},w=t=>!0===e[t],m=async t=>{t=bi(t),n.isDisabled()||t<1||t>q(s)||(e[t]=!0,t===d&&(await g(),t===d)&&(await p(),t===d)?e[t]=!1:(Gd(a,d,q(s),w),await Xd(l,t,"disabled")))},y=async t=>{t=bi(t),!n.isDisabled()&&w(t)&&(e[t]=!1,Gd(a,d,q(s),w),await Xd(l,t,t<d?gd:wd))};return{ke:p,Ee:g,xe:i,Se:m,Ne:y,Te:t=>(w(t)?y:m)(t),Oe:w,Ce:()=>s[d-1],De:()=>s[v-1],Ae:()=>0<q(s)?d:0,Me:()=>0<q(s)?v:0,Pe:t=>h.add(T(t))}};class Zd{static register(){e("next-page",t=>new Zd(t))}constructor(t){let e=!1,{ke:r,Ee:i}=ev(t);this.do=()=>(e=!0,r()),this.undo=()=>(e=!1,i()),this[g]=()=>{var t=e?i:r;return e=!e,t()}}}class Kd{static register(){e("prev-page",t=>new Kd(t))}constructor(t){let e=!1,{ke:r,Ee:i}=ev(t);this.do=()=>(e=!0,i()),this.undo=()=>(e=!1,r()),this[g]=()=>{var t=e?r:i;return e=!e,t()}}}class Qd{static register(){e("go-to-page",(t,e)=>new Qd(t,bi(e[0])))}constructor(t,e){if(!e)throw m("Target page is required");let r=ev(t).xe;this.do=()=>r(e),this.undo=()=>r(-1),this[g]=()=>r(e,-1)}}class Jd{static register(){e("enable-page",(t,e)=>new Jd(t,bi(e[0])))}constructor(t,e){if(!e)throw m("Target page number is required");let{Ne:r,Se:i,Te:n}=ev(t);i(e),this.do=()=>r(e),this.undo=()=>i(e),this[g]=()=>n(e)}}class tv{static register(){e("disable-page",(t,e)=>new tv(t,bi(e[0])))}constructor(t,e){if(!e)throw m("Target page number is required");let{Ne:r,Se:i,Te:n}=ev(t);r(e),this.do=()=>i(e),this.undo=()=>r(e),this[g]=()=>n(e)}}let ev=t=>{let l=null,e=t=>null==t?void 0:t.nextPage(),r=t=>null==t?void 0:t.prevPage(),i=mh("pager",t,vd);return{ke:()=>i.then(e),Ee:()=>i.then(r),xe:(e,r=null)=>i.then(t=>(async(t,e,r)=>{var i=null==t?void 0:t.getCurrentPageNum(),n=i===e?r:e;(n=-1===n?l:n)&&(-1!==e&&(l=i),await(null==t?void 0:t.goToPage(n)))})(t,e,r)),Ne:e=>i.then(t=>null==t?void 0:t.enablePage(e)),Se:e=>i.then(t=>null==t?void 0:t.disablePage(e)),Te:e=>i.then(t=>null==t?void 0:t.togglePage(e))}},rv=Object.freeze({__proto__:null,AddClass:xh,Animate:Ch,AnimatePause:$h,AnimatePlay:Wh,Disable:hc,DisablePage:tv,Display:Hh,Enable:uc,EnablePage:Jd,GoToPage:Qd,Hide:yc,NextPage:Zd,Open:dd,PrevPage:Kd,RemoveClass:Sh,Run:cc,ScrollTo:fc,SetAttribute:gc,Show:mc,Undisplay:jh,fetchAction:kh,registerAction:e});class iv extends rc{static register(){ic(G,(t,e,r,i)=>new iv(t,r,i),av)}constructor(t,e,r={}){super(t,e,r),this.getConfig=()=>w(r),sv(this,t,e,r,G)}}class nv extends rc{static register(){ic(tt,(t,e,r,i)=>new nv(t,r,i),av)}constructor(t,e,r={}){super(t,e,r),this.getConfig=()=>w(r),sv(this,t,e,r,tt)}}class lv extends rc{static register(){ic(J,(t,e,r,i)=>new lv(t,r,i),av)}constructor(t,e,r={}){super(t,e,r),this.getConfig=()=>w(r),sv(this,t,e,r,J)}}let av=i=>({target:(t,e)=>{var r;return null!=(r=Ze(e)?Gh(e,i):null)?r:void 0},preventDefault:t,preventSelect:t}),sv=(i,n,t,l,a)=>{if(q(t)){let t=qr(l)||n,e,r;a===G?e=r=i[g]:(e=i.run,r=i.reverse),mu.reuse().onPointer(t,e,r,Nr({actions:a},$i(l,{target:null})))}};class ov extends rc{static register(){ic("layout",(t,e,r,i)=>new ov(t,r,Cr(i,{layout:en("layout",nr(nr(e[0]||"",/(min|max)-/g,"$1 "),/-to-/g," to "),t=>As(t)||Ms(t))})),uv)}constructor(t,e,n){var l=(null==n?void 0:n.layout)||"";if(!l)throw m("'layout' is required");if(super(t,e,n),this.getConfig=()=>w(n),q(e)){let t=[],e=[],r=[],i=[];As(l)?(t=l,r=Ps(l)):(e=l,i=Is(l));l=n.root,l=lu.reuse({root:l});l.onLayout(this.run,{devices:t,aspectRatios:e}),(q(r)||q(i))&&l.onLayout(this.reverse,{devices:r,aspectRatios:i})}}}let uv=i=>({root:async(t,e)=>{var r=Ze(e)?await Gh(e,i):void 0;if(r&&!rr(r))throw m("root must be HTMLElement");return r}});class hv extends rc{static register(){ic("load",(t,e,r,i)=>new hv(t,r,i))}constructor(t,e,r){super(t,e,r),this.getConfig=()=>w(r),q(e)&&Sa().then(this.run)}}class cv extends rc{static register(){ic(et,(t,e,r,i)=>new cv(t,r,Cr(i,{directions:u("directions",e,Ua)})),dv)}constructor(t,e,r){let i=(r=null!=r?r:{}).directions;var n,l,a,s;i||(r.once=!0,i=[Z,K,nt,lt]),super(t,e,r),this.getConfig=()=>w(r),q(e)&&(n=Nu.reuse(),l=r.scrollable,a=r.threshold,s=i?ja(i):[],n.onScroll(this.run,{directions:i,scrollable:l,threshold:a}),q(s))&&n.onScroll(this.reverse,{directions:s,scrollable:l,threshold:a})}}let dv=i=>({scrollable:(t,e)=>{var r;return null!=(r=Ze(e)?Gh(e,i):null)?r:void 0},threshold:n});class vv extends rc{static register(){ic("view",(t,e,r,i)=>new vv(t,r,Cr(i,{views:u("views",e,Fu)})),fv)}constructor(l,a,s){super(l,a,s);let o=ot?new ot.Logger({name:"ViewTrigger-"+Hi(l)}):null;if(this.getConfig=()=>w(s||{}),q(a)){let e=Yu.reuse({root:null==s?void 0:s.root,rootMargin:null==s||null==(h=s.rootMargin)?void 0:h.replace(/,/g," "),threshold:null==s?void 0:s.threshold}),t=(null==s?void 0:s.target)||l,r=(null==s?void 0:s.views)||M,i=Vu(r);var u,h=t=>{q(i)?(null!=o&&o.debug6("Setting up trigger",r,i),e.onView(t,this.run,{views:r}),e.onView(t,this.reverse,{views:i})):(null!=o&&o.debug6("Trigger can never be reversed, running now"),this.run())};let n=!1;for(u of a)if(k(u,Ch)||k(u,Wh)){n=!0;break}n?pv(l).then(h):h(t)}}}let fv=i=>({target:(t,e)=>{var r;return Ze(e)&&Lu(e)?e:null!=(r=Ze(e)?Gh(e,i):null)?r:void 0},root:(t,e)=>{var r;return null!=(r=Ze(e)?Gh(e,i):null)?r:void 0},rootMargin:l,threshold:(t,e)=>tn(t,e)}),pv=async t=>{let e,r,i,n;return!0!==st.contentWrappingAllowed||null!==xl(t,we)||null!=(e=Kr(Xr(t)))&&e.contains(ne)?(r=t.previousElementSibling,i=Yr(r)[0],n=r&&yl(r,ne)&&i&&yl(i,fe)?i:(await va(t)).T):(n=await Jl(t,{ignoreMove:!0}),dt(n,ne),rl(_r(n))&&dt(n,le)),n},gv=Object.freeze({__proto__:null,ClickTrigger:iv,HoverTrigger:lv,LayoutTrigger:ov,LoadTrigger:hv,PressTrigger:nv,ScrollTrigger:cv,Trigger:rc,ViewTrigger:vv,registerTrigger:ic}),wv=$i(rv,{Open:!0,NextPage:!0,PrevPage:!0,GoToPage:!0,EnablePage:!0,DisablePage:!0});wv.AddClass.register(),wv.RemoveClass.register(),wv.AnimatePlay.register(),wv.AnimatePause.register(),wv.Animate.register(),wv.Display.register(),wv.Undisplay.register(),wv.ScrollTo.register(),wv.SetAttribute.register(),wv.Show.register(),wv.Hide.register(),wv.Enable.register(),wv.Disable.register(),wv.Run.register(),ov.register(),hv.register(),iv.register(),nv.register(),lv.register(),cv.register(),rc.register(),vv.register();class mv extends vh{static get(t,e){var r=super.get(t,e);return k(r,mv)?r:null}static register(){for(var[t,e]of[[yv,!1],[bv,!0]])fh(t,(t,e)=>new mv(t,e),kv(e),{supportsMultiple:!0})}constructor(r,i){super(r,i);let n=null==i?void 0:i.selector,t=Ca.create({root:r,subtree:!!n}),e=n?{selector:n,categories:[L,V],skipInitial:!0}:{categories:[V],skipInitial:!0},l=null!=i&&i.remove?oa:fl,a=()=>{var t,e;if(!this.isDisabled())for(t of n?hr(r,n):[r])l(t,null!=(e=null==i?void 0:i.delay)?e:_v)},s=()=>t.onMutation(a,e);Sa().then(()=>{this.isDestroyed()||(a(),s())}),this.onDisable(()=>t.offMutation(a)),this.onEnable(()=>{a(),s()})}}let yv="auto-hide",bv="auto-remove",_v=3e3,kv=t=>({id:l,remove:()=>t,selector:l,delay:n});class Ev extends vh{static get(t){var e;return t?(e=super.get(t,Ov),k(e,Ev)?e:null):Cv}static register(){fh(xv,(t,e)=>Ev.get(t)?null:new Ev(t,e),Dv)}static enableMain(t){let e=at("div"),r=new Ev(e,t);return r.onDestroy(()=>(Cv===r&&(Cv=null),sa(e))),_a(b).then(t=>{r.isDestroyed()||sa(e,{to:t})}),Cv=r}constructor(r,i){var t=null==(t=Ev.get(r))?void 0:t.destroy();super(r,{id:Ov}),(t||Tr()).then(()=>{var e;if(!this.isDestroyed()){dt(r,Nv);let t=at("div");dt(t,Tv),sa(t,{to:r}),_a(b).then(Ul),null!=(e=null==i?void 0:i.autoRemove)&&!e||Sa().then(()=>oa(r)).then(this.destroy),this.onDisable(()=>{hl(r),cr("."+Nv)||zl()}),this.onEnable(async()=>{await ol(r)}),this.onDestroy(async()=>{sa(t),await _l(r,Nv),await ol(r)})}})}}let xv="page-loader",Sv=y(xv),Nv=Sv+"__root",Tv=y("spinner"),Ov=Sv,Cv=null,Dv={autoRemove:t};class Av extends vh{static get(t){var e=super.get(t,Lv);return k(e,Av)?e:null}static register(){fh(Mv,(t,e)=>{if(rr(t)){if(!Av.get(t))return new Av(t,e)}else O(m("Only HTMLElement is supported for SameHeight widget"));return null},Vv)}constructor(e,t){let r,i=null==(r=Av.get(e))?void 0:r.destroy(),n=(super(e,{id:Lv}),zv(e,null==t?void 0:t.items));if(br(n)<2)throw m("SameHeight must have more than 1 item");for(var l of n.keys())if(Xr(l)!==e)throw m("SameHeight's items must be its immediate children");jv(e,t).then(t=>{(i||Tr()).then(()=>{this.isDestroyed()||Gv(this,e,n,t)})}),this.toColumn=()=>Tl(e,de,Dt),this.toRow=()=>Pl(e,de),this.getItems=()=>[...n.keys()],this.getItemConfigs=()=>S([...n.entries()])}}let Mv="same-height",Pv=y(Mv),Iv=Pv+"__root",Rv=Pv+"__item",Bv=Pv+"-item",Wv="text",$v="image",Lv=Pv,Fv=100,Vv={diffTolerance:n,resizeThreshold:n,debounceWindow:n,minGap:n,maxFreeR:n,maxWidthR:n},Hv=t=>xl(t,Bv)===Wv||xl(t,Bv)!==$v&&rr(t)&&q(t.innerText)>=Fv,jv=async(t,e)=>{var r,i=await Rl(t,"column-gap"),i=Uv(nr(i,/px$/,""),st.sameHeightMinGap);return{Ie:Ei(null!=(r=null==e?void 0:e.minGap)?r:i,{min:0},10),Re:Ei(null!=(r=null==e?void 0:e.maxFreeR)?r:st.sameHeightMaxFreeR,{min:0,max:.9},-1),Be:Ei(null!=(i=null==e?void 0:e.maxWidthR)?i:st.sameHeightMaxWidthR,{min:1},-1),We:null!=(r=null==e?void 0:e.diffTolerance)?r:st.sameHeightDiffTolerance,Dt:null!=(i=null==e?void 0:e.resizeThreshold)?i:st.sameHeightResizeThreshold,K:null!=(r=null==e?void 0:e.debounceWindow)?r:st.sameHeightDebounceWindow}},Uv=(t,e)=>{var r=t?Hr(t):NaN;return jr(r)?e:r},zv=(t,e)=>{let r=S();e=e||(i=t,n=[...hr(i,wh(Bv))],q(n)||n.push(...tl(i)),n);var i,n,l=(t,e)=>{e=e||(Hv(t)?Wv:$v),r.set(t,e)};if(ze(e))for(var a of e)l(a);else if(k(e,Map))for(var[s,o]of e.entries())l(s,o);return r},Gv=(t,l,e,a)=>{let s=ot?new ot.Logger({name:"SameHeight-"+Hi(l)}):null,o=a.We,u=a.K,r=Zo.reuse({debounceWindow:u,resizeThreshold:a.Dt}),h=S(),c=0,d=!0,v=0,f=!1,p=null,i=(t,e)=>{f||(null!=s&&s.debug7("Scheduling calculations",c),f=!0,lr(()=>{var t,e;if(f=!1,1<c)null!=s&&s.debug7("Already re-calculated once, skipping"),c=0;else if(c++,p&&ar(p),(t=(t=Yv(l,h,d,s))?Zv(t,a,s):null)&&Lr(v-t)>o){v=t,d=!1;var r,i,n=t;for([r,i]of h.entries())Xr(r)===l&&(e=qv(r,i,n),null!=s&&s.debug9("Setting width property",r,i,e),Xl(r,{sameHeightW:e},{k:"px"}));p=lr(()=>{c=0},u+50)}else c=0},0));var r=h.get(t);r?(r.$e=e.border[rt]||e.content[rt],r.Le=e.border[it]||e.content[it],null!=s&&s.debug7("Got size",t,r)):O(ui("Got SizeWatcher call for unknown element"))},n=()=>{d=!0;for(var t of h.keys())r.onResize(i,{target:t})};t.onDisable(()=>{for(var t of h.keys())r.offResize(i,t)}),t.onEnable(n),t.onDestroy(async()=>{for(var t of h.keys())Xr(t)===l&&(await Xl(t,{sameHeightW:NaN}),await _l(t,Rv));h.clear(),await _l(l,Iv)});var g,w,m=t=>({Fe:t,$e:NaN,Le:NaN,Ve:NaN,He:NaN,je:NaN,Ue:[]});h.set(l,m(""));for([g,w]of e.entries()){dt(g,Rv);var y=m(w);if(h.set(g,y),w===Wv){y.Ue=Xv(g);for(var b of y.Ue)h.set(b,m(""))}}dt(l,Iv),n()},Xv=t=>{var e,r=[];for(e of tl(t))Hv(e)?r.push(e):r.push(...Xv(e));return r},Yv=(t,i,e,r)=>{if(xl(t,de)===Dt)return null!=r&&r.debug8("In vertical mode"),null;null!=r&&r.debug7("Calculating measurements");let n=NaN,l=0,a=NaN,s=NaN,o=0;for(var[u,h]of i.entries()){var c=h.$e,d=h.Le;if(u===t)s=c,o=q(tl(u));else if(h.Fe===Wv){let t=0,e=0,r=h.Ue;if(q(r)){for(var v of h.Ue){v=i.get(v);v?t+=v.$e*v.Le:O(ui("Text component not observed"))}e=d-t/c}else t=c*d;h.He=t,h.je=e,n=(n||0)+t,l+=e}else{if(h.Fe!==$v)continue;if(e&&!(()=>{for(var t of u.querySelectorAll("img"))if(0===t.naturalWidth||0===t.width||0===t.naturalHeight||0===t.height)return!1;return!0})())return null!=r&&r.debug8("Images not loaded"),null;c=c/d;a=(a||0)+c,h.Ve=c}null!=r&&r.debug8("Examined",h,{tArea:n,tExtraH:l,imgAR:a,flexW:s})}return{ze:n,Ge:l,Xe:a,Ye:s,qe:o}},qv=(t,e,r)=>e.Fe===Wv?e.He/(r-(e.je||0)):e.Ve*r,Zv=(o,u,h)=>{var c=o.ze,d=o.Ge,v=o.Xe,f=o.Ye-(o.qe-1)*u.Ie,p=u.Re,g=u.Be;if(null!=h&&h.debug8("Getting optimal height",o,u),jr(c))return null!=h&&h.debug8("No text items"),v?f/v:(null!=h&&h.debug8("Images not loaded"),NaN);if(jr(v))return null!=h&&h.debug8("No images"),c/f+d;if(v&&c){let t=Br(c/v)+d,[e,r]=Mi(v,-(v*d+f),c+d*f),i=NaN,n=NaN,l=NaN,a=(0<g&&(i=Mi(v,-v*d,-c)[0],n=Mi(v*g,-v*d*g,-c)[0],l=Mi(v/g,-v*d/g,-c)[0]),NaN),s=NaN;0<=p&&([a,s]=Mi(v,-(v*d+f*(1-p)),c+d*f*(1-p)));g=Wr(...mr([r,n,s],t=>mi(t))),p=$r(...mr([e,l,a],t=>mi(t))),c=c/(t-d),d=t*v,v=f-c-d;if(null!=h&&h.debug8("Optimal height calculations",u,o,{h0:t,h1:r,h2:e,hR0:i,hR1:n,hR2:l,hF1:s,hF2:a,hConstr1:g,hConstr2:p,tw0:c,iw0:d,freeSpace0:v}),!t||t<=0)null!=h&&h.debug1("Invalid calculation: Invalid h0");else if(mi(r)!==mi(e))null!=h&&h.debug1("Invalid calculation: One and only one of h1 or h2 is real");else if(mi(n)!==mi(l))null!=h&&h.debug1("Invalid calculation: One and only one of hR1 or hR2 is real");else if(mi(s)!==mi(a))null!=h&&h.debug1("Invalid calculation: One and only one of hF1 or hF2 is real");else if(.1<r-t)null!=h&&h.debug1("Invalid calculation: h1 > h0");else if(.1<t-e)null!=h&&h.debug1("Invalid calculation: h0 > h2");else if(.1<i-t)null!=h&&h.debug1("Invalid calculation: hR0 > h0");else if(.1<n-i)null!=h&&h.debug1("Invalid calculation: hR1 > hR0");else if(.1<i-l)null!=h&&h.debug1("Invalid calculation: hR0 > hR2");else if(.1<s-a)null!=h&&h.debug1("Invalid calculation: hF1 > hF2");else if(.1<r-s)null!=h&&h.debug1("Invalid calculation: h1 > hF1");else{if(!(.1<a-e))return v<=0?t:$r(g,p);null!=h&&h.debug1("Invalid calculation: hF2 > h2")}O(ui("Invalid SameHeight calculations"),o,u)}else null!=h&&h.debug8("Expected both images and text, but no imgAR or tArea");return NaN};class Kv extends vh{static get(t){if(!t)return yf;t===Be()&&(t=b());var e=super.get(t,tf);return k(e,Kv)?e:null}static enableMain(r){return Nu.fetchMainScrollableElement().then(t=>{let e=new Kv(t,r);return e.onDestroy(()=>{yf===e&&(yf=null)}),yf=e})}static register(){fh(Qv,(t,e)=>{if(rr(t)){if(!Kv.get(t))return new Kv(t,e)}else O(m("Only HTMLElement is supported for Scrollbar widget"));return null},bf)}constructor(t,e){t===Be()&&(t=b());var r=null==(r=Kv.get(t))?void 0:r.destroy();super(t,{id:tf});let i=_f(t),n=i.scrollable;(r||Tr()).then(async()=>{this.isDestroyed()||await kf(this,t,i,e)}),this.getScrollable=()=>n}}let Qv="scrollbar",Jv=y(Qv),tf=Jv,ef=Jv+"__root",rf=Jv+"__container",nf=Jv+"__content",lf=Jv+"__bar",af=Jv+"__wrapper",sf=Jv+"__fill",of=Jv+"__spacer",uf=Jv+"__handle",hf=y("draggable"),cf=y("clickable"),df=y("has-wrapper"),vf=y("allow-collapse"),ff=y("has-fixed-height"),pf=y("has-scrollbar"),gf=y("hide-scroll"),wf=re+"valuenow",mf="scrollbar",yf=null,bf={id:l,className:u,hideNative:t,onMobile:t,positionH:l,positionV:l,autoHide:n,clickScroll:t,dragScroll:t,useHandle:t},_f=t=>{let e=ao(),r=b(),i=oo(),n=t===r,l=(n?i:t)===e,a=l?e:n?i:t,s=a===r&&i===r,o=st.contentWrappingAllowed&&null===xl(t,we),u=!l&&!o,h=l?r:t,c=qs(a,{axis:"y"}),d=null,v=a;return l||n||!o||(o?(d=at("div"),v=d):jn("Scrollbar on elements other than the main scrollable when settings.contentWrappingAllowed is false relies on position: sticky, is experimental and may not work properly")),{isMainScrollable:l,isBody:n,isBodyInQuirks:s,root:a,scrollable:v,barParent:h,contentWrapper:d,needsSticky:u,hasFixedHeight:c}},kf=(t,a,e,r)=>{let i,n,l,s,o,u,h,c,d,v,{isMainScrollable:f,isBody:p,isBodyInQuirks:g,root:w,scrollable:m,barParent:y,contentWrapper:b,needsSticky:B,hasFixedHeight:_}=e,k=ot?new ot.Logger({name:"Scrollbar-"+Hi(w),logAtCreation:{props:e,config:r}}):null,W=null!=(i=null!=(n=null==r?void 0:r.onMobile)?n:st.scrollbarOnMobile)&&i,$=null!=(l=null!=(s=null==r?void 0:r.hideNative)?s:st.scrollbarHideNative)&&l,L=(null==r?void 0:r.positionH)||st.scrollbarPositionH,F=(null==r?void 0:r.positionV)||st.scrollbarPositionV,V=null!=(o=null==r?void 0:r.autoHide)?o:st.scrollbarAutoHide,E=null!=(u=null==r?void 0:r.clickScroll)?u:st.scrollbarClickScroll,x=null!=(h=null!=(c=null==r?void 0:r.dragScroll)?c:st.scrollbarDragScroll)&&h,S=null!=(d=null!=(v=null==r?void 0:r.useHandle)?v:st.scrollbarUseHandle)&&d;if(Ee&&!W)return;to(w,m);let H=(t,e)=>{var r=e===gt||e===wt,i=at("div"),r=(ct(i,lf),Nl(i,de,r?Ct:Dt),Nl(i,ce,e),(E||x)&&(pr(i,ee,mf),pr(i,ie,Q)),at("div"));ct(r,S?of:sf);let n=null;return S&&(n=at("div"),ct(n,uf),Ol(n,hf,x)),Ol(i,hf,x&&!S),Ol(i,cf,E),aa(r,{to:i}),n&&aa(n,{to:i}),aa(i,{to:t}),{Ze:i,Ke:n,Qe:r}},j=async(t,e)=>{var r=e?I:R,i=pf+"-"+(e?L:F),n=e?t[Ot]:t[Tt],l=e?t[St]/t[Et]:t[Nt]/t[xt],n=(null!=k&&k.debug9("Updating progress",{tracksH:e,completeFraction:n,viewFraction:l}),pr(r,wf,Fr(100*n)+""),Xl(r,{viewFr:l,completeFr:n},{_:4}),e?"x":"y");(qs(m,{axis:n})&&l<1?(Cl(a,i),ol):(Pl(a,i),hl))(r)},U=(t,e)=>{j(e,!0),j(e,!1),f||p||xf(a),0<V&&dl(P).then(()=>fl(P,V))},z=(t,e)=>{xf(a),Xl(a,{barHeight:e.border[it]},{k:"px",_:2})},N=!1,T=0,O=0,C,G=async(t,e)=>{kr(t);var r,i,n,l,a,s,o=e?I:R,u=e?tt:et,h=qr(t);Qe(t)&&rr(h)&&(h=(r=(a=t.type)===Wt||a===Rt)&&S&&yl(h,uf),(i=r&&x&&(h||!S))&&(N=!0,Sf(t,o,"setPointerCapture")),null!=k&&k.debug10("Click or drag",{eventType:a,isClick:r,isHandleClick:h,isDragging:N,startsDrag:i}),!r&&!N||r&&!i&&!E||(await ht(),i=(a=Ef(o))?o[St]:o[Nt],n=e?m[kt]:m[_t],l=e?m[Et]-ro(m):m[xt]-io(m),o=sr(o),o=a?t.clientX-o.left:t.clientY-o.top,null!=k&&k.debug10("Pointer offset",o),o===T)||(s=r?o:o-T,T=o,!r&&S?(u=u?Hr(Il(u,a?rt:it)):0,O+=s/(i-(u||0))):O=h?n/l:o/i,h)||r&&!E||(a=O*l,s=e?{left:a}:{top:a},null!=k&&k.debug10("Scroll target offset",{lastTargetFraction:O,targetCoordinates:s}),r?C=await M.scrollTo(s,{scrollable:m,weCanInterrupt:!0}):(null!=(u=C)&&u.cancel(),C=null,ei(m,s))))},X=(t,e)=>{var r=e?I:R;Sf(t,r,"releasePointerCapture"),N=!1,C=null},D=t=>G(t,!0),A=t=>G(t,!1),Y=t=>X(t,!0),q=t=>X(t,!1),Z=()=>{$&&(dt(m,gf),g)&&dt(Be(),gf)},K=()=>{M.trackScroll(U,{threshold:0,scrollable:m}),J.onResize(z,{target:a,threshold:0})},Q=(f||p||dt(a,rf),Cl(a,vf,!Ee),b&&(dt(b,nf),ea(a,{wrapper:b}),Cl(a,df),_)&&Cl(a,ff),Z(),null!=r&&r.id&&(m.id=r.id),null!=r&&r.className&&dt(m,...Fi(r.className)),E||x?ua(m,mf):""),M=Nu.reuse({debounceWindow:0}),J=Zo.reuse({debounceWindow:0}),P=(dt(y,ef),at("div")),{Ze:I,Ke:tt}=(Qa(P),dt(P,ge),dt(P,af),p||f?Tl(P,ve,pt):B&&Tl(P,ve,"sticky"),H(P,L)),{Ze:R,Ke:et}=H(P,F);sa(P,{to:y,position:"prepend"}),K(),x&&(vt(I,Ft,D),vt(R,Ft,A),vt(I,Bt,Y),vt(R,Bt,q)),(x||E)&&(vt(I,Wt,D),vt(R,Wt,A)),t.onDisable(()=>{M.noTrackScroll(U,m),J.offResize(z,a),hl(I),hl(R),_l(m,gf),g&&_l(Be(),gf)}),t.onEnable(()=>{K(),ol(I),ol(R),Z()}),t.onDestroy(async()=>{eo(w),await ut(),b&&(la(b,a,{ignoreMove:!0}),aa(b)),aa(P),x&&(ft(I,Ft,D),ft(R,Ft,A),ft(I,Bt,Y),ft(R,Bt,q)),(x||E)&&(ft(I,Wt,D),ft(R,Wt,A)),bl(y,ef),bl(a,rf);for(var t of[gt,wt,nt,lt])Ml(a,pf+"-"+t);Ml(a,df),_&&Ml(a,ff)})},Ef=t=>xl(t,de)===Ct,xf=async t=>{for(var e of[gt,lt,wt,nt])for(var r of["padding-"+e,`border-${e}-width`]){var i=await Rl(t,r);Ll(t,De(r),i)}},Sf=(t,e,r)=>{Je(t)&&r in e&&e[r](t.pointerId)};class Nf extends vh{static get(t){var e;return t?(e=super.get(t,Df),k(e,Nf)?e:null):Af}static register(){fh(Tf,(t,e)=>Nf.get(t)?null:new Nf(t,e),Mf)}static enableMain(t){let e=Ve("Back to top"),r=new Nf(e,t);return r.onDestroy(()=>(Af===r&&(Af=null),sa(e))),_a(b).then(t=>{r.isDestroyed()||sa(e,{to:t})}),Af=r}constructor(t,e){var r=null==(r=Nf.get(t))?void 0:r.destroy();super(t,{id:Df});let i=Nu.reuse(),n=Yu.reuse(),l=(null==e?void 0:e.offset)||`${gt}: var(${Ce("scroll-to-top--offset")}, 200vh)`,a=(null==e?void 0:e.position)||lt,s=()=>i.scrollTo({top:0}),o=wa(t,Z),u=()=>{dl(t)},h=()=>{fl(t)};(r||Tr()).then(()=>{this.isDestroyed()||(jl(t),dt(t,Cf),Tl(t,ce,a),h(),vt(t,G,s),n.onView(l,u,{views:[M,I]}),n.onView(l,h,{views:[P]}),this.onDisable(()=>{hl(t)}),this.onEnable(()=>{ol(t)}),this.onDestroy(async()=>{ft(t,G,s),await Pl(t,ce),await sa(o),await _l(t,Cf),await ol(t),n.offView(l,u),n.offView(l,h)}))})}}let Tf="scroll-to-top",Of=y(Tf),Cf=Of+"__root",Df=Of,Af=null,Mf={offset:(t,e)=>l(t,e,Lu),position:(t,e)=>l(t,e,t=>t===nt||t===lt)};class Pf extends vh{static get(t){var e=super.get(t,Ff);return k(e,Pf)?e:null}static register(){fh(If,(t,e)=>Pf.get(t)?null:new Pf(t,e),Vf)}constructor(t,e){var r=null==(r=Pf.get(t))?void 0:r.destroy();super(t,{id:Ff});let i=(null==e?void 0:e.items)||[];if(q(i)||(i.push(...hr(t,wh($f))),q(i))||(i.push(...hr(t,`[${te}]`)),q(i))||i.push(...tl(t)),q(i)<2)throw m("Sortable must have more than 1 item");let n=Uf(this,i,e);(r||Tr()).then(()=>{this.isDestroyed()||jf(this,t,i,n)}),this.disableItem=n.Je,this.enableItem=n.tr,this.toggleItem=n.er,this.isItemDisabled=n.rr,this.onMove=n.ir,this.getItems=(t=!1)=>t?n.nr():[...i]}}let If="sortable",Rf=y(If),Bf=y("is-draggable"),Wf=Rf+"__item",$f=Rf+"-item",Lf=Rf+"__ghost",Ff=Rf,Vf={mode:(t,e)=>l(t,e,t=>"swap"===t||"move"===t)},Hf={passive:!1,capture:!0},jf=(t,e,r,i)=>{let n=null,l=null,a=!1,s=[0,0],o=()=>a=!0,u=e=>{let r=Zr(e);var t;X(r)&&(t=r,Sl(t,Bf))&&Qe(e)&&(n=r,pr(r,te),tr(e)&&(t=qr(e),X(t))&&t.releasePointerCapture(e.pointerId),vt(x(),Ut,c,Hf),ht().then(()=>{var t=sr(r);s=[e.clientX-t.left,e.clientY-t.top]}))},h=t=>{a&&t.type===Vt?a=!1:n&&(gr(n,te),n=null,ft(x(),Ut,c,Hf),l)&&(sa(l),l=null)},c=e=>{if(er(e)&&1===q(e.touches)){let t=Xr(n);var r,i;t&&n&&(kr(e),r=(i=e.touches[0]).clientX,i=i.clientY,l||(l=ca(n),dt(l,Lf),Gl(n,l,["width","height"]).then(()=>{l&&sa(l,{to:t})})),l)&&Xl(l,{clientX:r-s[0],clientY:i-s[1]},{k:"px"})}},d=t=>{var e=Zr(t),r=n;(tr(t)||t.type===Yt)&&r&&X(e)&&e!==r&&i.lr(r,e)};var v,f=()=>{for(var t of r)Qa(t),vt(t,Wt,u),vt(t,Gt,o),vt(t,$t,d),vt(t,Yt,d),vt(t,qt,kr),vt(t,Xt,h),vt(t,"drop",h),vt(x(),Bt,h),vt(x(),Vt,h)};for(v of r)dt(v,Wf),Cl(v,Bf);t.onEnable(f),t.onDisable(()=>{for(var t of r)Ja(t),ft(t,Wt,u),ft(t,Gt,o),ft(t,$t,d),ft(t,Yt,d),ft(t,qt,kr),ft(t,Bt,h),ft(t,Vt,h),ft(t,Xt,h),ft(t,"drop",h)}),t.onDestroy(async()=>{for(var t of r)await _l(t,Wf),await Pl(t,Bf)}),f()},Uf=(i,r,t)=>{let n="swap"===(null==t?void 0:t.mode),l={},a=ni(),s=()=>[...r].sort((t,e)=>ir(t,e)?-1:1),o=(t,e=!1)=>e?r.indexOf(s()[t-1])+1:t,u=(t,e=!1)=>!0===l[o(t,e)],h=async(t,e=!1)=>{t=o(bi(t),e),i.isDisabled()||t<1||t>q(r)||(l[t]=!0,await Al(r[t-1],Bf))},c=async(t,e=!1)=>{t=o(bi(t),e),!i.isDisabled()&&u(t)&&(l[t]=!1,await Cl(r[t-1],Bf))};return{nr:s,Je:h,tr:c,er:(t,e=!1)=>(u(t,e)?c:h)(t,e),rr:u,ir:t=>a.add(T(t)),lr:async(t,e)=>{n?await na(t,e,{ignoreMove:!0}):await sa(t,{to:e,position:ir(t,e)?"after":"before",ignoreMove:!0});for(var r of a)await r.invoke(i)}}};class zf extends vh{static get(t){var e=super.get(t,Xf);return k(e,zf)?e:null}static register(){fh(Gf,(t,e)=>zf.get(t)?null:new zf(t,e),Yf)}constructor(t,e){super(t,{id:Xf}),ys.reuse().trackGesture(t,null,{preventDefault:null==e?void 0:e.preventDefault,minTotalDeltaX:null==e?void 0:e.minDeltaX,maxTotalDeltaX:null==e?void 0:e.maxDeltaX,minTotalDeltaY:null==e?void 0:e.minDeltaY,maxTotalDeltaY:null==e?void 0:e.maxDeltaY,minTotalDeltaZ:null==e?void 0:e.minDeltaZ,maxTotalDeltaZ:null==e?void 0:e.maxDeltaZ}),this.onDestroy(()=>ys.reuse().noTrackGesture(t))}}let Gf="track-gesture",Xf=Gf,Yf={preventDefault:t,minDeltaX:n,maxDeltaX:n,minDeltaY:n,maxDeltaY:n,minDeltaZ:n,maxDeltaZ:n};class qf extends vh{static get(t){var e=super.get(t,Kf);return k(e,qf)?e:null}static register(){fh(Zf,(t,e)=>qf.get(t)?null:new qf(t,e),Qf)}constructor(t,e){super(t,{id:Kf}),Nu.reuse().trackScroll(null,Cr({scrollable:t},e)),this.onDestroy(()=>Nu.reuse().noTrackScroll(null,t))}}let Zf="track-scroll",Kf=Zf,Qf={threshold:n,debounceWindow:n};class Jf extends vh{static get(t){var e=super.get(t,e0);return k(e,Jf)?e:null}static register(){fh(t0,t=>Jf.get(t)?null:new Jf(t))}constructor(t){super(t,{id:e0}),Zo.reuse().trackSize(null,{target:t,threshold:0}),this.onDestroy(()=>Zo.reuse().noTrackSize(null,t))}}let t0="track-size",e0=t0;class r0 extends vh{static get(t){var e=super.get(t,n0);return k(e,r0)?e:null}static register(){fh(i0,(t,e)=>r0.get(t)?null:new r0(t,e),l0)}constructor(t,e){var r;super(t,{id:n0});let i=Yu.reuse({root:null==e?void 0:e.root,rootMargin:null==e||null==(r=e.rootMargin)?void 0:r.replace(/,/g," "),threshold:null==e?void 0:e.threshold});i.trackView(t,null,e),this.onDestroy(()=>i.noTrackView(t))}}let i0="track-view",n0=i0,l0=i=>({root:(t,e)=>{var r;return null!=(r=Ze(e)?Gh(e,i):null)?r:void 0},rootMargin:l,threshold:(t,e)=>tn(t,e),debounceWindow:n,resizeThreshold:n,scrollThreshold:n}),a0=Object.freeze({__proto__:null,AutoHide:mv,Collapsible:Oc,Modal:Dc,Offcanvas:Ac,Openable:Tc,PageLoader:Ev,Pager:vd,Popup:Cc,SameHeight:Av,ScrollToTop:Nf,Scrollbar:Kv,Sortable:Pf,TrackGesture:zf,TrackScroll:qf,TrackSize:Jf,TrackView:r0,Widget:vh,fetchUniqueWidget:mh,fetchWidgetConfig:gh,getDefaultWidgetSelector:wh,getWidgetConfig:ph,registerOpenable:Nc,registerWidget:fh});xh.register(),Sh.register(),Wh.register(),$h.register(),Ch.register(),Hh.register(),jh.register(),dd.register(),Zd.register(),Kd.register(),Qd.register(),Jd.register(),tv.register(),fc.register(),gc.register(),mc.register(),yc.register(),uc.register(),hc.register(),cc.register(),ov.register(),hv.register(),iv.register(),nv.register(),lv.register(),cv.register(),rc.register(),vv.register(),mv.register(),Oc.register(),Cc.register(),Dc.register(),Ac.register(),Ev.register(),vd.register(),Av.register(),Nf.register(),Kv.register(),Pf.register(),zf.register(),qf.register(),Jf.register(),r0.register();var s0=Object.freeze({__proto__:null,Console:In,Logger:Rn,RemoteConsole:An}),o0=Object.freeze({__proto__:null,DEVICES:cs,DIRECTIONS:qa,DOM_CATEGORIES_SPACE:fn,INTENTS:ds,NUM_LAYOUTS:Vs,ORDERED_ASPECTR:Fs,ORDERED_DEVICES:Ls,POINTER_ACTIONS:wu,POSITIONS:Ec,SCROLL_DIRECTIONS:Ya,VIEWS_SPACE:zu,XY_DIRECTIONS:Ga,Z_DIRECTIONS:Xa,addClasses:dt,addClassesNow:ct,addDeltaZ:hs,addEventListenerTo:vt,areAntiParallel:Di,areParallel:Ci,callEventListener:Ka,camelToKebabCase:Gi,clearIgnoreMove:ga,cloneElement:ca,compareValuesIn:Li,copyExistingKeys:Wi,copyStyle:Gl,createOverlay:To,degToRad:Oi,delData:Pl,delDataNow:Ml,delHasModal:zl,delStyleProp:Vl,delStylePropNow:Fl,disableInitialTransition:jl,displayElement:ol,displayElementNow:sl,distanceBetween:Ai,easeInOutQuad:Pi,fetchMainContentElement:lo,fetchMainScrollableElement:so,fetchScrollableElement:uo,fetchViewportOverlay:Lo,fetchViewportSize:Fo,formatAsString:Hi,getBitmask:Bi,getBoolData:Sl,getBrowserSupport:ts,getClientHeightNow:io,getClientWidthNow:ro,getClosestScrollable:Zs,getComputedStyleProp:Rl,getComputedStylePropNow:Il,getCurrentScrollAction:Ks,getData:xl,getDebouncedHandler:wn,getDefaultScrollingElement:oo,getEntryBorderBox:Ro,getEntryContentBox:Io,getIgnoreMove:pa,getKeyGestureFragment:fs,getLayoutBitmask:Rs,getMaxDeltaDirection:Fa,getMaxTransitionDuration:Hl,getOppositeDirection:Ha,getOppositeViews:Vu,getOppositeXYDirections:ja,getOrAssignID:ua,getOtherAspectRatios:Is,getOtherDevices:Ps,getOverlay:t=>{var e=t,r=Ao(null==e?void 0:e.style),i=null!=(i=null==e?void 0:e.data)?i:{},n=null==e?void 0:e.parent,l=r.position,n=(n=null!=n?n:(l===pt?b:no)())?{kt:n,_t:null!=(l=null==e?void 0:e.id)?l:"",xt:r,St:i,Et:Do(r,i)}:null;return n&&(null==(e=Oo.get(n.kt))?void 0:e.get(n.Et))||null},getPointerGestureFragment:ps,getReferenceElement:zh,getStyleProp:Wl,getStylePropNow:Bl,getTouchDiff:ws,getTouchGestureFragment:gs,getVectorDirection:Va,getViewsBitmask:Hu,getVisibleContentChildren:tl,getWheelGestureFragment:ms,hAngle:Ni,hasClass:yl,havingMaxAbs:Si,havingMinAbs:(...t)=>q(t)?t.sort((t,e)=>Lr(t)-Lr(e))[0]:D,hideAndRemoveElement:oa,hideElement:fl,hideElementNow:vl,ignoreMove:fa,insertArrow:wa,insertGhostClone:va,insertGhostCloneNow:da,isDOMElement:il,isElementHidden:wl,isElementUndisplayed:ml,isInlineTag:rl,isPageReady:()=>Oa,isScrollable:qs,isTouchScreen:()=>!!Ie()&&matchMedia("(any-pointer: coarse)").matches,isValidAspectRatio:t=>Fs.has(t),isValidAspectRatioList:Ms,isValidBox:Bo,isValidDevice:t=>Ls.has(t),isValidDeviceList:As,isValidDimension:Wo,isValidDirection:za,isValidDirectionList:t=>Ji(t,za,!1),isValidInputDevice:os,isValidInputDeviceList:t=>Ji(t,os,!1),isValidIntent:us,isValidIntentList:t=>Ji(t,us,!1),isValidMutationCategory:vn,isValidMutationCategoryList:t=>Ji(t,vn,!1),isValidNum:mi,isValidPointerAction:gu,isValidPointerActionList:t=>Ji(t,gu,!1),isValidPosition:_c,isValidScrollDirection:Js,isValidScrollDirectionList:t=>Ji(t,Js,!1),isValidScrollOffset:Lu,isValidStrList:Ji,isValidTwoFoldPosition:kc,isValidView:Fu,isValidViewList:t=>Ji(t,Fu,!1),isValidXYDirection:Ua,isValidZDirection:t=>Y(Xa,t),isVisibleContentTag:el,iterateAnimations:Th,joinAsString:ji,kebabToCamelCase:zi,keyExists:(t,e)=>Xe(t)&&e in t,keyWithMaxVal:Ri,keyWithMinVal:t=>Ii(t).slice(0,1)[0],logError:O,logInfo:(...t)=>{zn(t)||fi(o,...t)},logWarn:jn,mapScrollable:to,maxAbs:xi,minAbs:(...t)=>$r(...t.map(t=>Lr(t))),moveChildren:async(t,e,r)=>ut().then(()=>la(t,e,r)),moveChildrenNow:la,moveElement:sa,moveElementNow:aa,normalizeAngle:Ti,objToStrKey:qi,omitKeys:$i,parseScrollOffset:ju,preventSelect:Qa,quadraticRoots:Mi,radToDeg:t=>180*t/C,randId:Xi,removeClasses:_l,removeClassesNow:bl,removeEventListenerFrom:ft,replaceElement:async(t,e,r)=>ut().then(()=>ra(t,e,r)),replaceElementNow:ra,resetCssAnimationsNow:Oh,roundNumTo:wi,scheduleHighPriorityTask:gn,scrollTo:Qs,setBoolData:Cl,setBoolDataNow:Ol,setData:Tl,setDataNow:Nl,setHasModal:Ul,setNumericStyleProps:Xl,setStyleProp:Ll,setStylePropNow:$l,showElement:dl,showElementNow:cl,sortedKeysByVal:Ii,splitOn:Ui,swapElements:na,swapElementsNow:ia,toArrayIfSingle:Fi,toBool:Vi,toInt:bi,toMargins:Yi,toNonNegNum:_i,toNum:yi,toNumWithBounds:Ei,toPosNum:ki,toggleClass:El,toggleClassNow:kl,toggleDisplayElement:pl,toggleDisplayElementNow:t=>(ml(t)?sl:ul)(t),toggleShowElement:gl,toggleShowElementNow:t=>(wl(t)?cl:vl)(t),transitionElement:al,transitionElementNow:ll,tryGetMainContentElement:no,tryGetMainScrollableElement:ao,tryGetScrollableElement:t=>wo(t,ao),tryGetViewportOverlay:$o,undisplayElement:hl,undisplayElementNow:ul,undoPreventSelect:Ja,unmapScrollable:eo,unsetBoolData:Al,unsetBoolDataNow:Dl,validateBoolean:t,validateBooleanOrString:rn,validateNumList:tn,validateNumber:n,validateStrList:u,validateString:l,validateStringRequired:en,waitForComplete:xa,waitForDelay:mn,waitForElement:_a,waitForElementOrInteractive:ka,waitForInteractive:Ea,waitForMeasureTime:ht,waitForMutateTime:ut,waitForPageReady:Sa,waitForReferenceElement:Gh,waitForSubsequentMeasureTime:Xn,waitForSubsequentMutateTime:Gn,wrapChildren:ea,wrapChildrenNow:ta,wrapElement:Jl,wrapElementNow:Ql,wrapScrollingContent:ha}),u0=Object.freeze({__proto__:null,BitSpaces:on,Callback:Fn,XIntersectionObserver:Xu,XMap:Cn,XMapBase:On,XResizeObserver:qo,XWeakMap:Dn,createBitSpace:hn,newBitSpaces:un,newXMap:xn,newXMapGetter:Sn,newXWeakMap:Nn,newXWeakMapGetter:Tn,wrapCallback:T});st.verbosityLevel=10;let h0=Object.create(null),c0=(h0.open="0",h0.close="1",h0.ping="2",h0.pong="3",h0.message="4",h0.upgrade="5",h0.noop="6",Object.create(null)),d0=(Object.keys(h0).forEach(t=>{c0[h0[t]]=t}),{type:"error",data:"parser error"}),v0="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),f0="function"==typeof ArrayBuffer,p0=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,g0=({type:t,data:e},r,i)=>v0&&e instanceof Blob?r?i(e):w0(e,i):f0&&(e instanceof ArrayBuffer||p0(e))?r?i(e):w0(new Blob([e]),i):i(h0[t]+(e||"")),w0=(t,e)=>{let r=new FileReader;return r.onload=function(){var t=r.result.split(",")[1];e("b"+(t||""))},r.readAsDataURL(t)};function m0(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let y0,b0,_0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k0="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let Cp=0;Cp<_0.length;Cp++)k0[_0.charCodeAt(Cp)]=Cp;let E0="function"==typeof ArrayBuffer,x0=(t,e)=>{var r,i,n,l;return"string"!=typeof t?{type:"message",data:S0(t,e)}:"b"===(r=t.charAt(0))?{type:"message",data:(i=t.substring(1),n=e,E0?(l=(t=>{let e=.75*t.length,r=t.length,i,n=0,l,a,s,o;"="===t[t.length-1]&&(e--,"="===t[t.length-2])&&e--;var u=new ArrayBuffer(e),h=new Uint8Array(u);for(i=0;i<r;i+=4)l=k0[t.charCodeAt(i)],a=k0[t.charCodeAt(i+1)],s=k0[t.charCodeAt(i+2)],o=k0[t.charCodeAt(i+3)],h[n++]=l<<2|a>>4,h[n++]=(15&a)<<4|s>>2,h[n++]=(3&s)<<6|63&o;return u})(i),S0(l,n)):{base64:!0,data:i})}:c0[r]?1<t.length?{type:c0[r],data:t.substring(1)}:{type:c0[r]}:d0},S0=(t,e)=>"blob"!==e?t instanceof ArrayBuffer?t:t.buffer:t instanceof Blob?t:new Blob([t]),N0=String.fromCharCode(30),T0;function O0(t){return t.reduce((t,e)=>t+e.length,0)}function C0(t,e){if(t[0].length===e)return t.shift();let r=new Uint8Array(e),i=0;for(let n=0;n<e;n++)r[n]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),r}function D0(t){if(t){var e,r=t;for(e in D0.prototype)r[e]=D0.prototype[e];return r}}D0.prototype.on=D0.prototype.addEventListener=function(t,e){return this.ar=this.ar||{},(this.ar["$"+t]=this.ar["$"+t]||[]).push(e),this},D0.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},D0.prototype.off=D0.prototype.removeListener=D0.prototype.removeAllListeners=D0.prototype.removeEventListener=function(t,e){if(this.ar=this.ar||{},0==arguments.length)this.ar={};else{var r=this.ar["$"+t];if(r)if(1==arguments.length)delete this.ar["$"+t];else{for(var i,n=0;n<r.length;n++)if((i=r[n])===e||i.fn===e){r.splice(n,1);break}0===r.length&&delete this.ar["$"+t]}}return this},D0.prototype.emitReserved=D0.prototype.emit=function(t){this.ar=this.ar||{};for(var e=new Array(arguments.length-1),r=this.ar["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r)for(var i=0,n=(r=r.slice(0)).length;i<n;++i)r[i].apply(this,e);return this},D0.prototype.listeners=function(t){return this.ar=this.ar||{},this.ar["$"+t]||[]},D0.prototype.hasListeners=function(t){return!!this.listeners(t).length};let A0="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),M0="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function P0(r,...t){return t.reduce((t,e)=>(r.hasOwnProperty(e)&&(t[e]=r[e]),t),{})}let I0=M0.setTimeout,R0=M0.clearTimeout;function B0(t,e){e.useNativeTimers?(t.setTimeoutFn=I0.bind(M0),t.clearTimeoutFn=R0.bind(M0)):(t.setTimeoutFn=M0.setTimeout.bind(M0),t.clearTimeoutFn=M0.clearTimeout.bind(M0))}function W0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class $0 extends Error{constructor(t,e,r){super(t),this.description=e,this.context=r,this.type="TransportError"}}class L0 extends D0{constructor(t){super(),this.writable=!1,B0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,r){return super.emitReserved("error",new $0(t,e,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){var e=x0(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this.sr()+this.ur()+this.opts.path+this.hr(e)}sr(){var t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}ur(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}hr(t){var e=(t=>{let e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e})(t);return e.length?"?"+e:""}}class F0 extends L0{constructor(){super(...arguments),this.cr=!1}get name(){return"polling"}doOpen(){this.dr()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this.cr||!this.writable){let t=0;this.cr&&(t++,this.once("pollComplete",function(){--t||e()})),this.writable||(t++,this.once("drain",function(){--t||e()}))}else e()}dr(){this.cr=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{var r=t.split(N0),i=[];for(let l=0;l<r.length;l++){var n=x0(r[l],e);if(i.push(n),"error"===n.type)break}return i})(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this.cr=!1,this.emitReserved("pollComplete"),"open"===this.readyState)&&this.dr()}doClose(){var t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1;{var e=t,l=t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})};let r=e.length,i=new Array(r),n=0;e.forEach((t,e)=>{g0(t,!1,t=>{i[e]=t,++n===r&&l(i.join(N0))})})}}uri(){var t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=W0()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}}let V0=!1;try{V0="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}let H0=V0;function j0(){}class U0 extends F0{constructor(t){var e;super(t),"undefined"!=typeof location&&(e=location.port||("https:"===location.protocol?"443":"80"),this.xd=t.hostname!==location.hostname||e!==t.port)}doWrite(t,e){var r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(t,e)=>{this.onError("xhr post error",t,e)})}doPoll(){var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t,e)=>{this.onError("xhr poll error",t,e)}),this.pollXhr=t}}class z0 extends D0{constructor(t,e,r){super(),this.createRequest=t,B0(this,r),this.vr=r,this.pr=r.method||"GET",this.gr=e,this.St=void 0!==r.data?r.data:null,this.wr()}wr(){var t,e=P0(this.vr,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.vr.xd;let r=this.mr=this.createRequest(e);try{r.open(this.pr,this.gr,!0);try{if(this.vr.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.vr.extraHeaders)this.vr.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.vr.extraHeaders[i])}catch(t){}if("POST"===this.pr)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}null!=(t=this.vr.cookieJar)&&t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.vr.withCredentials),this.vr.requestTimeout&&(r.timeout=this.vr.requestTimeout),r.onreadystatechange=()=>{var t;3===r.readyState&&null!=(t=this.vr.cookieJar)&&t.parseCookies(r.getResponseHeader("set-cookie")),4===r.readyState&&(200===r.status||1223===r.status?this.yr():this.setTimeoutFn(()=>{this.br("number"==typeof r.status?r.status:0)},0))},r.send(this.St)}catch(t){return void this.setTimeoutFn(()=>{this.br(t)},0)}"undefined"!=typeof document&&(this._r=z0.requestsCount++,z0.requests[this._r]=this)}br(t){this.emitReserved("error",t,this.mr),this.kr(!0)}kr(t){if(null!=this.mr){if(this.mr.onreadystatechange=j0,t)try{this.mr.abort()}catch(t){}"undefined"!=typeof document&&delete z0.requests[this._r],this.mr=null}}yr(){var t=this.mr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.kr())}abort(){this.kr()}}function G0(){for(var t in z0.requests)z0.requests.hasOwnProperty(t)&&z0.requests[t].abort()}z0.requestsCount=0,z0.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",G0):"function"==typeof addEventListener&&addEventListener("onpagehide"in M0?"pagehide":"unload",G0,!1));let X0=(b0=q0({xdomain:!1}))&&null!==b0.responseType;class Y0 extends U0{constructor(t){super(t);var e=t&&t.forceBase64;this.supportsBinary=X0&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new z0(q0,this.uri(),t)}}function q0(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||H0))return new XMLHttpRequest}catch(t){}if(!e)try{return new M0[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}let Z0="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class K0 extends L0{get name(){return"websocket"}doOpen(){var t=this.uri(),e=this.opts.protocols,r=Z0?{}:P0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,r)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){let e=t[i],r=i===t.length-1;g0(e,this.supportsBinary,t=>{try{this.doWrite(e,t)}catch(t){}r&&A0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=W0()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}let Q0=M0.WebSocket||M0.MozWebSocket;class J0 extends K0{createSocket(t,e,r){return Z0?new Q0(t,e,r):e?new Q0(t,e):new Q0(t)}doWrite(t,e){this.ws.send(e)}}class tp extends L0{get name(){return"webtransport"}doOpen(){try{this.Er=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this.Er.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.Er.ready.then(()=>{this.Er.createBidirectionalStream().then(t=>{let e=((l,a)=>{T0=T0||new TextDecoder;let s=[],o=0,u=-1,h=!1;return new TransformStream({transform(t,e){for(s.push(t);;){if(0===o){if(O0(s)<1)break;var r=C0(s,1);h=128==(128&r[0]),u=127&r[0],o=u<126?3:126===u?1:2}else if(1===o){if(O0(s)<2)break;r=C0(s,2);u=new DataView(r.buffer,r.byteOffset,r.length).getUint16(0),o=3}else if(2===o){if(O0(s)<8)break;var i=C0(s,8),i=new DataView(i.buffer,i.byteOffset,i.length),n=i.getUint32(0);if(n>Math.pow(2,21)-1){e.enqueue(d0);break}u=n*Math.pow(2,32)+i.getUint32(4),o=3}else{if(O0(s)<u)break;n=C0(s,u);e.enqueue(x0(h?n:T0.decode(n),a)),o=0}if(0===u||u>l){e.enqueue(d0);break}}}})})(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(e).getReader(),i=new TransformStream({transform(l,a){var t=l,e=t=>{let e,r,i=t.length,n;i<126?(n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i)):i<65536?(n=new Uint8Array(3),(e=new DataView(n.buffer)).setUint8(0,126),e.setUint16(1,i)):(n=new Uint8Array(9),(r=new DataView(n.buffer)).setUint8(0,127),r.setBigUint64(1,BigInt(i))),l.data&&"string"!=typeof l.data&&(n[0]|=128),a.enqueue(n),a.enqueue(t)};v0&&t.data instanceof Blob?t.data.arrayBuffer().then(m0).then(e):f0&&(t.data instanceof ArrayBuffer||p0(t.data))?e(m0(t.data)):g0(t,!1,t=>{y0=y0||new TextEncoder,e(y0.encode(t))})}}),n=(i.readable.pipeTo(t.writable),this.Sr=i.writable.getWriter(),()=>{r.read().then(({done:t,value:e})=>{t||(this.onPacket(e),n())}).catch(t=>{})});n();var l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this.Sr.write(l).then(()=>this.onOpen())})})}write(r){this.writable=!1;for(let i=0;i<r.length;i++){let t=r[i],e=i===r.length-1;this.Sr.write(t).then(()=>{e&&A0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;null!=(t=this.Er)&&t.close()}}let ep={websocket:J0,webtransport:tp,polling:Y0},rp=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ip=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function np(t){if(8e3<t.length)throw"URI too long";var e=t,r=t.indexOf("["),i=t.indexOf("]");-1!=r&&-1!=i&&(t=t.substring(0,r)+t.substring(r,i).replace(/:/g,";")+t.substring(i,t.length));let n=rp.exec(t||""),l={},a=14;for(;a--;)l[ip[a]]=n[a]||"";return-1!=r&&-1!=i&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=(i=(r=l.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=r.slice(0,1)&&0!==r.length||i.splice(0,1),"/"==r.slice(-1)&&i.splice(i.length-1,1),i),l.queryKey=(()=>{let i={};return l.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,r){e&&(i[e]=r)}),i})(),l}let lp="function"==typeof addEventListener&&"function"==typeof removeEventListener,ap=[];lp&&addEventListener("offline",()=>{ap.forEach(t=>t())},!1);class sp extends D0{constructor(t,e){var r;super(),this.binaryType="arraybuffer",this.writeBuffer=[],this.Nr=0,this.Tr=-1,this.Or=-1,this.Cr=-1,this.Dr=Infinity,t&&"object"==typeof t&&(e=t,t=null),t?(r=np(t),e.hostname=r.host,e.secure="https"===r.protocol||"wss"===r.protocol,e.port=r.port,r.query&&(e.query=r.query)):e.host&&(e.hostname=np(e.host).host),B0(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this.Ar={},e.transports.forEach(t=>{var e=t.prototype.name;this.transports.push(e),this.Ar[e]=t}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=(t=>{var e={},r=t.split("&");for(let n=0,l=r.length;n<l;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e})(this.opts.query)),lp&&(this.opts.closeOnBeforeunload&&(this.Mr=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.Mr,!1)),"localhost"!==this.hostname)&&(this.Pr=()=>{this.Ir("transport close",{description:"network connection lost"})},ap.push(this.Pr)),this.opts.withCredentials&&(this.Rr=void 0),this.Br()}createTransport(t){var e=Object.assign({},this.opts.query),e=(e.EIO=4,e.transport=t,this.id&&(e.sid=this.id),Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]));return new this.Ar[t](e)}Br(){var t;0===this.transports.length?this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0):(t=this.opts.rememberUpgrade&&sp.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0],this.readyState="opening",(t=this.createTransport(t)).open(),this.setTransport(t))}setTransport(t){this.transport&&this.transport.removeAllListeners(),(this.transport=t).on("drain",this.Wr.bind(this)).on("packet",this.$r.bind(this)).on("error",this.br.bind(this)).on("close",t=>this.Ir("transport close",t))}onOpen(){this.readyState="open",sp.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}$r(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.Lr("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this.Fr();break;case"error":var e=new Error("server error");e.code=t.data,this.br(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.Tr=t.pingInterval,this.Or=t.pingTimeout,this.Cr=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.Fr()}Fr(){this.clearTimeoutFn(this.Vr);var t=this.Tr+this.Or;this.Dr=Date.now()+t,this.Vr=this.setTimeoutFn(()=>{this.Ir("ping timeout")},t),this.opts.autoUnref&&this.Vr.unref()}Wr(){this.writeBuffer.splice(0,this.Nr),(this.Nr=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var t;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t=this.Hr(),this.transport.send(t),this.Nr=t.length,this.emitReserved("flush"))}Hr(){if(this.Cr&&"polling"===this.transport.name&&1<this.writeBuffer.length){let t=1;for(let e=0;e<this.writeBuffer.length;e++){var r=this.writeBuffer[e].data;if(r&&(t+=(l=>{if("string"!=typeof l)return Math.ceil(1.33*(l.byteLength||l.size));{let t=l,e,r=0;for(let i=0,n=t.length;i<n;i++)(e=t.charCodeAt(i))<128?r+=1:e<2048?r+=2:e<55296||57344<=e?r+=3:(i++,r+=4);return r}})(r)),0<e&&t>this.Cr)return this.writeBuffer.slice(0,e);t+=2}}return this.writeBuffer}jr(){var t;return!this.Dr||((t=Date.now()>this.Dr)&&(this.Dr=0,A0(()=>{this.Ir("ping timeout")},this.setTimeoutFn)),t)}write(t,e,r){return this.Lr("message",t,e,r),this}send(t,e,r){return this.Lr("message",t,e,r),this}Lr(t,e,r,i){var n;"function"==typeof e&&(i=e,e=void 0),"function"==typeof r&&(i=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((r=r||{}).compress=!1!==r.compress,this.emitReserved("packetCreate",n={type:t,data:e,options:r}),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush())}close(){let t=()=>{this.Ir("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{(this.upgrading?r:t)()}):(this.upgrading?r:t)()),this}br(t){if(sp.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&1<this.transports.length&&"opening"===this.readyState)return this.transports.shift(),this.Br();this.emitReserved("error",t),this.Ir("transport error",t)}Ir(t,e){var r;"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.Vr),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),lp&&(this.Mr&&removeEventListener("beforeunload",this.Mr,!1),this.Pr)&&-1!==(r=ap.indexOf(this.Pr))&&ap.splice(r,1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.Nr=0)}}sp.protocol=4;class op extends sp{constructor(){super(...arguments),this.Ur=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let t=0;t<this.Ur.length;t++)this.zr(this.Ur[t])}zr(t){let r=this.createTransport(t),i=!1,e=(sp.priorWebsocketSuccess=!1,()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",t=>{var e;i||("pong"===t.type&&"probe"===t.data?(this.upgrading=!0,this.emitReserved("upgrading",r),r&&(sp.priorWebsocketSuccess="websocket"===r.name,this.transport.pause(()=>{i||"closed"!==this.readyState&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())}))):((e=new Error("probe error")).transport=r.name,this.emitReserved("upgradeError",e)))}))});function n(){i||(i=!0,u(),r.close(),r=null)}let l=t=>{var e=new Error("probe error: "+t);e.transport=r.name,n(),this.emitReserved("upgradeError",e)};function a(){l("transport closed")}function s(){l("socket closed")}function o(t){r&&t.name!==r.name&&n()}let u=()=>{r.removeListener("open",e),r.removeListener("error",l),r.removeListener("close",a),this.off("close",s),this.off("upgrading",o)};r.once("open",e),r.once("error",l),r.once("close",a),this.once("close",s),this.once("upgrading",o),-1!==this.Ur.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(t){this.Ur=this.Gr(t.upgrades),super.onHandshake(t)}Gr(t){var e=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&e.push(t[r]);return e}}let up=class extends op{constructor(t,e={}){var r="object"==typeof t?t:e;r.transports&&(r.transports,"string"!=typeof r.transports[0])||(r.transports=(r.transports||["polling","websocket","webtransport"]).map(t=>ep[t]).filter(t=>!!t)),super(t,r)}};class hp extends F0{doPoll(){this.Xr().then(t=>{if(!t.ok)return this.onError("fetch read error",t.status,t);t.text().then(t=>this.onData(t))}).catch(t=>{this.onError("fetch read error",t)})}doWrite(t,e){this.Xr(t).then(t=>{if(!t.ok)return this.onError("fetch write error",t.status,t);e()}).catch(t=>{this.onError("fetch write error",t)})}Xr(t){var e,r=void 0!==t,i=new Headers(this.opts.extraHeaders);return r&&i.set("content-type","text/plain;charset=UTF-8"),null!=(e=this.socket.Rr)&&e.appendCookies(i),fetch(this.uri(),{method:r?"POST":"GET",body:r?t:null,headers:i,credentials:this.opts.withCredentials?"include":"omit"}).then(t=>{var e;return null!=(e=this.socket.Rr)&&e.parseCookies(t.headers.getSetCookie()),t})}}let cp="function"==typeof ArrayBuffer;var a,dp=Object.prototype.toString;let vp="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===dp.call(Blob),fp="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===dp.call(File);function pp(t){return cp&&(t instanceof ArrayBuffer||(e=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer))||vp&&t instanceof Blob||fp&&t instanceof File;var e}let gp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];a={CONNECT:0,0:"CONNECT",DISCONNECT:1,1:"DISCONNECT",EVENT:2,2:"EVENT",ACK:3,3:"ACK",CONNECT_ERROR:4,4:"CONNECT_ERROR",BINARY_EVENT:5,5:"BINARY_EVENT",BINARY_ACK:6,6:"BINARY_ACK"};function wp(t){return"[object Object]"===Object.prototype.toString.call(t)}class mp extends D0{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(e=this.decodeString(t)).type===a.BINARY_EVENT;(r||e.type===a.BINARY_ACK)&&(e.type=r?a.EVENT:a.ACK,this.reconstructor=new yp(e),0!==e.attachments)||super.emitReserved("decoded",e)}else{if(!pp(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0,r={type:Number(t.charAt(0))};if(void 0===a[r.type])throw new Error("unknown packet type "+r.type);if(r.type===a.BINARY_EVENT||r.type===a.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);i=t.substring(i,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(e+1)){for(i=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);r.nsp=t.substring(i,e)}else r.nsp="/";i=t.charAt(e+1);if(""!==i&&Number(i)==i){for(i=e+1;++e;){var n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}r.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){i=this.tryParse(t.substr(e));if(!mp.isPayloadValid(r.type,i))throw new Error("invalid payload");r.data=i}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case a.CONNECT:return wp(e);case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||wp(e);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===gp.indexOf(e[0]));case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class yp{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){var e,r;return this.buffers.push(t),this.buffers.length===this.reconPack.attachments?(e=this.reconPack,r=this.buffers,e.data=function e(r,i){if(r){if(!0===r.Yr){if("number"==typeof r.num&&0<=r.num&&r.num<i.length)return i[r.num];throw new Error("illegal attachments")}if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=e(r[t],i);else if("object"==typeof r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=e(r[n],i))}return r}(e.data,r),delete e.attachments,r=e,this.finishedReconstruction(),r):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var bp=Object.freeze({__proto__:null,Decoder:mp,Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==a.EVENT&&t.type!==a.ACK||!function r(i){if(i&&"object"==typeof i)if(Array.isArray(i)){for(let t=0,e=i.length;t<e;t++)if(r(i[t]))return!0}else{if(pp(i))return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return r(i.toJSON(),!0);for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&r(i[n]))return!0}return!1}(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){r=t.data,(e=t).data=function e(r,i){if(!r)return r;var t;if(pp(r))return t={Yr:!0,num:i.length},i.push(r),t;if(Array.isArray(r)){var n=new Array(r.length);for(let t=0;t<r.length;t++)n[t]=e(r[t],i);return n}if("object"!=typeof r||r instanceof Date)return r;var l,a={};for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(a[l]=e(r[l],i));return a}(r,r=[]),e.attachments=r.length;var e={packet:e,buffers:r},r=this.encodeAsString(e.packet),e=e.buffers;return e.unshift(r),e}},get PacketType(){return a},protocol:5});function _p(t,e,r){return t.on(e,r),function(){t.off(e,r)}}let kp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ep extends D0{constructor(t,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this.qr=[],this.Zr=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this.vr=Object.assign({},r),this.io.Kr&&this.open()}get disconnected(){return!this.connected}subEvents(){var t;this.subs||(t=this.io,this.subs=[_p(t,"open",this.onopen.bind(this)),_p(t,"packet",this.onpacket.bind(this)),_p(t,"error",this.onerror.bind(this)),_p(t,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io.Qr||this.io.open(),"open"===this.io.Jr&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var r,i,n;if(kp.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');return e.unshift(t),!this.vr.retries||this.flags.fromQueue||this.flags.volatile?((r={type:a.EVENT,data:e,options:{}}).options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(n=this.ids++,i=e.pop(),this.ti(n,i),r.id=n),i=null==(n=null==(i=this.io.engine)?void 0:i.transport)?void 0:n.writable,n=this.connected&&!(null!=(n=this.io.engine)&&n.jr()),this.flags.volatile&&!i||(n?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={}):this.ei(e),this}ti(r,i){var n=null!=(n=this.flags.timeout)?n:this.vr.ackTimeout;if(void 0===n)this.acks[r]=i;else{let e=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===r&&this.sendBuffer.splice(t,1);i.call(this,new Error("operation has timed out"))},n),t=(...t)=>{this.io.clearTimeoutFn(e),i.apply(this,t)};t.withError=!0,this.acks[r]=t}}emitWithAck(e,...n){return new Promise((r,i)=>{var t=(t,e)=>t?i(t):r(e);t.withError=!0,n.push(t),this.emit(e,...n)})}ei(t){let r,i=("function"==typeof t[t.length-1]&&(r=t.pop()),{id:this.Zr++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)});t.push((t,...e)=>{if(i===this.qr[0])return null!==t?i.tryCount>this.vr.retries&&(this.qr.shift(),r)&&r(t):(this.qr.shift(),r&&r(null,...e)),i.pending=!1,this.ri()}),this.qr.push(i),this.ri()}ri(t=!1){var e;!this.connected||0===this.qr.length||(e=this.qr[0]).pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io.ii(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this.ni(t)}):this.ni(this.auth)}ni(t){this.packet({type:a.CONNECT,data:this.li?Object.assign({pid:this.li,offset:this.ai},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this.si()}si(){Object.keys(this.acks).forEach(e=>{var t;this.sendBuffer.some(t=>String(t.id)===e)||(t=this.acks[e],delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected")))})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case a.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case a.EVENT:case a.BINARY_EVENT:this.onevent(t);break;case a.ACK:case a.BINARY_ACK:this.onack(t);break;case a.DISCONNECT:this.ondisconnect();break;case a.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){var e;if(this.oi&&this.oi.length)for(e of this.oi.slice())e.apply(this,t);super.emit.apply(this,t),this.li&&t.length&&"string"==typeof t[t.length-1]&&(this.ai=t[t.length-1])}ack(e){let r=this,i=!1;return function(...t){i||(i=!0,r.packet({type:a.ACK,id:e,data:t}))}}onack(t){var e=this.acks[t.id];"function"==typeof e&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this.li===e,this.li=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this.ri(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io.ui(this)}disconnect(){return this.connected&&this.packet({type:a.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this.oi=this.oi||[],this.oi.push(t),this}prependAny(t){return this.oi=this.oi||[],this.oi.unshift(t),this}offAny(e){if(this.oi)if(e){var r=this.oi;for(let t=0;t<r.length;t++)if(e===r[t])return r.splice(t,1),this}else this.oi=[];return this}listenersAny(){return this.oi||[]}onAnyOutgoing(t){return this.hi=this.hi||[],this.hi.push(t),this}prependAnyOutgoing(t){return this.hi=this.hi||[],this.hi.unshift(t),this}offAnyOutgoing(e){if(this.hi)if(e){var r=this.hi;for(let t=0;t<r.length;t++)if(e===r[t])return r.splice(t,1),this}else this.hi=[];return this}listenersAnyOutgoing(){return this.hi||[]}notifyOutgoingListeners(t){var e;if(this.hi&&this.hi.length)for(e of this.hi.slice())e.apply(this,t.data)}}function xp(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}xp.prototype.duration=function(){var t,e,r=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*r),r=0==(1&Math.floor(10*t))?r-e:r+e),0|Math.min(r,this.max)},xp.prototype.reset=function(){this.attempts=0},xp.prototype.setMin=function(t){this.ms=t},xp.prototype.setMax=function(t){this.max=t},xp.prototype.setJitter=function(t){this.jitter=t};class Sp extends D0{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,B0(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||Infinity),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(r=e.randomizationFactor)?r:.5),this.backoff=new xp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.Jr="closed",this.uri=t;var r=e.parser||bp;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.Kr=!1!==e.autoConnect,this.Kr&&this.open()}reconnection(t){return arguments.length?(this.ci=!!t,t||(this.skipReconnect=!0),this):this.ci}reconnectionAttempts(t){return void 0===t?this.di:(this.di=t,this)}reconnectionDelay(t){var e;return void 0===t?this.vi:(this.vi=t,null!=(e=this.backoff)&&e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this.fi:(this.fi=t,null!=(e=this.backoff)&&e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this.pi:(this.pi=t,null!=(e=this.backoff)&&e.setMax(t),this)}timeout(t){return arguments.length?(this.gi=t,this):this.gi}maybeReconnectOnOpen(){!this.Qr&&this.ci&&0===this.backoff.attempts&&this.reconnect()}open(l){if(!~this.Jr.indexOf("open")){this.engine=new up(this.uri,this.opts);let r=this.engine,t=this,i=(this.Jr="opening",this.skipReconnect=!1,_p(r,"open",function(){t.onopen(),l&&l()})),n=t=>{this.cleanup(),this.Jr="closed",this.emitReserved("error",t),l?l(t):this.maybeReconnectOnOpen()},e=_p(r,"error",n);if(!1!==this.gi){let t=this.gi,e=this.setTimeoutFn(()=>{i(),n(new Error("timeout")),r.close()},t);this.opts.autoUnref&&e.unref(),this.subs.push(()=>{this.clearTimeoutFn(e)})}this.subs.push(i),this.subs.push(e)}return this}connect(t){return this.open(t)}onopen(){this.cleanup(),this.Jr="open",this.emitReserved("open");var t=this.engine;this.subs.push(_p(t,"ping",this.onping.bind(this)),_p(t,"data",this.ondata.bind(this)),_p(t,"error",this.onerror.bind(this)),_p(t,"close",this.onclose.bind(this)),_p(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){A0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r?this.Kr&&!r.active&&r.connect():(r=new Ep(this,t,e),this.nsps[t]=r),r}ui(t){var e;for(e of Object.keys(this.nsps)){let t=this.nsps[e];if(t.active)return}this.wi()}ii(t){var e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}wi(){this.skipReconnect=!0,this.Qr=!1,this.onclose("forced close")}disconnect(){return this.wi()}onclose(t,e){var r;this.cleanup(),null!=(r=this.engine)&&r.close(),this.backoff.reset(),this.Jr="closed",this.emitReserved("close",t,e),this.ci&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this.Qr||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this.di)this.backoff.reset(),this.emitReserved("reconnect_failed"),this.Qr=!1;else{var r=this.backoff.duration();this.Qr=!0;let t=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect)||e.open(t=>{t?(e.Qr=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})},r);this.opts.autoUnref&&t.unref(),this.subs.push(()=>{this.clearTimeoutFn(t)})}}onreconnect(){var t=this.backoff.attempts;this.Qr=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}let Np={};function Tp(t,e){"object"==typeof t&&(e=t,t=void 0);var r=((t,e,r)=>{let i=t;r="undefined"!=typeof location&&location,"string"==typeof(t=null==t?r.protocol+"//"+r.host:t)&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(t=r.protocol+"//"+t),i=np(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var n=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+e,i.href=i.protocol+"://"+n+(r&&r.port===i.port?"":":"+i.port),i})(t,(e=e||{}).path||"/socket.io"),i=r.source,n=r.id,l=r.path,l=Np[n]&&l in Np[n].nsps,l=e.forceNew||e["force new connection"]||!1===e.multiplex||l?new Sp(i,e):(Np[n]||(Np[n]=new Sp(i,e)),Np[n]);return r.query&&!e.query&&(e.query=r.queryKey),l.socket(r.path,e)}Object.assign(Tp,{Manager:Sp,Socket:Ep,io:Tp,connect:Tp});var Op=Object.freeze({__proto__:null,Fetch:hp,Manager:Sp,NodeWebSocket:J0,NodeXHR:Y0,Socket:Ep,WebSocket:J0,WebTransport:tp,XHR:Y0,connect:Tp,default:Tp,io:Tp,protocol:5});i.actions=rv,i.debug=s0,i.modules=u0,i.settings=st,i.triggers=gv,i.utils=o0,i.watchers=dh,i.widgets=a0})(this.LISN=this.LISN||{});