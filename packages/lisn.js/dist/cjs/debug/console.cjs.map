{"version":3,"file":"console.cjs","names":["_localConsole","require","_remoteConsole","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","Console","constructor","remoteUrl","connectTimeout","remoteConsole","RemoteConsole","reuse","localConsole","LocalConsole","sendLog","level","args","debug","log","info","warn","error","exports"],"sources":["../../../src/ts/debug/console.ts"],"sourcesContent":["/**\n * @module Debugging\n */\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { LevelName, ConsoleInterface } from \"@lisn/debug/types\";\nimport { LocalConsole } from \"@lisn/debug/local-console\";\nimport { RemoteConsole } from \"@lisn/debug/remote-console\";\n\n/**\n * Holds a {@link LocalConsole} and optionally a {@link RemoteConsole} and logs\n * to both.\n */\nexport class Console implements ConsoleInterface {\n  readonly debug: LogFunction;\n  readonly log: LogFunction;\n  readonly info: LogFunction;\n  readonly warn: LogFunction;\n  readonly error: LogFunction;\n\n  /**\n   * @param remoteUrl        Attempt to use a remote logger at this URL.\n   * @param [connectTimeout] The timeout in ms for a remote connection to be\n   *                         considered failed. See {@link RemoteConsole}.\n   */\n  constructor(remoteUrl?: string, connectTimeout?: number) {\n    let remoteConsole;\n    // RemoteConsole import may be replaced with null by rollup when bundling\n    // production, so check\n    if (remoteUrl) {\n      remoteConsole = RemoteConsole.reuse(remoteUrl, connectTimeout);\n    } else {\n      remoteConsole = null;\n    }\n\n    const localConsole = new LocalConsole();\n    const sendLog = (level: LevelName, args: unknown[]) => {\n      localConsole[level](...args);\n      if (remoteConsole) {\n        remoteConsole[level](...args);\n      }\n    };\n\n    this.debug = (...args) => sendLog(\"debug\", args);\n    this.log = (...args) => sendLog(\"log\", args);\n    this.info = (...args) => sendLog(\"info\", args);\n    this.warn = (...args) => sendLog(\"warn\", args);\n    this.error = (...args) => sendLog(\"error\", args);\n  }\n}\n"],"mappings":";;;;;;AAOA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AAA2D,SAAAE,gBAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAD,CAAA,GAAAI,MAAA,CAAAC,cAAA,CAAAL,CAAA,EAAAC,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAT,CAAA,CAAAC,CAAA,IAAAC,CAAA,EAAAF,CAAA;AAAA,SAAAG,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAb,CAAA,QAAAU,CAAA,GAAAV,CAAA,CAAAc,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA,KAR3D;AACA;AACA;AAQA;AACA;AACA;AACA;AACO,MAAMgB,OAAO,CAA6B;EAO/C;AACF;AACA;AACA;AACA;EACEC,WAAWA,CAACC,SAAkB,EAAEC,cAAuB,EAAE;IAAAtB,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACvD,IAAIuB,aAAa;IACjB;IACA;IACA,IAAIF,SAAS,EAAE;MACbE,aAAa,GAAGC,4BAAa,CAACC,KAAK,CAACJ,SAAS,EAAEC,cAAc,CAAC;IAChE,CAAC,MAAM;MACLC,aAAa,GAAG,IAAI;IACtB;IAEA,MAAMG,YAAY,GAAG,IAAIC,0BAAY,CAAC,CAAC;IACvC,MAAMC,OAAO,GAAGA,CAACC,KAAgB,EAAEC,IAAe,KAAK;MACrDJ,YAAY,CAACG,KAAK,CAAC,CAAC,GAAGC,IAAI,CAAC;MAC5B,IAAIP,aAAa,EAAE;QACjBA,aAAa,CAACM,KAAK,CAAC,CAAC,GAAGC,IAAI,CAAC;MAC/B;IACF,CAAC;IAED,IAAI,CAACC,KAAK,GAAG,CAAC,GAAGD,IAAI,KAAKF,OAAO,CAAC,OAAO,EAAEE,IAAI,CAAC;IAChD,IAAI,CAACE,GAAG,GAAG,CAAC,GAAGF,IAAI,KAAKF,OAAO,CAAC,KAAK,EAAEE,IAAI,CAAC;IAC5C,IAAI,CAACG,IAAI,GAAG,CAAC,GAAGH,IAAI,KAAKF,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;IAC9C,IAAI,CAACI,IAAI,GAAG,CAAC,GAAGJ,IAAI,KAAKF,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;IAC9C,IAAI,CAACK,KAAK,GAAG,CAAC,GAAGL,IAAI,KAAKF,OAAO,CAAC,OAAO,EAAEE,IAAI,CAAC;EAClD;AACF;AAACM,OAAA,CAAAjB,OAAA,GAAAA,OAAA","ignoreList":[]}