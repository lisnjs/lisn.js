{"version":3,"file":"console.js","names":["LocalConsole","RemoteConsole","Console","_createClass","remoteUrl","connectTimeout","_classCallCheck","_defineProperty","remoteConsole","reuse","localConsole","sendLog","level","args","apply","_toConsumableArray","_remoteConsole","debug","_len","arguments","length","Array","_key","log","_len2","_key2","info","_len3","_key3","warn","_len4","_key4","error","_len5","_key5"],"sources":["../../../src/ts/debug/console.ts"],"sourcesContent":["/**\n * @module Debugging\n */\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { LevelName, ConsoleInterface } from \"@lisn/debug/types\";\nimport { LocalConsole } from \"@lisn/debug/local-console\";\nimport { RemoteConsole } from \"@lisn/debug/remote-console\";\n\n/**\n * Holds a {@link LocalConsole} and optionally a {@link RemoteConsole} and logs\n * to both.\n */\nexport class Console implements ConsoleInterface {\n  readonly debug: LogFunction;\n  readonly log: LogFunction;\n  readonly info: LogFunction;\n  readonly warn: LogFunction;\n  readonly error: LogFunction;\n\n  /**\n   * @param {} remoteUrl         Attempt to use a remote logger at this URL.\n   * @param {} [connectTimeout]  The timeout in ms for a remote connection to\n   *                             be considered failed.\n   *                             See {@link RemoteConsole}.\n   */\n  constructor(remoteUrl?: string, connectTimeout?: number) {\n    let remoteConsole;\n    // RemoteConsole import may be replaced with null by rollup when bundling\n    // production, so check\n    if (remoteUrl) {\n      remoteConsole = RemoteConsole.reuse(remoteUrl, connectTimeout);\n    } else {\n      remoteConsole = null;\n    }\n\n    const localConsole = new LocalConsole();\n    const sendLog = (level: LevelName, args: unknown[]) => {\n      localConsole[level](...args);\n      if (remoteConsole) {\n        remoteConsole[level](...args);\n      }\n    };\n\n    this.debug = (...args) => sendLog(\"debug\", args);\n    this.log = (...args) => sendLog(\"log\", args);\n    this.info = (...args) => sendLog(\"info\", args);\n    this.warn = (...args) => sendLog(\"warn\", args);\n    this.error = (...args) => sendLog(\"error\", args);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;;AAKA,SAASA,YAAY;AACrB,SAASC,aAAa;;AAEtB;AACA;AACA;AACA;AACA,WAAaC,OAAO,gBAAAC,YAAA;AAOlB;AACF;AACA;AACA;AACA;AACA;AACE,SAAAD,QAAYE,SAAkB,EAAEC,cAAuB,EAAE;EAAAC,eAAA,OAAAJ,OAAA;EAAAK,eAAA;EAAAA,eAAA;EAAAA,eAAA;EAAAA,eAAA;EAAAA,eAAA;EACvD,IAAIC,aAAa;EACjB;EACA;EACA,IAAIJ,SAAS,EAAE;IACbI,aAAa,GAAGP,aAAa,CAACQ,KAAK,CAACL,SAAS,EAAEC,cAAc,CAAC;EAChE,CAAC,MAAM;IACLG,aAAa,GAAG,IAAI;EACtB;EAEA,IAAME,YAAY,GAAG,IAAIV,YAAY,CAAC,CAAC;EACvC,IAAMW,OAAO,GAAG,SAAVA,OAAOA,CAAIC,KAAgB,EAAEC,IAAe,EAAK;IACrDH,YAAY,CAACE,KAAK,CAAC,CAAAE,KAAA,CAAnBJ,YAAY,EAAAK,kBAAA,CAAWF,IAAI,EAAC;IAC5B,IAAIL,aAAa,EAAE;MAAA,IAAAQ,cAAA;MACjB,CAAAA,cAAA,GAAAR,aAAa,EAACI,KAAK,CAAC,CAAAE,KAAA,CAAAE,cAAA,EAAAD,kBAAA,CAAIF,IAAI,EAAC;IAC/B;EACF,CAAC;EAED,IAAI,CAACI,KAAK,GAAG;IAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAIP,IAAI,OAAAQ,KAAA,CAAAH,IAAA,GAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;MAAJT,IAAI,CAAAS,IAAA,IAAAH,SAAA,CAAAG,IAAA;IAAA;IAAA,OAAKX,OAAO,CAAC,OAAO,EAAEE,IAAI,CAAC;EAAA;EAChD,IAAI,CAACU,GAAG,GAAG;IAAA,SAAAC,KAAA,GAAAL,SAAA,CAAAC,MAAA,EAAIP,IAAI,OAAAQ,KAAA,CAAAG,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJZ,IAAI,CAAAY,KAAA,IAAAN,SAAA,CAAAM,KAAA;IAAA;IAAA,OAAKd,OAAO,CAAC,KAAK,EAAEE,IAAI,CAAC;EAAA;EAC5C,IAAI,CAACa,IAAI,GAAG;IAAA,SAAAC,KAAA,GAAAR,SAAA,CAAAC,MAAA,EAAIP,IAAI,OAAAQ,KAAA,CAAAM,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJf,IAAI,CAAAe,KAAA,IAAAT,SAAA,CAAAS,KAAA;IAAA;IAAA,OAAKjB,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;EAAA;EAC9C,IAAI,CAACgB,IAAI,GAAG;IAAA,SAAAC,KAAA,GAAAX,SAAA,CAAAC,MAAA,EAAIP,IAAI,OAAAQ,KAAA,CAAAS,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJlB,IAAI,CAAAkB,KAAA,IAAAZ,SAAA,CAAAY,KAAA;IAAA;IAAA,OAAKpB,OAAO,CAAC,MAAM,EAAEE,IAAI,CAAC;EAAA;EAC9C,IAAI,CAACmB,KAAK,GAAG;IAAA,SAAAC,KAAA,GAAAd,SAAA,CAAAC,MAAA,EAAIP,IAAI,OAAAQ,KAAA,CAAAY,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJrB,IAAI,CAAAqB,KAAA,IAAAf,SAAA,CAAAe,KAAA;IAAA;IAAA,OAAKvB,OAAO,CAAC,OAAO,EAAEE,IAAI,CAAC;EAAA;AAClD,CAAC","ignoreList":[]}