{"version":3,"file":"log.cjs","names":["MC","_interopRequireWildcard","require","MH","_text","_callback","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","logInfo","args","isMessageSeen","consoleInfo","LOG_PREFIX","exports","logWarn","consoleWarn","logError","lengthOf","Callback","REMOVE","consoleError","discardMessages","newSet","msg","joinAsString","isSeen","add"],"sources":["../../../src/ts/utils/log.ts"],"sourcesContent":["/**\n * @module Utils\n */\n\nimport * as MC from \"@lisn/globals/minification-constants\";\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { joinAsString } from \"@lisn/utils/text\";\n\nimport { Callback } from \"@lisn/modules/callback\";\n\n/**\n * Like `console.info` except if the string representation of the given\n * arguments has already been logged, it does nothing.\n *\n * @category Logging\n */\nexport const logInfo: LogFunction = (...args) => {\n  if (!isMessageSeen(args)) {\n    MH.consoleInfo(MC.LOG_PREFIX, ...args);\n  }\n};\n\n/**\n * Like `console.warn` except if the string representation of the given\n * arguments has already been logged, it does nothing.\n *\n * @category Logging\n */\nexport const logWarn: LogFunction = (...args) => {\n  if (!isMessageSeen(args)) {\n    MH.consoleWarn(MC.LOG_PREFIX, ...args);\n  }\n};\n\n/**\n * Like `console.error` except if the string representation of the given\n * arguments has already been logged, it does nothing.\n *\n * @category Logging\n */\nexport const logError: LogFunction = (...args) => {\n  if (\n    (MH.lengthOf(args) > 1 || args[0] !== Callback.REMOVE) &&\n    !isMessageSeen(args)\n  ) {\n    MH.consoleError(MC.LOG_PREFIX, ...args);\n  }\n};\n\nconst discardMessages = MH.newSet<string>();\nconst isMessageSeen = (args: unknown[]) => {\n  const msg = joinAsString(\" \", ...args);\n  const isSeen = discardMessages.has(msg);\n  discardMessages.add(msg);\n  return isSeen;\n};\n"],"mappings":"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","ignoreList":[]}