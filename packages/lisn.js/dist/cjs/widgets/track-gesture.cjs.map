{"version":3,"file":"track-gesture.cjs","names":["MH","_interopRequireWildcard","require","_validation","_gestureWatcher","_widget","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_classCallCheck","TypeError","_defineProperties","length","o","enumerable","configurable","writable","_toPropertyKey","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","create","value","_setPrototypeOf","setPrototypeOf","bind","_superPropGet","p","_get","_superPropBase","arguments","getPrototypeOf","TrackGesture","exports","_Widget","element","config","_this","id","DUMMY_ID","GestureWatcher","reuse","trackGesture","preventDefault","minTotalDeltaX","minDeltaX","maxTotalDeltaX","maxDeltaX","minTotalDeltaY","minDeltaY","maxTotalDeltaY","maxDeltaY","minTotalDeltaZ","minDeltaZ","maxTotalDeltaZ","maxDeltaZ","onDestroy","noTrackGesture","instance","isInstanceOf","register","registerWidget","WIDGET_NAME","configValidator","Widget","validateBoolean","validateNumber"],"sources":["../../../src/ts/widgets/track-gesture.ts"],"sourcesContent":["/**\n * @module Widgets\n */\n\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { validateBoolean, validateNumber } from \"@lisn/utils/validation\";\n\nimport { GestureWatcher } from \"@lisn/watchers/gesture-watcher\";\n\nimport {\n  Widget,\n  WidgetConfigValidatorObject,\n  registerWidget,\n} from \"@lisn/widgets/widget\";\n\n/**\n * This is a simple wrapper around the {@link GestureWatcher}. If you are using\n * the JavaScript API, you should use the {@link GestureWatcher} directly. The\n * purpose of this widget is to expose the watcher's ability to track gestures\n * and set relevant CSS properties via the HTML API. See\n * {@link GestureWatcher.trackGesture}.\n *\n * -----\n *\n * To use with auto-widgets (HTML API) (see\n * {@link Settings.settings.autoWidgets | settings.autoWidgets}), the following\n * CSS classes or data attributes are recognized:\n * - `lisn-track-gesture` class or `data-lisn-track-gesture` attribute set on\n *   the element that constitutes the widget.\n *\n * See below examples for what values you can use set for the data attributes\n * in order to modify the configuration of the automatically created widget.\n *\n * @example\n * This will track user gestures over this element and set the relevant CSS\n * properties. It will use the default {@link GestureWatcher} options.\n *\n * ```html\n * <div class=\"lisn-track-gesture\"></div>\n * ```\n *\n * @example\n * As above but with custom settings.\n *\n * ```html\n * <div data-lisn-track-gesture=\"prevent-default=false\n *                               | min-delta-x=-100\n *                               | max-delta-x=100\n *                               | min-delta-y=-100\n *                               | max-delta-y=100\n *                               | min-delta-z=0.5\n *                               | max-delta-z=2\"\n * ></div>\n * ```\n */\nexport class TrackGesture extends Widget {\n  static get(element: Element): TrackGesture | null {\n    const instance = super.get(element, DUMMY_ID);\n    if (MH.isInstanceOf(instance, TrackGesture)) {\n      return instance;\n    }\n    return null;\n  }\n\n  static register() {\n    registerWidget(\n      WIDGET_NAME,\n      (element, config) => {\n        if (!TrackGesture.get(element)) {\n          return new TrackGesture(element, config);\n        }\n        return null;\n      },\n      configValidator,\n    );\n  }\n\n  constructor(element: Element, config?: TrackGestureConfig) {\n    super(element, { id: DUMMY_ID });\n\n    GestureWatcher.reuse().trackGesture(element, null, {\n      preventDefault: config?.preventDefault,\n      minTotalDeltaX: config?.minDeltaX,\n      maxTotalDeltaX: config?.maxDeltaX,\n      minTotalDeltaY: config?.minDeltaY,\n      maxTotalDeltaY: config?.maxDeltaY,\n      minTotalDeltaZ: config?.minDeltaZ,\n      maxTotalDeltaZ: config?.maxDeltaZ,\n    });\n\n    this.onDestroy(() => GestureWatcher.reuse().noTrackGesture(element));\n  }\n}\n\n/**\n * @interface\n */\nexport type TrackGestureConfig = {\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.preventDefault | OnGestureOptions.preventDefault}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  preventDefault?: boolean;\n\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.minTotalDeltaX | OnGestureOptions.minTotalDeltaX}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  minDeltaX?: number;\n\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.maxTotalDeltaX | OnGestureOptions.maxTotalDeltaX}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  maxDeltaX?: number;\n\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.minTotalDeltaY | OnGestureOptions.minTotalDeltaY}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  minDeltaY?: number;\n\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.maxTotalDeltaY | OnGestureOptions.maxTotalDeltaY}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  maxDeltaY?: number;\n\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.minTotalDeltaZ | OnGestureOptions.minTotalDeltaZ}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  minDeltaZ?: number;\n\n  /**\n   * Corresponds to\n   * {@link Watchers/GestureWatcher.OnGestureOptions.maxTotalDeltaZ | OnGestureOptions.maxTotalDeltaZ}.\n   *\n   * @defaultValue undefined // GestureWatcher default\n   */\n  maxDeltaZ?: number;\n};\n\n// --------------------\n\nconst WIDGET_NAME = \"track-gesture\";\n// Only one TrackGesture widget per element is allowed, but Widget requires a\n// non-blank ID.\nconst DUMMY_ID = WIDGET_NAME;\n\nconst configValidator: WidgetConfigValidatorObject<TrackGestureConfig> = {\n  preventDefault: validateBoolean,\n  minDeltaX: validateNumber,\n  maxDeltaX: validateNumber,\n  minDeltaY: validateNumber,\n  maxDeltaY: validateNumber,\n  minDeltaZ: validateNumber,\n  maxDeltaZ: validateNumber,\n};\n"],"mappings":";;;;;;;AAIA,IAAAA,EAAA,GAAAC,uBAAA,CAAAC,OAAA;AAEA,IAAAC,WAAA,GAAAD,OAAA;AAEA,IAAAE,eAAA,GAAAF,OAAA;AAEA,IAAAG,OAAA,GAAAH,OAAA;AAI8B,SAAAI,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAN,wBAAAM,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,gBAAAK,OAAA,CAAAL,CAAA,0BAAAA,CAAA,sBAAAA,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,cAAAR,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA,SAAAW,gBAAAT,CAAA,EAAAF,CAAA,UAAAE,CAAA,YAAAF,CAAA,aAAAY,SAAA;AAAA,SAAAC,kBAAArB,CAAA,EAAAE,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAD,CAAA,CAAAoB,MAAA,EAAAnB,CAAA,UAAAoB,CAAA,GAAArB,CAAA,CAAAC,CAAA,GAAAoB,CAAA,CAAAC,UAAA,GAAAD,CAAA,CAAAC,UAAA,QAAAD,CAAA,CAAAE,YAAA,kBAAAF,CAAA,KAAAA,CAAA,CAAAG,QAAA,QAAAf,MAAA,CAAAC,cAAA,CAAAZ,CAAA,EAAA2B,cAAA,CAAAJ,CAAA,CAAAK,GAAA,GAAAL,CAAA;AAAA,SAAAM,aAAA7B,CAAA,EAAAE,CAAA,EAAAC,CAAA,WAAAD,CAAA,IAAAmB,iBAAA,CAAArB,CAAA,CAAA8B,SAAA,EAAA5B,CAAA,GAAAC,CAAA,IAAAkB,iBAAA,CAAArB,CAAA,EAAAG,CAAA,GAAAQ,MAAA,CAAAC,cAAA,CAAAZ,CAAA,iBAAA0B,QAAA,SAAA1B,CAAA;AAAA,SAAA2B,eAAAxB,CAAA,QAAAc,CAAA,GAAAc,YAAA,CAAA5B,CAAA,gCAAAE,OAAA,CAAAY,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAc,aAAA5B,CAAA,EAAAD,CAAA,oBAAAG,OAAA,CAAAF,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAH,CAAA,GAAAG,CAAA,CAAA6B,MAAA,CAAAC,WAAA,kBAAAjC,CAAA,QAAAiB,CAAA,GAAAjB,CAAA,CAAAgB,IAAA,CAAAb,CAAA,EAAAD,CAAA,gCAAAG,OAAA,CAAAY,CAAA,UAAAA,CAAA,YAAAG,SAAA,yEAAAlB,CAAA,GAAAgC,MAAA,GAAAC,MAAA,EAAAhC,CAAA;AAAA,SAAAiC,WAAAjC,CAAA,EAAAoB,CAAA,EAAAvB,CAAA,WAAAuB,CAAA,GAAAc,eAAA,CAAAd,CAAA,GAAAe,0BAAA,CAAAnC,CAAA,EAAAoC,yBAAA,KAAAC,OAAA,CAAAC,SAAA,CAAAlB,CAAA,EAAAvB,CAAA,QAAAqC,eAAA,CAAAlC,CAAA,EAAAuC,WAAA,IAAAnB,CAAA,CAAAoB,KAAA,CAAAxC,CAAA,EAAAH,CAAA;AAAA,SAAAsC,2BAAAnC,CAAA,EAAAH,CAAA,QAAAA,CAAA,iBAAAK,OAAA,CAAAL,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAAoB,SAAA,qEAAAwB,sBAAA,CAAAzC,CAAA;AAAA,SAAAyC,uBAAA5C,CAAA,mBAAAA,CAAA,YAAA6C,cAAA,sEAAA7C,CAAA;AAAA,SAAAuC,0BAAA,cAAApC,CAAA,IAAA2C,OAAA,CAAAhB,SAAA,CAAAiB,OAAA,CAAA/B,IAAA,CAAAwB,OAAA,CAAAC,SAAA,CAAAK,OAAA,iCAAA3C,CAAA,aAAAoC,yBAAA,YAAAA,0BAAA,aAAApC,CAAA;AAAA,SAAA6C,UAAA7C,CAAA,EAAAH,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAAoB,SAAA,wDAAAjB,CAAA,CAAA2B,SAAA,GAAAnB,MAAA,CAAAsC,MAAA,CAAAjD,CAAA,IAAAA,CAAA,CAAA8B,SAAA,IAAAY,WAAA,IAAAQ,KAAA,EAAA/C,CAAA,EAAAuB,QAAA,MAAAD,YAAA,WAAAd,MAAA,CAAAC,cAAA,CAAAT,CAAA,iBAAAuB,QAAA,SAAA1B,CAAA,IAAAmD,eAAA,CAAAhD,CAAA,EAAAH,CAAA;AAAA,SAAAmD,gBAAAhD,CAAA,EAAAH,CAAA,WAAAmD,eAAA,GAAAxC,MAAA,CAAAyC,cAAA,GAAAzC,MAAA,CAAAyC,cAAA,CAAAC,IAAA,eAAAlD,CAAA,EAAAH,CAAA,WAAAG,CAAA,CAAAM,SAAA,GAAAT,CAAA,EAAAG,CAAA,KAAAgD,eAAA,CAAAhD,CAAA,EAAAH,CAAA;AAAA,SAAAsD,cAAAnD,CAAA,EAAAoB,CAAA,EAAAvB,CAAA,EAAAE,CAAA,QAAAqD,CAAA,GAAAC,IAAA,CAAAnB,eAAA,KAAAnC,CAAA,GAAAC,CAAA,CAAA2B,SAAA,GAAA3B,CAAA,GAAAoB,CAAA,EAAAvB,CAAA,cAAAE,CAAA,yBAAAqD,CAAA,aAAApD,CAAA,WAAAoD,CAAA,CAAAZ,KAAA,CAAA3C,CAAA,EAAAG,CAAA,OAAAoD,CAAA;AAAA,SAAAC,KAAA,WAAAA,IAAA,yBAAAhB,OAAA,IAAAA,OAAA,CAAAjC,GAAA,GAAAiC,OAAA,CAAAjC,GAAA,CAAA8C,IAAA,eAAArD,CAAA,EAAAG,CAAA,EAAAD,CAAA,QAAAqD,CAAA,GAAAE,cAAA,CAAAzD,CAAA,EAAAG,CAAA,OAAAoD,CAAA,QAAA/C,CAAA,GAAAG,MAAA,CAAAE,wBAAA,CAAA0C,CAAA,EAAApD,CAAA,UAAAK,CAAA,CAAAD,GAAA,GAAAC,CAAA,CAAAD,GAAA,CAAAS,IAAA,CAAA0C,SAAA,CAAApC,MAAA,OAAAtB,CAAA,GAAAE,CAAA,IAAAM,CAAA,CAAA0C,KAAA,OAAAM,IAAA,CAAAb,KAAA,OAAAe,SAAA;AAAA,SAAAD,eAAAtD,CAAA,EAAAoB,CAAA,eAAAR,cAAA,CAAAC,IAAA,CAAAb,CAAA,EAAAoB,CAAA,eAAApB,CAAA,GAAAkC,eAAA,CAAAlC,CAAA,aAAAA,CAAA;AAAA,SAAAkC,gBAAAlC,CAAA,WAAAkC,eAAA,GAAA1B,MAAA,CAAAyC,cAAA,GAAAzC,MAAA,CAAAgD,cAAA,CAAAN,IAAA,eAAAlD,CAAA,WAAAA,CAAA,CAAAM,SAAA,IAAAE,MAAA,CAAAgD,cAAA,CAAAxD,CAAA,MAAAkC,eAAA,CAAAlC,CAAA,KAd9B;AACA;AACA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA,IAwCayD,YAAY,GAAAC,OAAA,CAAAD,YAAA,0BAAAE,OAAA;EAsBvB,SAAAF,aAAYG,OAAgB,EAAEC,MAA2B,EAAE;IAAA,IAAAC,KAAA;IAAA9C,eAAA,OAAAyC,YAAA;IACzDK,KAAA,GAAA7B,UAAA,OAAAwB,YAAA,GAAMG,OAAO,EAAE;MAAEG,EAAE,EAAEC;IAAS,CAAC;IAE/BC,8BAAc,CAACC,KAAK,CAAC,CAAC,CAACC,YAAY,CAACP,OAAO,EAAE,IAAI,EAAE;MACjDQ,cAAc,EAAEP,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEO,cAAc;MACtCC,cAAc,EAAER,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAES,SAAS;MACjCC,cAAc,EAAEV,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEW,SAAS;MACjCC,cAAc,EAAEZ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEa,SAAS;MACjCC,cAAc,EAAEd,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEe,SAAS;MACjCC,cAAc,EAAEhB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEiB,SAAS;MACjCC,cAAc,EAAElB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEmB;IAC1B,CAAC,CAAC;IAEFlB,KAAA,CAAKmB,SAAS,CAAC;MAAA,OAAMhB,8BAAc,CAACC,KAAK,CAAC,CAAC,CAACgB,cAAc,CAACtB,OAAO,CAAC;IAAA,EAAC;IAAC,OAAAE,KAAA;EACvE;EAACjB,SAAA,CAAAY,YAAA,EAAAE,OAAA;EAAA,OAAAjC,YAAA,CAAA+B,YAAA;IAAAhC,GAAA;IAAAsB,KAAA,EAnCD,SAAO3C,GAAGA,CAACwD,OAAgB,EAAuB;MAChD,IAAMuB,QAAQ,GAAAhC,aAAA,CAAAM,YAAA,mBAAaG,OAAO,EAAEI,QAAQ,EAAC;MAC7C,IAAI1E,EAAE,CAAC8F,YAAY,CAACD,QAAQ,EAAE1B,YAAY,CAAC,EAAE;QAC3C,OAAO0B,QAAQ;MACjB;MACA,OAAO,IAAI;IACb;EAAC;IAAA1D,GAAA;IAAAsB,KAAA,EAED,SAAOsC,QAAQA,CAAA,EAAG;MAChB,IAAAC,sBAAc,EACZC,WAAW,EACX,UAAC3B,OAAO,EAAEC,MAAM,EAAK;QACnB,IAAI,CAACJ,YAAY,CAACrD,GAAG,CAACwD,OAAO,CAAC,EAAE;UAC9B,OAAO,IAAIH,YAAY,CAACG,OAAO,EAAEC,MAAM,CAAC;QAC1C;QACA,OAAO,IAAI;MACb,CAAC,EACD2B,eACF,CAAC;IACH;EAAC;AAAA,EApB+BC,cAAM;AAuCxC;AACA;AACA;AA2DA;;AAEA,IAAMF,WAAW,GAAG,eAAe;AACnC;AACA;AACA,IAAMvB,QAAQ,GAAGuB,WAAW;AAE5B,IAAMC,eAAgE,GAAG;EACvEpB,cAAc,EAAEsB,2BAAe;EAC/BpB,SAAS,EAAEqB,0BAAc;EACzBnB,SAAS,EAAEmB,0BAAc;EACzBjB,SAAS,EAAEiB,0BAAc;EACzBf,SAAS,EAAEe,0BAAc;EACzBb,SAAS,EAAEa,0BAAc;EACzBX,SAAS,EAAEW;AACb,CAAC","ignoreList":[]}