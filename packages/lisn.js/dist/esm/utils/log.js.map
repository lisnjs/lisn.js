{"version":3,"file":"log.js","names":["MC","MH","joinAsString","Callback","logInfo","args","isMessageSeen","consoleInfo","LOG_PREFIX","logWarn","consoleWarn","logError","lengthOf","REMOVE","consoleError","discardMessages","newSet","msg","isSeen","has","add"],"sources":["../../../src/ts/utils/log.ts"],"sourcesContent":["/**\n * @module Utils\n */\n\nimport * as MC from \"@lisn/globals/minification-constants\";\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { LogFunction } from \"@lisn/globals/types\";\n\nimport { joinAsString } from \"@lisn/utils/text\";\n\nimport { Callback } from \"@lisn/modules/callback\";\n\n/**\n * Like `console.info` except if the string representation of the given\n * arguments has already been logged, it does nothing.\n *\n * @category Logging\n */\nexport const logInfo: LogFunction = (...args) => {\n  if (!isMessageSeen(args)) {\n    MH.consoleInfo(MC.LOG_PREFIX, ...args);\n  }\n};\n\n/**\n * Like `console.warn` except if the string representation of the given\n * arguments has already been logged, it does nothing.\n *\n * @category Logging\n */\nexport const logWarn: LogFunction = (...args) => {\n  if (!isMessageSeen(args)) {\n    MH.consoleWarn(MC.LOG_PREFIX, ...args);\n  }\n};\n\n/**\n * Like `console.error` except if the string representation of the given\n * arguments has already been logged, it does nothing.\n *\n * @category Logging\n */\nexport const logError: LogFunction = (...args) => {\n  if (\n    (MH.lengthOf(args) > 1 || args[0] !== Callback.REMOVE) &&\n    !isMessageSeen(args)\n  ) {\n    MH.consoleError(MC.LOG_PREFIX, ...args);\n  }\n};\n\nconst discardMessages = MH.newSet<string>();\nconst isMessageSeen = (args: unknown[]) => {\n  const msg = joinAsString(\" \", ...args);\n  const isSeen = discardMessages.has(msg);\n  discardMessages.add(msg);\n  return isSeen;\n};\n"],"mappings":"AAAA;AACA;AACA;;AAEA,OAAO,KAAKA,EAAE;AACd,OAAO,KAAKC,EAAE;AAId,SAASC,YAAY;AAErB,SAASC,QAAQ;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,OAAoB,GAAGA,CAAC,GAAGC,IAAI,KAAK;EAC/C,IAAI,CAACC,aAAa,CAACD,IAAI,CAAC,EAAE;IACxBJ,EAAE,CAACM,WAAW,CAACP,EAAE,CAACQ,UAAU,EAAE,GAAGH,IAAI,CAAC;EACxC;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMI,OAAoB,GAAGA,CAAC,GAAGJ,IAAI,KAAK;EAC/C,IAAI,CAACC,aAAa,CAACD,IAAI,CAAC,EAAE;IACxBJ,EAAE,CAACS,WAAW,CAACV,EAAE,CAACQ,UAAU,EAAE,GAAGH,IAAI,CAAC;EACxC;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMM,QAAqB,GAAGA,CAAC,GAAGN,IAAI,KAAK;EAChD,IACE,CAACJ,EAAE,CAACW,QAAQ,CAACP,IAAI,CAAC,GAAG,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAKF,QAAQ,CAACU,MAAM,KACrD,CAACP,aAAa,CAACD,IAAI,CAAC,EACpB;IACAJ,EAAE,CAACa,YAAY,CAACd,EAAE,CAACQ,UAAU,EAAE,GAAGH,IAAI,CAAC;EACzC;AACF,CAAC;AAED,MAAMU,eAAe,GAAGd,EAAE,CAACe,MAAM,CAAS,CAAC;AAC3C,MAAMV,aAAa,GAAID,IAAe,IAAK;EACzC,MAAMY,GAAG,GAAGf,YAAY,CAAC,GAAG,EAAE,GAAGG,IAAI,CAAC;EACtC,MAAMa,MAAM,GAAGH,eAAe,CAACI,GAAG,CAACF,GAAG,CAAC;EACvCF,eAAe,CAACK,GAAG,CAACH,GAAG,CAAC;EACxB,OAAOC,MAAM;AACf,CAAC","ignoreList":[]}