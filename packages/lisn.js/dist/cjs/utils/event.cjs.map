{"version":3,"file":"event.cjs","names":["MC","_interopRequireWildcard","require","MH","_cssAlter","_misc","_xMap","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","callEventListener","exports","handler","event","isFunction","currentTarget","self","handleEvent","addEventListenerTo","target","eventType","options","arguments","length","undefined","transformEventType","getEventHandlerData","thirdArg","wrappedHandler","supports","getBrowserSupport","isNonPrimitive","_optionsArg","_options$capture","capture","once","_options","removeEventListenerFrom","setEventHandlerData","_wrappedHandler","_thirdArg","addEventListener","data","removeEventListener","deleteEventHandlerData","preventSelect","S_SELECTSTART","preventDefault","isElement","addClasses","PREFIX_NO_SELECT","undoPreventSelect","removeClasses","browserEventSupport","_pointer","passive","signal","optTest","opt","_loop","thisOpt","AbortController","dummyHandler","dummyElement","createElement","e__ignored","registeredEventHandlerData","newXWeakMap","newXMapGetter","newMap","getEventOptionsStr","finalOptions","isObject","copyExistingKeys","stringify","_registeredEventHandl","optionsStr","_registeredEventHandl2","deleteKey","prune","sGet","startsWith","S_POINTER","strReplace","S_MOUSE"],"sources":["../../../src/ts/utils/event.ts"],"sourcesContent":["/**\n * @module Utils\n */\n\nimport * as MC from \"@lisn/globals/minification-constants\";\nimport * as MH from \"@lisn/globals/minification-helpers\";\n\nimport { addClasses, removeClasses } from \"@lisn/utils/css-alter\";\nimport { copyExistingKeys } from \"@lisn/utils/misc\";\n\nimport { XMap, newXMapGetter, newXWeakMap } from \"@lisn/modules/x-map\";\n\n/**\n * Calls the given event listener, which could be a function that's callable\n * directly, or an object that has a `handleEvent` function property.\n *\n * @category Events: Generic\n */\nexport const callEventListener = (\n  handler: EventListenerOrEventListenerObject,\n  event: Event,\n) => {\n  if (MH.isFunction(handler)) {\n    handler.call(event.currentTarget || self, event);\n  } else {\n    handler.handleEvent.call(event.currentTarget || self, event);\n  }\n};\n\n/**\n * Adds an event listener for the given event name to the given target.\n *\n * Like {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener | EventTarget:addEventListener}\n * but it handles `options` object in case the browser does not support those.\n * Does not support the `signal` option unless browser natively supports that.\n *\n * @return {} `true` if successfully added, or `false` if the same handler has\n * already been added by us, or if the handler is not a valid event listener.\n *\n * @category Events: Generic\n */\nexport const addEventListenerTo = (\n  target: EventTarget,\n  eventType: string,\n  handler: EventListenerOrEventListenerObject,\n  options: boolean | AddEventListenerOptions = {},\n): boolean => {\n  eventType = transformEventType(eventType);\n  if (getEventHandlerData(target, eventType, handler, options)) {\n    // already added\n    return false;\n  }\n\n  let thirdArg = options;\n  let wrappedHandler = handler;\n\n  // If the user passed an options object but the browser only supports a\n  // boolen for 'useCapture', then handle this.\n  const supports = getBrowserSupport();\n  if (MH.isNonPrimitive(options)) {\n    if (!supports._optionsArg) {\n      thirdArg = options.capture ?? false;\n    }\n\n    if (options.once && !supports._options.once) {\n      // Remove the handler once it's called once\n      wrappedHandler = (event) => {\n        removeEventListenerFrom(target, eventType, handler, options);\n        callEventListener(handler, event);\n      };\n    }\n  }\n\n  setEventHandlerData(target, eventType, handler, options, {\n    _wrappedHandler: wrappedHandler,\n    _thirdArg: thirdArg,\n  });\n\n  target.addEventListener(eventType, wrappedHandler, thirdArg);\n  return true;\n};\n\n/**\n * Removes an event listener that has been added using\n * {@link addEventListenerTo}.\n *\n * **IMPORTANT:** If you have added a listener using the built-in\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener | EventTarget:addEventListener},\n * then you should use\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener | EventTarget:removeEventListener},\n * to remove it, not this function.\n *\n * @return {} `true` if successfully removed, or `false` if the handler has not\n * been added by us.\n *\n * @category Events: Generic\n */\nexport const removeEventListenerFrom = (\n  target: EventTarget,\n  eventType: string,\n  handler: EventListenerOrEventListenerObject,\n  options: boolean | AddEventListenerOptions = {},\n) => {\n  eventType = transformEventType(eventType);\n  const data = getEventHandlerData(target, eventType, handler, options);\n\n  if (!data) {\n    return false;\n  }\n\n  target.removeEventListener(eventType, data._wrappedHandler, data._thirdArg);\n  deleteEventHandlerData(target, eventType, handler, options);\n  return true;\n};\n\n/**\n * @ignore\n * @internal\n */\nexport const preventSelect = (target: EventTarget) => {\n  addEventListenerTo(target, MC.S_SELECTSTART, MH.preventDefault);\n  if (MH.isElement(target)) {\n    addClasses(target, MC.PREFIX_NO_SELECT);\n  }\n};\n\n/**\n * @ignore\n * @internal\n */\nexport const undoPreventSelect = (target: EventTarget) => {\n  removeEventListenerFrom(target, MC.S_SELECTSTART, MH.preventDefault);\n  if (MH.isElement(target)) {\n    removeClasses(target, MC.PREFIX_NO_SELECT);\n  }\n};\n\n/**\n * @ignore\n * @internal\n */\nexport const getBrowserSupport = (): BrowserEventSupport => {\n  if (browserEventSupport) {\n    // already detected\n    return browserEventSupport;\n  }\n\n  const supports = {\n    _pointer: false,\n    _optionsArg: false,\n    _options: {\n      capture: false,\n      passive: false,\n      once: false,\n      signal: false,\n    },\n  };\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#safely_detecting_option_support\n  const optTest = {};\n  let opt: keyof typeof supports._options;\n  for (opt in supports._options) {\n    const thisOpt = opt;\n    MH.defineProperty(optTest, thisOpt, {\n      get: () => {\n        supports._options[thisOpt] = true;\n        if (thisOpt === \"signal\") {\n          return new AbortController().signal;\n        }\n        return false;\n      },\n    });\n  }\n\n  const dummyHandler = () => {}; // TypeScript does not accept null\n  const dummyElement = MH.createElement(\"div\");\n  try {\n    dummyElement.addEventListener(\"testOptionSupport\", dummyHandler, optTest);\n    dummyElement.removeEventListener(\n      \"testOptionSupport\",\n      dummyHandler,\n      optTest,\n    );\n    supports._optionsArg = true;\n  } catch (e__ignored) {\n    //\n  }\n\n  supports._pointer = \"onpointerup\" in dummyElement;\n\n  browserEventSupport = supports;\n  return supports;\n};\n\n// --------------------\n\ntype EventHandlerData = {\n  _wrappedHandler: EventListenerOrEventListenerObject;\n  _thirdArg: boolean | AddEventListenerOptions;\n};\n\nlet browserEventSupport: BrowserEventSupport;\n\nconst registeredEventHandlerData = newXWeakMap<\n  EventTarget,\n  XMap<\n    string, // event type\n    XMap<\n      EventListenerOrEventListenerObject, // user-supplied handler\n      Map<\n        string, // str repr of options\n        EventHandlerData\n      >\n    >\n  >\n>(newXMapGetter(newXMapGetter(() => MH.newMap())));\n\n// detect browser features, see below\ntype BrowserEventSupport = {\n  _pointer: boolean;\n  _optionsArg: boolean;\n  _options: {\n    capture: boolean;\n    passive: boolean;\n    once: boolean;\n    signal: boolean;\n  };\n};\n\nconst getEventOptionsStr = (\n  options: boolean | AddEventListenerOptions,\n): string => {\n  const finalOptions: AddEventListenerOptions = {\n    capture: false,\n    passive: false,\n    once: false,\n  };\n\n  if (options === false || options === true) {\n    finalOptions.capture = options;\n  } else if (MH.isObject(options)) {\n    copyExistingKeys(options, finalOptions);\n  }\n\n  return MH.stringify(finalOptions);\n};\n\nconst getEventHandlerData = (\n  target: EventTarget,\n  eventType: string,\n  handler: EventListenerOrEventListenerObject,\n  options: boolean | AddEventListenerOptions,\n) => {\n  const optionsStr = getEventOptionsStr(options);\n  return registeredEventHandlerData\n    .get(target)\n    ?.get(eventType)\n    ?.get(handler)\n    ?.get(optionsStr);\n};\n\nconst deleteEventHandlerData = (\n  target: EventTarget,\n  eventType: string,\n  handler: EventListenerOrEventListenerObject,\n  options: boolean | AddEventListenerOptions,\n) => {\n  const optionsStr = getEventOptionsStr(options);\n  MH.deleteKey(\n    registeredEventHandlerData.get(target)?.get(eventType)?.get(handler),\n    optionsStr,\n  );\n  registeredEventHandlerData.prune(target, eventType, handler);\n};\n\nconst setEventHandlerData = (\n  target: EventTarget,\n  eventType: string,\n  handler: EventListenerOrEventListenerObject,\n  options: boolean | AddEventListenerOptions,\n  data: EventHandlerData,\n) => {\n  const optionsStr = getEventOptionsStr(options);\n  registeredEventHandlerData\n    .sGet(target)\n    .sGet(eventType)\n    .sGet(handler)\n    .set(optionsStr, data);\n};\n\nconst transformEventType = (eventType: string) => {\n  const supports = getBrowserSupport();\n  if (eventType.startsWith(MC.S_POINTER) && !supports._pointer) {\n    // TODO maybe log a warning message is it's not supported, e.g. there's no\n    // mousecancel\n    return MH.strReplace(eventType, MC.S_POINTER, MC.S_MOUSE);\n  }\n\n  return eventType;\n};\n"],"mappings":"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","ignoreList":[]}